!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],e);else{var n="object"==typeof exports?e(require("jquery")):e(t.$);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}("undefined"!=typeof self?self:this,function(__WEBPACK_EXTERNAL_MODULE_59__){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=99)}([function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(61)),r(n(62)),r(n(43)),r(n(132)),r(n(133)),r(n(134)),r(n(135)),r(n(63)),r(n(136)),r(n(64)),r(n(137)),r(n(138)),r(n(140)),r(n(141)),r(n(142))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(0),o=n(0),a=n(0),s=n(0),u=n(0),c=n(26),l=n(0);e.LUIDGenerator=function(){var t=1;return function(){return t++}}(),e.sha1=function(t){var e=s.stringToByteArray(t),n=new a.Sha1;n.update(e);var r=n.digest();return o.base64.encodeByteArray(r)};var h=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?n+=h.apply(null,t[r]):"object"==typeof t[r]?n+=u.stringify(t[r]):n+=t[r],n+=" ";return n};e.logger=null;var d=!0;e.enableLogging=function(t,n){r.assert(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?("undefined"!=typeof console&&("function"==typeof console.log?e.logger=console.log.bind(console):"object"==typeof console.log&&(e.logger=function(t){console.log(t)})),n&&c.SessionStorage.set("logging_enabled",!0)):"function"==typeof t?e.logger=t:(e.logger=null,c.SessionStorage.remove("logging_enabled"))},e.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!0===d&&(d=!1,null===e.logger&&!0===c.SessionStorage.get("logging_enabled")&&e.enableLogging(!0)),e.logger){var r=h.apply(null,t);e.logger(r)}},e.logWrapper=function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.log.apply(void 0,[t].concat(n))}},e.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if("undefined"!=typeof console){var n="FIREBASE INTERNAL ERROR: "+h.apply(void 0,t);void 0!==console.error?console.error(n):console.log(n)}},e.fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=h.apply(void 0,t);throw new Error("FIREBASE FATAL ERROR: "+n)},e.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if("undefined"!=typeof console){var n="FIREBASE WARNING: "+h.apply(void 0,t);void 0!==console.warn?console.warn(n):console.log(n)}},e.warnIfPageIsSecure=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&e.warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},e.warnAboutUnsupportedMethod=function(t){e.warn(t+" is unsupported and will likely change soon.  Please do not use.")},e.isInvalidJSONNumber=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},e.executeWhenDOMReady=function(t){if(l.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},e.MIN_NAME="[MIN_NAME]",e.MAX_NAME="[MAX_NAME]",e.nameCompare=function(t,n){if(t===n)return 0;if(t===e.MIN_NAME||n===e.MAX_NAME)return-1;if(n===e.MIN_NAME||t===e.MAX_NAME)return 1;var r=e.tryParseInt(t),i=e.tryParseInt(n);return null!==r?null!==i?r-i==0?t.length-n.length:r-i:-1:null!==i?1:t<n?-1:1},e.stringCompare=function(t,e){return t===e?0:t<e?-1:1},e.requireKey=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+u.stringify(e))},e.ObjectToUniqueKey=function(t){if("object"!=typeof t||null===t)return u.stringify(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=u.stringify(n[o]),i+=":",i+=e.ObjectToUniqueKey(t[n[o]]);return i+="}"},e.splitStringBySize=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},e.each=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else i.forEach(t,function(t,n){return e(n,t)})},e.bindCallback=function(t,e){return e?t.bind(e):t},e.doubleToIEEE754String=function(t){r.assert(!e.isInvalidJSONNumber(t),"Invalid JSON number");var n,i,o,a,s,u,c;for(0===t?(i=0,o=0,n=1/t==-1/0?1:0):(n=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(i=(a=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(i=0,o=Math.round(t/Math.pow(2,-1074)))),u=[],s=52;s;s-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(s=11;s;s-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(n?1:0),u.reverse(),c=u.join("");var l="";for(s=0;s<64;s+=8){var h=parseInt(c.substr(s,8),2).toString(16);1===h.length&&(h="0"+h),l+=h}return l.toLowerCase()},e.isChromeExtensionContentScript=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},e.isWindowsStoreApp=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},e.errorForServerCode=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r},e.INTEGER_REGEXP_=new RegExp("^-?\\d{1,10}$"),e.tryParseInt=function(t){if(e.INTEGER_REGEXP_.test(t)){var n=Number(t);if(n>=-2147483648&&n<=2147483647)return n}return null},e.exceptionGuard=function(t){try{t()}catch(t){setTimeout(function(){var n=t.stack||"";throw e.warn("Exception was thrown by user callback.",n),t},Math.floor(0))}},e.callUserCallback=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];"function"==typeof t&&e.exceptionGuard(function(){t.apply(void 0,n)})},e.beingCrawled=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},e.exportPropGetter=function(t,e,n){Object.defineProperty(t,e,{get:n})},e.setTimeoutNonBlocking=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(0),o=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),i=e.slice(),o=0;o<n.length&&o<i.length;o++){var a=r.nameCompare(n[o],i[o]);if(0!==a)return a}return n.length===i.length?0:n.length<i.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}();e.Path=o;var a=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=i.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=i.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=i.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}();e.ValidationPath=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartManager=void 0;var r=n(36),i=n(100),o=g(n(104)),a=g(n(58)),s=g(n(25)),u=g(n(11)),c=n(18),l=g(n(40)),h=g(n(20)),d=g(n(39)),p=g(n(38)),f=g(n(41)),_=n(19);function g(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSources={},this._dataSourceCache={},this._dataProviders={},this._frames={},this._areas={},this._timelines={},this._ranges={},this._plotters={},this._themes={},this._titles={},this._frameMousePos={},this._dsChartStyle={},this._dragStarted=!1,this._oldX=0,this._fakeIndicators={},this._captureMouseWheelDirectly=!0,this._chart={},this._chart.defaultFrame=new i.Chart,this._drawingTool=t.DrawingTool.CrossCursor,this._beforeDrawingTool=this._drawingTool,this._language="zh-cn",this._mainCanvas=null,this._overlayCanvas=null,this._mainContext=null,this._overlayContext=null,t.created||(t.instance=this,t.created=!0),t.instance}e=t,g=void 0,(n=[{key:"redraw",value:function(t,e){(void 0===t||e)&&(t="All"),"All"!==t&&"MainCanvas"!==t||(e&&this.getFrame("frame0").setChanged(!0),this.layout(this._mainContext,"frame0",0,0,this._mainCanvas.width,this._mainCanvas.height),this.drawMain("frame0",this._mainContext)),"All"!==t&&"OverlayCanvas"!==t||(this._overlayContext.clearRect(0,0,this._overlayCanvas.width,this._overlayCanvas.height),this.drawOverlay("frame0",this._overlayContext))}},{key:"bindCanvas",value:function(t,e){"main"===t?(this._mainCanvas=e,this._mainContext=e.getContext("2d")):"overlay"===t&&(this._overlayCanvas=e,this._overlayContext=e.getContext("2d"),this._captureMouseWheelDirectly&&$(this._overlayCanvas).bind("mousewheel",r.Control.mouseWheel))}},{key:"getCaptureMouseWheelDirectly",value:function(){return this._captureMouseWheelDirectly}},{key:"setCaptureMouseWheelDirectly",value:function(t){this._captureMouseWheelDirectly=t,t?$(this._overlayCanvas).bind("mousewheel",r.Control.mouseWheel):$(this._overlayCanvas).unbind("mousewheel")}},{key:"getChart",value:function(t){return this._chart.defaultFrame}},{key:"init",value:function(){delete this._ranges["frame0.k0.indic1"],delete this._ranges["frame0.k0.indic1Range"],delete this._areas["frame0.k0.indic1"],delete this._areas["frame0.k0.indic1Range"],s.DefaultTemplate.loadTemplate("frame0.k0",""),this.redraw("All",!0)}},{key:"setCurrentDrawingTool",value:function(e){this._drawingTool=t.DrawingTool[e],this.setRunningMode(this._drawingTool)}},{key:"getLanguage",value:function(){return this._language}},{key:"setLanguage",value:function(t){this._language=t}},{key:"setThemeName",value:function(t,e){void 0===e&&(e="Dark");var n;switch(e){case"Light":n=new h.LightTheme;break;default:e="Dark",n=new h.DarkTheme}this._themeName=e,this.setTheme(t,n),this.getFrame(t).setChanged(!0)}},{key:"getChartStyle",value:function(t){var e=this._dsChartStyle[t];return void 0===e?"CandleStick":e}},{key:"setChartStyle",value:function(t,e){if(this._dsChartStyle[t]!==e){var n,r,i=t+".main",a=i+".main",s=i+".main";switch(e){case"CandleStick":case"CandleStickHLC":case"OHLC":switch(void 0!==(n=this.getDataProvider(a))&&_.Util.isInstance(n,l.MainDataProvider)||(n=new l.MainDataProvider(a),this.setDataProvider(a,n),n.updateData()),this.setMainIndicator(t,c.ChartSettings.get().charts.mIndic),e){case"CandleStick":r=new d.CandlestickPlotter(s);break;case"CandleStickHLC":r=new d.CandlestickHLCPlotter(s);break;case"OHLC":r=new d.OHLCPlotter(s)}this.setPlotter(s,r),r=new d.MinMaxPlotter(i+".decoration"),this.setPlotter(r.getName(),r);break;case"Line":n=new l.IndicatorDataProvider(a),this.setDataProvider(n.getName(),n),n.setIndicator(new o.HLCIndicator),this.removeMainIndicator(t),r=new d.IndicatorPlotter(s),this.setPlotter(s,r),this.removePlotter(i+".decoration")}this.getArea(r.getAreaName()).setChanged(!0),this._dsChartStyle[t]=e}}},{key:"setNormalMode",value:function(){this._drawingTool=this._beforeDrawingTool,$(".chart_dropdown_data").removeClass("chart_dropdown-hover"),$("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),$("#chart_CrossCursor").parent().addClass("selected"),this._drawingTool===t.DrawingTool.Cursor?(this.showCursor(),$("#mode a").removeClass("selected"),$("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),$("#chart_Cursor").parent().addClass("selected")):this.hideCursor()}},{key:"setRunningMode",value:function(e){var n=this.getDataSource("frame0.k0"),r=n.getCurrentToolObject();if(null!==r&&r.state!==p.CToolObject.state.AfterDraw&&n.delToolObject(),n.getToolObjectCount()>10)this.setNormalMode();else switch(this._drawingTool=e,e===t.DrawingTool.Cursor&&this.showCursor(),e){case t.DrawingTool.Cursor:this._beforeDrawingTool=e;break;case t.DrawingTool.ArrowLine:n.addToolObject(new p.CArrowLineObject("frame0.k0"));break;case t.DrawingTool.BandLine:n.addToolObject(new p.CBandLineObject("frame0.k0"));break;case t.DrawingTool.BiParallelLine:n.addToolObject(new p.CBiParallelLineObject("frame0.k0"));break;case t.DrawingTool.BiParallelRayLine:n.addToolObject(new p.CBiParallelRayLineObject("frame0.k0"));break;case t.DrawingTool.CrossCursor:this._beforeDrawingTool=e;break;case t.DrawingTool.DrawFibFans:n.addToolObject(new p.CFibFansObject("frame0.k0"));break;case t.DrawingTool.DrawFibRetrace:n.addToolObject(new p.CFibRetraceObject("frame0.k0"));break;case t.DrawingTool.DrawLines:n.addToolObject(new p.CStraightLineObject("frame0.k0"));break;case t.DrawingTool.HoriRayLine:n.addToolObject(new p.CHoriRayLineObject("frame0.k0"));break;case t.DrawingTool.HoriSegLine:n.addToolObject(new p.CHoriSegLineObject("frame0.k0"));break;case t.DrawingTool.HoriStraightLine:n.addToolObject(new p.CHoriStraightLineObject("frame0.k0"));break;case t.DrawingTool.PriceLine:n.addToolObject(new p.CPriceLineObject("frame0.k0"));break;case t.DrawingTool.RayLine:n.addToolObject(new p.CRayLineObject("frame0.k0"));break;case t.DrawingTool.SegLine:n.addToolObject(new p.CSegLineObject("frame0.k0"));break;case t.DrawingTool.StraightLine:n.addToolObject(new p.CStraightLineObject("frame0.k0"));break;case t.DrawingTool.TriParallelLine:n.addToolObject(new p.CTriParallelLineObject("frame0.k0"));break;case t.DrawingTool.VertiStraightLine:n.addToolObject(new p.CVertiStraightLineObject("frame0.k0"))}}},{key:"getTitle",value:function(t){return this._titles[t]}},{key:"setTitle",value:function(t,e){this._titles[t]=e}},{key:"setCurrentDataSource",value:function(t,e){var n=this.getCachedDataSource(e);void 0!==n&&null!==n?this.setDataSource(t,n,!0):(n=new u.MainDataSource(e),this.setDataSource(t,n,!0),this.setCachedDataSource(e,n))}},{key:"getDataSource",value:function(t){return this._dataSources[t]}},{key:"setDataSource",value:function(t,e,n){this._dataSources[t]=e,n&&this.updateData(t,null)}},{key:"getCachedDataSource",value:function(t){return this._dataSourceCache[t]}},{key:"setCachedDataSource",value:function(t,e){this._dataSourceCache[t]=e}},{key:"getDataProvider",value:function(t){return this._dataProviders[t]}},{key:"setDataProvider",value:function(t,e){this._dataProviders[t]=e}},{key:"removeDataProvider",value:function(t){delete this._dataProviders[t]}},{key:"getFrame",value:function(t){return this._frames[t]}},{key:"setFrame",value:function(t,e){this._frames[t]=e}},{key:"removeFrame",value:function(t){delete this._frames[t]}},{key:"getArea",value:function(t){return this._areas[t]}},{key:"setArea",value:function(t,e){this._areas[t]=e}},{key:"removeArea",value:function(t){delete this._areas[t]}},{key:"getTimeline",value:function(t){return this._timelines[t]}},{key:"setTimeline",value:function(t,e){this._timelines[t]=e}},{key:"removeTimeline",value:function(t){delete this._timelines[t]}},{key:"getRange",value:function(t){return this._ranges[t]}},{key:"setRange",value:function(t,e){this._ranges[t]=e}},{key:"removeRange",value:function(t){delete this._ranges[t]}},{key:"getPlotter",value:function(t){return this._plotters[t]}},{key:"setPlotter",value:function(t,e){this._plotters[t]=e}},{key:"removePlotter",value:function(t){delete this._plotters[t]}},{key:"getTheme",value:function(t){return this._themes[t]}},{key:"setTheme",value:function(t,e){this._themes[t]=e}},{key:"getFrameMousePos",value:function(t,e){void 0!==this._frameMousePos[t]?(e.x=this._frameMousePos[t].x,e.y=this._frameMousePos[t].y):(e.x=-1,e.y=-1)}},{key:"setFrameMousePos",value:function(t,e,n){this._frameMousePos[t]={x:e,y:n}}},{key:"drawArea",value:function(t,e,n){var r=e.getNameObject().getCompAt(2);if("timeline"===r){if(e.getHeight()<20)return}else if(e.getHeight()<30)return;if(!(e.getWidth()<30)){r=e.getName();var i,o,a=n.length;for(o=0;o<a;o++)void 0!==(i=this._plotters[r+n[o]])&&i.Draw(t)}}},{key:"drawAreaMain",value:function(t,e){var n;n=this._dataSources[e.getDataSourceName()].getDataCount()<1?[".background"]:[".background",".grid",".main",".secondary"],this.drawArea(t,e,n),e.setChanged(!1)}},{key:"drawAreaOverlay",value:function(t,e){var n;n=this._dataSources[e.getDataSourceName()].getDataCount()<1?[".selection"]:[".decoration",".selection",".info",".tool"],this.drawArea(t,e,n)}},{key:"drawMain",value:function(t,e){for(var n in this._areas)this._areas[n].getFrameName()!==t||_.Util.isInstance(this._areas[n],f.ChartAreaGroup)||this.drawAreaMain(e,this._areas[n]);var r;for(var i in this._timelines)(r=this._timelines[i]).getFrameName()===t&&r.setUpdated(!1);for(var o in this._ranges)(r=this._ranges[o]).getFrameName()===t&&r.setUpdated(!1);for(var a in this._areas)(r=this._areas[a]).getFrameName()===t&&r.setChanged(!1)}},{key:"drawOverlay",value:function(t,e){for(var n in this._areas){var r=this._areas[n];_.Util.isInstance(r,f.ChartAreaGroup)&&r.getFrameName()===t&&r.drawGrid(e)}for(var i in this._areas){var o=this._areas[i];!1===_.Util.isInstance(o,f.ChartAreaGroup)&&o.getFrameName()===t&&this.drawAreaOverlay(e,o)}}},{key:"updateData",value:function(t,e){var n=this.getDataSource(t);if(void 0!==n&&null!==n){if(void 0!==e&&null!==e){if(!n.update(e))return!1;if(n.getUpdateMode()===u.DataSource.UpdateMode.DoNothing)return!0}else n.setUpdateMode(u.DataSource.UpdateMode.Refresh);var r=this.getTimeline(t);if(void 0!==r&&null!==r&&r.update(),n.getDataCount()<1)return!0;var i,o,a=[".main",".secondary"];for(var s in this._areas)if(i=this._areas[s],!_.Util.isInstance(i,f.ChartAreaGroup)&&i.getDataSourceName()===t){o=i.getName();for(var c=0;c<a.length;c++){var l=this.getDataProvider(o+a[c]);void 0!==l&&null!==l&&l.updateData()}}return!0}}},{key:"updateRange",value:function(t){if(!(this.getDataSource(t).getDataCount()<1)){var e,n,r=[".main",".secondary"];for(var i in this._areas)if(e=this._areas[i],!_.Util.isInstance(e,f.ChartAreaGroup)&&e.getDataSourceName()===t){n=e.getName();for(var o=0;o<r.length;o++){var a=this.getDataProvider(n+r[o]);void 0!==a&&null!==a&&a.updateRange()}var s=this.getTimeline(t);if(void 0!==s&&s.getMaxItemCount()>0){var u=this.getRange(n);void 0!==u&&null!==u&&u.update()}}}}},{key:"layout",value:function(t,e,n,r,i,o){var a=this.getFrame(e);a.measure(t,i-n,o-r),a.layout(n,r,i,o);for(var s in this._timelines){var u=this._timelines[s];u.getFrameName()===e&&u.onLayout()}for(var c in this._dataSources)c.substring(0,e.length)===e&&this.updateRange(c)}},{key:"SelectRange",value:function(t,e){for(var n in this._ranges){this._ranges[n].getAreaName()===t.getName()?this._ranges[n].selectAt(e):this._ranges[n].unselect()}}},{key:"scale",value:function(t){if(null!==this._highlightedFrame){var e=this._highlightedFrame.getHighlightedArea();if(void 0!==this.getRange(e.getName())){var n=e.getDataSourceName(),r=this.getTimeline(n);null!==r&&(r.scale(t),this.updateRange(n))}}}},{key:"showCursor",value:function(t){void 0===t&&(t="default"),this._mainCanvas.style.cursor=t,this._overlayCanvas.style.cursor=t}},{key:"hideCursor",value:function(){this._mainCanvas.style.cursor="none",this._overlayCanvas.style.cursor="none"}},{key:"showCrossCursor",value:function(t,e,n){var r=this.getRange(t.getName());return!(void 0===r||(r.selectAt(n),void 0===(r=this.getTimeline(t.getDataSourceName()))||!r.selectAt(e)))}},{key:"hideCrossCursor",value:function(t){if(null!==t&&void 0!==t)for(var e in this._timelines){var n=this._timelines[e];n!==t&&n.unselect()}else for(var r in this._timelines)this._timelines[r].unselect();for(var i in this._ranges)this._ranges[i].unselect()}},{key:"clearHighlight",value:function(){null!==this._highlightedFrame&&void 0!==this._highlightedFrame&&(this._highlightedFrame.highlight(null),this._highlightedFrame=null)}},{key:"onToolMouseMove",value:function(t,e,n){var r=!1;t+=".";for(var i in this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.Util.isInstance(o,u.MainDataSource)&&o.toolManager.acceptMouseMoveEvent(e,n)&&(r=!0)}return r}},{key:"onToolMouseDown",value:function(t,e,n){var r=!1;t+=".";for(var i in this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.Util.isInstance(o,u.MainDataSource)&&o.toolManager.acceptMouseDownEvent(e,n)&&(r=!0)}return r}},{key:"onToolMouseUp",value:function(t,e,n){var r=!1;t+=".";for(var i in this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.Util.isInstance(o,u.MainDataSource)&&o.toolManager.acceptMouseUpEvent(e,n)&&(r=!0)}return r}},{key:"onToolMouseDrag",value:function(t,e,n){var r=!1;t+=".";for(var i in this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.Util.isInstance(o,u.MainDataSource)&&o.toolManager.acceptMouseDownMoveEvent(e,n)&&(r=!0)}return r}},{key:"onMouseMove",value:function(t,e,n,r){var i=this.getFrame(t);if(void 0!==i)if(this.setFrameMousePos(t,e,n),this.hideCrossCursor(),this._highlightedFrame!==i&&this.clearHighlight(),null===this._capturingMouseArea||void 0===this._capturingMouseArea){var o=i.contains(e,n);if(null!==o){var a,s;for(s=o.length-1;s>=0;s--)if(null!==(a=(a=o[s]).onMouseMove(e,n)))return void(_.Util.isInstance(a,f.ChartAreaGroup)||(i.highlight(a),this._highlightedFrame=i))}}else this._capturingMouseArea.onMouseMove(e,n)}},{key:"onMouseLeave",value:function(t,e,n,r){void 0!==this.getFrame(t)&&(this.setFrameMousePos(t,e,n),this.hideCrossCursor(),this.clearHighlight(),null!==this._capturingMouseArea&&void 0!==this._capturingMouseArea&&(this._capturingMouseArea.onMouseLeave(e,n),this._capturingMouseArea=null),this._dragStarted=!1)}},{key:"onMouseDown",value:function(t,e,n){var r=this.getFrame(t);if(void 0!==r){var i=r.contains(e,n);if(null!==i){var o,a;for(a=i.length-1;a>=0;a--)if(null!==(o=(o=i[a]).onMouseDown(e,n)))return void(this._capturingMouseArea=o)}}}},{key:"onMouseUp",value:function(t,e,n){var i=this.getFrame(t);void 0!==i&&this._capturingMouseArea&&(null===this._capturingMouseArea.onMouseUp(e,n)&&!1===this._dragStarted&&(null!==this._selectedFrame&&void 0!==this._selectedFrame&&this._selectedFrame!==i&&this._selectedFrame.select(null),this._capturingMouseArea.isSelected()?(this._captureMouseWheelDirectly||$(this._overlayCanvas).unbind("mousewheel"),i.select(null),this._selectedFrame=null):(this._selectedFrame!==i&&(this._captureMouseWheelDirectly||$(this._overlayCanvas).bind("mousewheel",r.Control.mouseWheel)),i.select(this._capturingMouseArea),this._selectedFrame=i)),this._capturingMouseArea=null,this._dragStarted=!1)}},{key:"deleteToolObject",value:function(){var t=this.getDataSource("frame0.k0");null!==t.getSelectToolObjcet()&&t.delSelectToolObject();var e=t.getCurrentToolObject();null!==e&&e.getState()!==p.CToolObject.state.AfterDraw&&t.delToolObject(),this.setNormalMode()}},{key:"unloadTemplate",value:function(t){if(void 0!==this.getFrame(t)){for(var e in this._dataSources)e.match(t+".")&&delete this._dataSources[e];for(var n in this._dataProviders)this._dataProviders[n].getFrameName()===t&&delete this._dataProviders[n];delete this._frames[t];for(var r in this._areas)this._areas[r].getFrameName()===t&&delete this._areas[r];for(var i in this._timelines)this._timelines[i].getFrameName()===t&&delete this._timelines[i];for(var o in this._ranges)this._ranges[o].getFrameName()===t&&delete this._ranges[o];for(var a in this._plotters)this._plotters[a].getFrameName()===t&&delete this._plotters[a];delete this._themes[t],delete this._frameMousePos[t]}}},{key:"createIndicatorAndRange",value:function(t,e,n){var r,i;switch(e){case"MA":r=new o.MAIndicator,i=new a.PositiveRange(t);break;case"EMA":r=new o.EMAIndicator,i=new a.PositiveRange(t);break;case"VOLUME":r=new o.VOLUMEIndicator,i=new a.ZeroBasedPositiveRange(t);break;case"MACD":r=new o.MACDIndicator,i=new a.ZeroCenteredRange(t);break;case"DMI":r=new o.DMIIndicator,i=new a.PercentageRange(t);break;case"DMA":r=new o.DMAIndicator,i=new a.Range(t);break;case"TRIX":r=new o.TRIXIndicator,i=new a.Range(t);break;case"BRAR":r=new o.BRARIndicator,i=new a.Range(t);break;case"VR":r=new o.VRIndicator,i=new a.Range(t);break;case"OBV":r=new o.OBVIndicator,i=new a.Range(t);break;case"EMV":r=new o.EMVIndicator,i=new a.Range(t);break;case"RSI":r=new o.RSIIndicator,i=new a.PercentageRange(t);break;case"WR":r=new o.WRIndicator,i=new a.PercentageRange(t);break;case"SAR":r=new o.SARIndicator,i=new a.PositiveRange(t);break;case"KDJ":r=new o.KDJIndicator,i=new a.PercentageRange(t);break;case"ROC":r=new o.ROCIndicator,i=new a.Range(t);break;case"MTM":r=new o.MTMIndicator,i=new a.Range(t);break;case"BOLL":r=new o.BOLLIndicator,i=new a.Range(t);break;case"PSY":r=new o.PSYIndicator,i=new a.Range(t);break;case"StochRSI":r=new o.STOCHRSIIndicator,i=new a.PercentageRange(t);break;default:return null}return n||r.setParameters(c.ChartSettings.get().indics[e]),{indic:r,range:i}}},{key:"setMainIndicator",value:function(t,e){var n=t+".main",r=this.getDataProvider(n+".main");if(void 0===r||!_.Util.isInstance(r,l.MainDataProvider))return!1;var i;switch(e){case"MA":i=new o.MAIndicator;break;case"EMA":i=new o.EMAIndicator;break;case"BOLL":i=new o.BOLLIndicator;break;case"SAR":i=new o.SARIndicator;break;default:return!1}i.setParameters(c.ChartSettings.get().indics[e]);var a=n+".secondary",s=this.getDataProvider(a);void 0===s&&(s=new l.IndicatorDataProvider(a),this.setDataProvider(s.getName(),s)),s.setIndicator(i);var u=this.getPlotter(a);return void 0===u&&(u=new d.IndicatorPlotter(a),this.setPlotter(u.getName(),u)),this.getArea(n).setChanged(!0),!0}},{key:"setIndicator",value:function(t,e){var n=this.getArea(t);if(null===n||void 0===n||"main"===n.getNameObject().getCompAt(2))return!1;var r=this.getDataProvider(t+".secondary");if(null===r||void 0===r||!_.Util.isInstance(r,l.IndicatorDataProvider))return!1;var i=this.createIndicatorAndRange(t,e);if(null===i||void 0===i)return!1;var a=i.indic,s=i.range;if(this.removeDataProvider(t+".main"),this.removePlotter(t+".main"),this.removeRange(t),this.removePlotter(t+"Range.decoration"),r.setIndicator(a),this.setRange(t,s),s.setPaddingTop(20),s.setPaddingBottom(4),s.setMinInterval(20),_.Util.isInstance(a,o.VOLUMEIndicator)){var u=new d.LastVolumePlotter(t+"Range.decoration");this.setPlotter(u.getName(),u)}else if(_.Util.isInstance(a,o.BOLLIndicator)||_.Util.isInstance(a,o.SARIndicator)){var c=new l.MainDataProvider(t+".main");this.setDataProvider(c.getName(),c),c.updateData();var h=new d.OHLCPlotter(t+".main");this.setPlotter(h.getName(),h)}return!0}},{key:"removeMainIndicator",value:function(t){var e=t+".main",n=e+".secondary",r=this.getDataProvider(n);void 0!==r&&_.Util.isInstance(r,l.IndicatorDataProvider)&&(this.removeDataProvider(n),this.removePlotter(n),this.getArea(e).setChanged(!0))}},{key:"removeIndicator",value:function(t){var e=this.getArea(t);if(void 0!==e&&"main"!==e.getNameObject().getCompAt(2)){var n=this.getDataProvider(t+".secondary");if(void 0!==n&&_.Util.isInstance(n,l.IndicatorDataProvider)){var r=t+"Range",i=this.getArea(r);if(void 0!==i){var o=this.getArea(e.getDataSourceName()+".charts");if(void 0!==o){o.removeArea(e),this.removeArea(t),o.removeArea(i),this.removeArea(r);for(var a in this._dataProviders)this._dataProviders[a].getAreaName()===t&&this.removeDataProvider(a);for(var s in this._ranges)this._ranges[s].getAreaName()===t&&this.removeRange(s);for(var u in this._plotters)this._plotters[u].getAreaName()===t&&this.removePlotter(u);for(var c in this._plotters)this._plotters[c].getAreaName()===r&&this.removePlotter(c)}}}}}},{key:"getIndicatorParameters",value:function(t){var e=this._fakeIndicators[t];if(void 0===e){var n=this.createIndicatorAndRange("",t);if(null===n)return null;this._fakeIndicators[t]=e=n.indic}var r,i=[],o=e.getParameterCount();for(r=0;r<o;r++)i.push(e.getParameterAt(r));return i}},{key:"setIndicatorParameters",value:function(t,e){var n,r;for(n in this._dataProviders){var i=this._dataProviders[n];!1!==_.Util.isInstance(i,l.IndicatorDataProvider)&&((r=i.getIndicator()).getName()===t&&(r.setParameters(e),i.refresh(),this.getArea(i.getAreaName()).setChanged(!0)))}if(void 0===(r=this._fakeIndicators[t])){var o=this.createIndicatorAndRange("",t,!0);if(null===o)return;this._fakeIndicators[t]=r=o.indic}r.setParameters(e)}},{key:"getIndicatorAreaName",value:function(t,e){var n=this.getArea(t+".charts"),r=n.getAreaCount()>>1;return e<0||e>=r?"":n.getAreaAt(e<<1).getName()}}])&&v(e.prototype,n),g&&v(e,g);var e,n,g;return t}();e.ChartManager=m,m.DrawingTool={Cursor:0,CrossCursor:1,DrawLines:2,DrawFibRetrace:3,DrawFibFans:4,SegLine:5,StraightLine:6,ArrowLine:7,RayLine:8,HoriStraightLine:9,HoriRayLine:10,HoriSegLine:11,VertiStraightLine:12,PriceLine:13,BiParallelLine:14,BiParallelRayLine:15,TriParallelLine:16,BandLine:17},m.created=!1,m.instance=null},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i,o,a=n(28),s=n(1),u=n(6),c=n(29);e.setNodeFromJSON=function(t){i=t};e.setMaxNode=function(t){o=t};var l=function(t){r(e,t);function e(){return null!==t&&t.apply(this,arguments)||this}return e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?s.nameCompare(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return u.NamedNode.MIN},e.prototype.maxPost=function(){return new u.NamedNode(s.MAX_NAME,new c.LeafNode("[PRIORITY-POST]",o))},e.prototype.makePost=function(t,e){var n=i(t);return new u.NamedNode(e,new c.LeafNode("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(a.Index);e.PriorityIndex=l,e.PRIORITY_INDEX=new l},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(0),a=n(1),s=n(30),u=n(6),c=n(70),l=n(4),h=n(21),d=n(72),p=n(29),f=n(74),_=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&c.validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&o.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return i||(i=new t(new s.SortedMap(f.NAME_COMPARATOR),null,d.IndexMap.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||i},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?i:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(o.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new u.NamedNode(e,n),a=void 0,s=void 0;return n.isEmpty()?(a=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(a=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_)),new t(a,a.isEmpty()?i:this.priorityNode_,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;o.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(l.PRIORITY_INDEX,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+c.priorityHashText(this.getPriority().val())+":"),this.forEachChild(l.PRIORITY_INDEX,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":a.sha1(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new u.NamedNode(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new u.NamedNode(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new u.NamedNode(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,u.NamedNode.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,u.NamedNode.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===e.MAX_NODE?-1:0},t.prototype.withIndex=function(e){if(e===h.KEY_INDEX||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===h.KEY_INDEX||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(l.PRIORITY_INDEX),r=e.getIterator(l.PRIORITY_INDEX),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===h.KEY_INDEX?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}();e.ChildrenNode=_;var g=function(t){r(e,t);function e(){return t.call(this,new s.SortedMap(f.NAME_COMPARATOR),_.EMPTY_NODE,d.IndexMap.Default)||this}return e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return _.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(_);e.MaxNode=g,e.MAX_NODE=new g,Object.defineProperties(u.NamedNode,{MIN:{value:new u.NamedNode(a.MIN_NAME,_.EMPTY_NODE)},MAX:{value:new u.NamedNode(a.MAX_NAME,e.MAX_NODE)}}),h.KeyIndex.__EMPTY_NODE=_.EMPTY_NODE,p.LeafNode.__childrenNodeConstructor=_,c.setMaxNode(e.MAX_NODE),l.setMaxNode(e.MAX_NODE)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}();e.NamedNode=r},function(t,e,n){"use strict";e.a=function(t){return null!=t},e.c=function(t){return void 0!==t},e.b=function(t){return"function"==typeof t},e.i=r,e.g=function(t){return r(t)&&null!==t},e.f=function(t){return r(t)&&!Array.isArray(t)},e.j=function(t){return"string"==typeof t||t instanceof String},e.h=function(t){return"number"==typeof t||t instanceof Number},e.d=function(t){return i()&&t instanceof Blob},e.e=i;function r(t){return"object"==typeof t}function i(){return"undefined"!=typeof Blob}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NamedObject=void 0;var r=n(55);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._nameObj=new r.CName(e)}e=t,o=void 0,(n=[{key:"getFrameName",value:function(){return this._nameObj.getName(0)}},{key:"getDataSourceName",value:function(){return this._nameObj.getName(1)}},{key:"getAreaName",value:function(){return this._nameObj.getName(2)}},{key:"getName",value:function(){return this._nameObj.getName(-1)}},{key:"getNameObject",value:function(){return this._nameObj}},{key:"getRectCrossPt",value:function(t,e,n){var r={x:-1,y:-1},i={x:-1,y:-1},o=n.x-e.x,a=n.y-e.y;if(Math.abs(o)<2)return[r={x:e.x,y:t.top},i={x:n.x,y:t.bottom}];var s=a/o;return i.x=t.right,i.y=e.y+(t.right-e.x)*s,r.x=t.left,r.y=e.y+(t.left-e.x)*s,[r,i]}}])&&i(e.prototype,n),o&&i(e,o);var e,n,o;return t}();e.NamedObject=o},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),e.s=function(){return new r(i.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")},e.m=function(t){return new r(i.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")},e.n=function(t){return new r(i.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")},e.q=function(){return new r(i.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")},e.r=function(t){return new r(i.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")},e.o=function(){return new r(i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")},e.c=function(){return new r(i.CANCELED,"User canceled the upload/download.")},e.k=function(t){return new r(i.INVALID_URL,"Invalid URL '"+t+"'.")},e.h=function(t){return new r(i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")},e.d=function(){return new r(i.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")},e.p=function(){return new r(i.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")},e.l=function(){return new r(i.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")},e.f=function(t,e,n){return new r(i.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)},e.g=function(t,e,n,o){var a,s;t===e?(a=t,s=1===t?"argument":"arguments"):(a="between "+t+" and "+e,s="arguments");return new r(i.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+a+" "+s+", received "+o+".")},e.b=function(){return new r(i.APP_DELETED,"The Firebase app was deleted.")},e.j=function(t){return new r(i.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")},e.i=function(t,e){return new r(i.INVALID_FORMAT,"String does not match format '"+t+"': "+e)},e.e=function(t){throw new r(i.INTERNAL_ERROR,"Internal error: "+t)};n(34);var r=function(){function t(t,e){this.code_=o(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return o(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),i={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function o(t){return"storage/"+t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"firebase",function(){return i});var r=n(131),i=Object(r.a)();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainDataSource=e.DataSource=void 0;var r,i=n(8),o=n(101),a=(r=n(15),r&&r.__esModule?r:{default:r});function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){d(e,i.NamedObject);function e(t){return u(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return l(e,[{key:"getUpdateMode",value:function(){return this._updateMode}},{key:"setUpdateMode",value:function(t){this._updateMode=t}},{key:"getCacheSize",value:function(){return 0}},{key:"getDataCount",value:function(){return 0}},{key:"getDataAt",value:function(t){return this._dataItems[t]}}]),e}();e.DataSource=p,p.UpdateMode={DoNothing:0,Refresh:1,Update:2,Append:3};var f=function(t){d(e,p);function e(t){var n;return u(this,e),(n=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._erasedCount=0,n._dataItems=[],n._decimalDigits=0,n.toolManager=new o.CToolManager(t),n}return l(e,[{key:"getCacheSize",value:function(){return this._dataItems.length}},{key:"getDataCount",value:function(){return this._dataItems.length}},{key:"getUpdatedCount",value:function(){return this._updatedCount}},{key:"getAppendedCount",value:function(){return this._appendedCount}},{key:"getErasedCount",value:function(){return this._erasedCount}},{key:"getDecimalDigits",value:function(){return this._decimalDigits}},{key:"calcDecimalDigits",value:function(t){var e=""+t,n=e.indexOf(".");return n<0?0:e.length-1-n}},{key:"getLastDate",value:function(){var t=this.getDataCount();return t<1?-1:this.getDataAt(t-1).date}},{key:"getDataAt",value:function(t){return this._dataItems[t]}},{key:"update",value:function(t){this._updatedCount=0,this._appendedCount=0,this._erasedCount=0;var e=this._dataItems.length;if(e>0){var n,r,i=e-1,o=this._dataItems[i],s=t.length;for(r=0;r<s;r++)if((n=t[r])[0]===o.date){if(o.open===n[1]&&o.high===n[2]&&o.low===n[3]&&o.close===n[4]&&o.volume===n[5]?this.setUpdateMode(p.UpdateMode.DoNothing):(this.setUpdateMode(p.UpdateMode.Update),this._dataItems[i]={date:n[0],open:n[1],high:n[2],low:n[3],close:n[4],volume:n[5]},this._updatedCount++),++r<s)for(this.setUpdateMode(p.UpdateMode.Append);r<s;r++,this._appendedCount++)n=t[r],this._dataItems.push({date:n[0],open:n[1],high:n[2],low:n[3],close:n[4],volume:n[5]});return!0}if(s<a.default.instance.limit)return this.setUpdateMode(p.UpdateMode.DoNothing),!1}this.setUpdateMode(p.UpdateMode.Refresh),this._dataItems=[];var u,c,l,h,d=t.length;for(h=0;h<d;h++){for(l=t[h],c=1;c<=4;c++)u=this.calcDecimalDigits(l[c]),this._decimalDigits<u&&(this._decimalDigits=u);this._dataItems.push({date:l[0],open:l[1],high:l[2],low:l[3],close:l[4],volume:l[5]})}return!0}},{key:"select",value:function(t){this.toolManager.selecedObject=t}},{key:"unselect",value:function(){this.toolManager.selecedObject=-1}},{key:"addToolObject",value:function(t){this.toolManager.addToolObject(t)}},{key:"delToolObject",value:function(){this.toolManager.delCurrentObject()}},{key:"getToolObject",value:function(t){return this.toolManager.getToolObject(t)}},{key:"getToolObjectCount",value:function(){return this.toolManager.toolObjects.length}},{key:"getCurrentToolObject",value:function(){return this.toolManager.getCurrentObject()}},{key:"getSelectToolObjcet",value:function(){return this.toolManager.getSelectedObject()}},{key:"delSelectToolObject",value:function(){this.toolManager.delSelectedObject()}}]),e}();e.MainDataSource=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(0),o=n(1),a=n(0),s=n(0);e.INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,e.INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,e.MAX_LEAF_SIZE_=10485760,e.isValidKey=function(t){return"string"==typeof t&&0!==t.length&&!e.INVALID_KEY_REGEX_.test(t)},e.isValidPathString=function(t){return"string"==typeof t&&0!==t.length&&!e.INVALID_PATH_REGEX_.test(t)},e.isValidRootPathString=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),e.isValidPathString(t)},e.isValidPriority=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!o.isInvalidJSONNumber(t)||t&&"object"==typeof t&&i.contains(t,".sv")},e.validateFirebaseDataArg=function(t,n,r,i,o){o&&void 0===r||e.validateFirebaseData(a.errorPrefix(t,n,o),r,i)},e.validateFirebaseData=function(t,n,a){var u=a instanceof r.Path?new r.ValidationPath(a,t):a;if(void 0===n)throw new Error(t+"contains undefined "+u.toErrorString());if("function"==typeof n)throw new Error(t+"contains a function "+u.toErrorString()+" with contents = "+n.toString());if(o.isInvalidJSONNumber(n))throw new Error(t+"contains "+n.toString()+" "+u.toErrorString());if("string"==typeof n&&n.length>e.MAX_LEAF_SIZE_/3&&s.stringLength(n)>e.MAX_LEAF_SIZE_)throw new Error(t+"contains a string greater than "+e.MAX_LEAF_SIZE_+" utf8 bytes "+u.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var c=!1,l=!1;if(i.forEach(n,function(n,r){if(".value"===n)c=!0;else if(".priority"!==n&&".sv"!==n&&(l=!0,!e.isValidKey(n)))throw new Error(t+" contains an invalid key ("+n+") "+u.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');u.push(n),e.validateFirebaseData(t,r,u),u.pop()}),c&&l)throw new Error(t+' contains ".value" child '+u.toErrorString()+" in addition to actual children.")}},e.validateFirebaseMergePaths=function(t,n){var i,o;for(i=0;i<n.length;i++)for(var a=(o=n[i]).slice(),s=0;s<a.length;s++)if(".priority"===a[s]&&s===a.length-1);else if(!e.isValidKey(a[s]))throw new Error(t+"contains an invalid key ("+a[s]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');n.sort(r.Path.comparePaths);var u=null;for(i=0;i<n.length;i++){if(o=n[i],null!==u&&u.contains(o))throw new Error(t+"contains a path "+u.toString()+" that is ancestor of another path "+o.toString());u=o}},e.validateFirebaseMergeDataArg=function(t,n,o,s,u){if(!u||void 0!==o){var c=a.errorPrefix(t,n,u);if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(c+" must be an object containing the children to replace.");var l=[];i.forEach(o,function(t,n){var i=new r.Path(t);if(e.validateFirebaseData(c,n,s.child(i)),".priority"===i.getBack()&&!e.isValidPriority(n))throw new Error(c+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(i)}),e.validateFirebaseMergePaths(c,l)}},e.validatePriority=function(t,n,r,i){if(!i||void 0!==r){if(o.isInvalidJSONNumber(r))throw new Error(a.errorPrefix(t,n,i)+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!e.isValidPriority(r))throw new Error(a.errorPrefix(t,n,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},e.validateEventType=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(a.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.validateKey=function(t,n,r,i){if(!(i&&void 0===r||e.isValidKey(r)))throw new Error(a.errorPrefix(t,n,i)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},e.validatePathString=function(t,n,r,i){if(!(i&&void 0===r||e.isValidPathString(r)))throw new Error(a.errorPrefix(t,n,i)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},e.validateRootPathString=function(t,n,r,i){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),e.validatePathString(t,n,r,i)},e.validateWritablePath=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},e.validateUrl=function(t,n,r){var i=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!e.isValidKey(r.repoInfo.namespace)||0!==i.length&&!e.isValidRootPathString(i))throw new Error(a.errorPrefix(t,n,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},e.validateCredential=function(t,e,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw new Error(a.errorPrefix(t,e,r)+"must be a valid credential (a string).")},e.validateBoolean=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(a.errorPrefix(t,e,r)+"must be a boolean.")},e.validateString=function(t,e,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw new Error(a.errorPrefix(t,e,r)+"must be a valid string.")},e.validateObject=function(t,e,n,r){if(!(r&&void 0===n||n&&"object"==typeof n&&null!==n))throw new Error(a.errorPrefix(t,e,r)+"must be a valid object.")},e.validateObjectContainsKey=function(t,e,n,r,o,s){if(!(n&&"object"==typeof n&&i.contains(n,r))){if(o)return;throw new Error(a.errorPrefix(t,e,o)+'must contain the key "'+r+'"')}if(s){var u=i.safeGet(n,r);if("number"===s&&"number"!=typeof u||"string"===s&&"string"!=typeof u||"boolean"===s&&"boolean"!=typeof u||"function"===s&&"function"!=typeof u||"object"===s&&"object"!=typeof u&&u)throw o?new Error(a.errorPrefix(t,e,o)+'contains invalid value for key "'+r+'" (must be of type "'+s+'")'):new Error(a.errorPrefix(t,e,o)+'must contain the key "'+r+'" with type "'+s+'"')}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);(i=e.OperationType||(e.OperationType={}))[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var i,o=function(){function t(t,e,n,i){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=i,r.assert(!i||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}();e.OperationSource=o},function(t,e,n){"use strict";e.a=function(t){return new Promise(t)},e.c=function(t){return Promise.resolve(t)},e.b=function(t){return Promise.reject(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(36),i=n(54),o=n(3),a=n(18),s=n(25);n(105);var u=h(n(120)),c=h(n(121)),l=h(n(59));function h(t){return t&&t.__esModule?t:{default:t}}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element="#kline_container",this.chartMgr=null,this.G_HTTP_REQUEST=null,this.timer=null,this.buttonDown=!1,this.init=!1,this.requestParam="",this.data={},this.width=1200,this.height=650,this.symbol="",this.symbolName="",this.range=null,this.url="",this.limit=1e3,this.type="poll",this.subscribePath="",this.sendPath="",this.stompClient=null,this.intervalTime=5e3,this.debug=!0,this.language="zh-cn",this.theme="dark",this.ranges=["1w","1d","1h","30m","15m","5m","1m","line"],this.showTrade=!0,this.tradeWidth=250,this.socketConnected=!1,this.enableSockjs=!0,this.reverseColor=!1,this.isSized=!1,this.paused=!1,this.subscribed=null,this.disableFirebase=!1,this.periodMap={"01w":6048e5,"03d":2592e5,"01d":864e5,"12h":432e5,"06h":216e5,"04h":144e5,"02h":72e5,"01h":36e5,"30m":18e5,"15m":9e5,"05m":3e5,"03m":18e4,"01m":6e4,line:6e4},this.tagMapPeriod={"1w":"01w","3d":"03d","1d":"01d","12h":"12h","6h":"06h","4h":"04h","2h":"02h","1h":"01h","30m":"30m","15m":"15m","5m":"05m","3m":"03m","1m":"01m",line:"line"},Object.assign(this,e),t.created||(t.instance=this,t.created=!0),t.instance}e=t,h=void 0,(n=[{key:"draw",value:function(){t.trade=new i.KlineTrade,t.chartMgr=new o.ChartManager;var e=l.default.parseHTML(u.default);for(var n in this.ranges){(0,l.default)(e).find('[name="'+this.ranges[n]+'"]').each(function(t,e){(0,l.default)(e).attr("style","display:inline-block")})}(0,l.default)(this.element).html(e),setInterval(r.Control.refreshFunction,this.intervalTime),"stomp"===this.type&&r.Control.socketConnect(),this.disableFirebase||(0,c.default)(),this.registerMouseEvent(),o.ChartManager.instance.bindCanvas("main",document.getElementById("chart_mainCanvas")),o.ChartManager.instance.bindCanvas("overlay",document.getElementById("chart_overlayCanvas")),r.Control.refreshTemplate(),r.Control.onSize(this.width,this.height),r.Control.readCookie(),this.setTheme(this.theme),this.setLanguage(this.language),(0,l.default)(this.element).css({visibility:"visible"})}},{key:"resize",value:function(t,e){this.width=t,this.height=e,r.Control.onSize(this.width,this.height)}},{key:"setSymbol",value:function(t,e){this.symbol=t,this.symbolName=e,r.Control.switchSymbol(t),this.onSymbolChange(t,e)}},{key:"setTheme",value:function(t){this.theme=t,r.Control.switchTheme(t)}},{key:"setLanguage",value:function(t){this.language=t,r.Control.chartSwitchLanguage(t)}},{key:"setShowTrade",value:function(t){this.showTrade=t,t?(0,l.default)(".trade_container").show():(0,l.default)(".trade_container").hide(),r.Control.onSize(this.width,this.height)}},{key:"toggleTrade",value:function(){this.showTrade?(this.showTrade=!1,(0,l.default)(".trade_container").hide()):(this.showTrade=!0,(0,l.default)(".trade_container").show()),r.Control.onSize(this.width,this.height)}},{key:"setIntervalTime",value:function(t){this.intervalTime=t,this.debug&&console.log("DEBUG: interval time changed to "+t)}},{key:"pause",value:function(){this.debug&&console.log("DEBUG: kline paused"),this.paused=!0}},{key:"resend",value:function(){this.debug&&console.log("DEBUG: kline continue"),this.paused=!1,r.Control.requestData(!0)}},{key:"connect",value:function(){"stomp"===this.type?r.Control.socketConnect():this.debug&&console.log("DEBUG: this is for stomp type")}},{key:"disconnect",value:function(){"stomp"===this.type?(this.stompClient&&(this.stompClient.disconnect(),this.socketConnected=!1),this.debug&&console.log("DEBUG: socket disconnected")):this.debug&&console.log("DEBUG: this is for stomp type")}},{key:"onResize",value:function(t,e){this.debug&&console.log("DEBUG: chart resized to width: "+t+" height: "+e)}},{key:"onLangChange",value:function(t){this.debug&&console.log("DEBUG: language changed to "+t)}},{key:"onSymbolChange",value:function(t,e){this.debug&&console.log("DEBUG: symbol changed to "+t+" "+e)}},{key:"onThemeChange",value:function(t){this.debug&&console.log("DEBUG: themes changed to : "+t)}},{key:"onRangeChange",value:function(t){this.debug&&console.log("DEBUG: range changed to "+t)}},{key:"registerMouseEvent",value:function(){(0,l.default)(document).ready(function(){(0,l.default)("#chart_overlayCanvas").bind("contextmenu",function(t){return t.cancelBubble=!0,t.returnValue=!1,t.preventDefault(),t.stopPropagation(),!1}),(0,l.default)(".chart_container .chart_dropdown .chart_dropdown_t").mouseover(function(){var t=(0,l.default)(".chart_container"),e=(0,l.default)(this),n=e.next(),r=t.offset().left,i=e.offset().left,o=t.width(),a=e.width(),s=(n.width()-a)/2<<0;i-s<r+4?s=i-r-4:s+=i+a+s>r+o-4?i+a+s-(r+o-4)+19:4,n.css({"margin-left":-s}),e.addClass("chart_dropdown-hover"),n.addClass("chart_dropdown-hover")}).mouseout(function(){(0,l.default)(this).next().removeClass("chart_dropdown-hover"),(0,l.default)(this).removeClass("chart_dropdown-hover")}),(0,l.default)(".chart_dropdown_data").mouseover(function(){(0,l.default)(this).addClass("chart_dropdown-hover"),(0,l.default)(this).prev().addClass("chart_dropdown-hover")}).mouseout(function(){(0,l.default)(this).prev().removeClass("chart_dropdown-hover"),(0,l.default)(this).removeClass("chart_dropdown-hover")}),(0,l.default)("#chart_btn_parameter_settings").click(function(){(0,l.default)("#chart_parameter_settings").addClass("clicked"),(0,l.default)(".chart_dropdown_data").removeClass("chart_dropdown-hover"),(0,l.default)("#chart_parameter_settings").find("th").each(function(){var t=(0,l.default)(this).html(),e=0,n=a.ChartSettings.get().indics[t];(0,l.default)(this.nextElementSibling).find("input").each(function(){null!==n&&e<n.length&&(0,l.default)(this).val(n[e]),e++})})}),(0,l.default)("#close_settings").click(function(){(0,l.default)("#chart_parameter_settings").removeClass("clicked")}),(0,l.default)(".chart_container .chart_toolbar_tabgroup a").click(function(){r.Control.switchPeriod((0,l.default)(this).parent().attr("name"))}),(0,l.default)("#chart_toolbar_periods_vert ul a").click(function(){r.Control.switchPeriod((0,l.default)(this).parent().attr("name"))}),(0,l.default)(".market_chooser ul a").click(function(){r.Control.switchSymbol((0,l.default)(this).attr("name"))}),(0,l.default)("#chart_show_tools").click(function(){(0,l.default)(this).hasClass("selected")?r.Control.switchTools("off"):r.Control.switchTools("on")}),(0,l.default)("#chart_toolpanel .chart_toolpanel_button").click(function(){(0,l.default)(".chart_dropdown_data").removeClass("chart_dropdown-hover"),(0,l.default)("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),(0,l.default)(this).addClass("selected");var e=(0,l.default)(this).children().attr("name");t.instance.chartMgr.setRunningMode(o.ChartManager.DrawingTool[e])}),(0,l.default)("#chart_show_indicator").click(function(){(0,l.default)(this).hasClass("selected")?r.Control.switchIndic("off"):r.Control.switchIndic("on")}),(0,l.default)("#chart_tabbar li a").click(function(){(0,l.default)("#chart_tabbar li a").removeClass("selected"),(0,l.default)(this).addClass("selected");var t=(0,l.default)(this).attr("name");a.ChartSettings.get().charts.indics[1]=t,a.ChartSettings.save(),!1===s.Template.displayVolume?o.ChartManager.instance.getChart().setIndicator(1,t):o.ChartManager.instance.getChart().setIndicator(2,t)}),(0,l.default)("#chart_select_chart_style a").click(function(){(0,l.default)("#chart_select_chart_style a").removeClass("selected"),(0,l.default)(this).addClass("selected");a.ChartSettings.get().charts.chartStyle=(0,l.default)(this)[0].innerHTML,a.ChartSettings.save();var t=o.ChartManager.instance;t.setChartStyle("frame0.k0",(0,l.default)(this).html()),t.redraw()}),(0,l.default)("#chart_dropdown_themes li").click(function(){(0,l.default)("#chart_dropdown_themes li a").removeClass("selected");var t=(0,l.default)(this).attr("name");"chart_themes_dark"===t?r.Control.switchTheme("dark"):"chart_themes_light"===t&&r.Control.switchTheme("light")}),(0,l.default)("#chart_select_main_indicator a").click(function(){(0,l.default)("#chart_select_main_indicator a").removeClass("selected"),(0,l.default)(this).addClass("selected");var t=(0,l.default)(this).attr("name");a.ChartSettings.get().charts.mIndic=t,a.ChartSettings.save();var e=o.ChartManager.instance;e.setMainIndicator("frame0.k0",t)||e.removeMainIndicator("frame0.k0"),e.redraw()}),(0,l.default)("#chart_toolbar_theme a").click(function(){(0,l.default)("#chart_toolbar_theme a").removeClass("selected"),"dark"===(0,l.default)(this).attr("name")?r.Control.switchTheme("dark"):"light"===(0,l.default)(this).attr("name")&&r.Control.switchTheme("light")}),(0,l.default)("#chart_select_theme li a").click(function(){(0,l.default)("#chart_select_theme a").removeClass("selected"),"dark"===(0,l.default)(this).attr("name")?r.Control.switchTheme("dark"):"light"===(0,l.default)(this).attr("name")&&r.Control.switchTheme("light")}),(0,l.default)("#chart_enable_tools li a").click(function(){(0,l.default)("#chart_enable_tools a").removeClass("selected"),"on"===(0,l.default)(this).attr("name")?r.Control.switchTools("on"):"off"===(0,l.default)(this).attr("name")&&r.Control.switchTools("off")}),(0,l.default)("#chart_enable_indicator li a").click(function(){(0,l.default)("#chart_enable_indicator a").removeClass("selected"),"on"===(0,l.default)(this).attr("name")?r.Control.switchIndic("on"):"off"===(0,l.default)(this).attr("name")&&r.Control.switchIndic("off")}),(0,l.default)("#chart_language_setting_div li a").click(function(){(0,l.default)("#chart_language_setting_div a").removeClass("selected"),"zh-cn"===(0,l.default)(this).attr("name")?r.Control.chartSwitchLanguage("zh-cn"):"en-us"===(0,l.default)(this).attr("name")?r.Control.chartSwitchLanguage("en-us"):"zh-tw"===(0,l.default)(this).attr("name")&&r.Control.chartSwitchLanguage("zh-tw")}),(0,l.default)(document).keyup(function(t){46===t.keyCode&&(o.ChartManager.instance.deleteToolObject(),o.ChartManager.instance.redraw("OverlayCanvas",!1))}),(0,l.default)("#clearCanvas").click(function(){for(var t=o.ChartManager.instance.getDataSource("frame0.k0"),e=t.getToolObjectCount(),n=0;n<e;n++)t.delToolObject();o.ChartManager.instance.redraw("OverlayCanvas",!1)}),(0,l.default)("#chart_overlayCanvas").mousemove(function(e){var n=e.target.getBoundingClientRect(),r=e.clientX-n.left,i=e.clientY-n.top,a=o.ChartManager.instance;!0===t.instance.buttonDown?(a.onMouseMove("frame0",r,i,!0),a.redraw("All",!1)):(a.onMouseMove("frame0",r,i,!1),a.redraw("OverlayCanvas"))}).mouseleave(function(t){var e=t.target.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,i=o.ChartManager.instance;i.onMouseLeave("frame0",n,r,!1),i.redraw("OverlayCanvas")}).mouseup(function(e){if(1===e.which){t.instance.buttonDown=!1;var n=e.target.getBoundingClientRect(),r=e.clientX-n.left,i=e.clientY-n.top,a=o.ChartManager.instance;a.onMouseUp("frame0",r,i),a.redraw("All")}}).mousedown(function(e){if(1!==e.which)return o.ChartManager.instance.deleteToolObject(),void o.ChartManager.instance.redraw("OverlayCanvas",!1);t.instance.buttonDown=!0;var n=e.target.getBoundingClientRect(),r=e.clientX-n.left,i=e.clientY-n.top;o.ChartManager.instance.onMouseDown("frame0",r,i)}),(0,l.default)("#chart_parameter_settings :input").change(function(){var t=(0,l.default)(this).attr("name"),e=0,n=[],r=o.ChartManager.instance;if((0,l.default)("#chart_parameter_settings :input").each(function(){if((0,l.default)(this).attr("name")===t){if(""!==(0,l.default)(this).val()&&null!==(0,l.default)(this).val()&&void 0!==(0,l.default)(this).val()){var r=parseInt((0,l.default)(this).val());n.push(r)}e++}}),0!==n.length){r.setIndicatorParameters(t,n);var i=r.getIndicatorParameters(t),s=[];e=0,(0,l.default)("#chart_parameter_settings :input").each(function(){(0,l.default)(this).attr("name")===t&&(""!==(0,l.default)(this).val()&&null!==(0,l.default)(this).val()&&void 0!==(0,l.default)(this).val()&&((0,l.default)(this).val(i[e].getValue()),s.push(i[e].getValue())),e++)});a.ChartSettings.get().indics[t]=s,a.ChartSettings.save(),r.redraw("All",!1)}}),(0,l.default)("#chart_parameter_settings button").click(function(){var t=(0,l.default)(this).parents("tr").children("th").html(),e=0,n=o.ChartManager.instance.getIndicatorParameters(t),r=[];(0,l.default)(this).parent().prev().children("input").each(function(){null!==n&&e<n.length&&((0,l.default)(this).val(n[e].getDefaultValue()),r.push(n[e].getDefaultValue())),e++}),o.ChartManager.instance.setIndicatorParameters(t,r);a.ChartSettings.get().indics[t]=r,a.ChartSettings.save(),o.ChartManager.instance.redraw("All",!1)}),(0,l.default)("body").on("click","#sizeIcon",function(){t.instance.isSized=!t.instance.isSized,t.instance.isSized?((0,l.default)(t.instance.element).css({position:"fixed",left:"0",right:"0",top:"0",bottom:"0",width:"100%",height:"100%",zIndex:"10000"}),r.Control.onSize(),(0,l.default)("html,body").css({width:"100%",height:"100%",overflow:"hidden"})):((0,l.default)(t.instance.element).attr("style",""),(0,l.default)("html,body").attr("style",""),r.Control.onSize(t.instance.width,t.instance.height),(0,l.default)(t.instance.element).css({visibility:"visible",height:t.instance.height+"px"}))})})}}])&&d(e.prototype,n),h&&d(e,h);var e,n,h;return t}();e.default=p,p.created=!1,p.instance=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}();e.Change=r},function(t,e,n){"use strict";e.b=r,e.a=function(t){if(null==t)return{};var e={};return r(t,function(t,n){e[t]=n}),e};function r(t,e){for(var n in t)r=t,i=n,Object.prototype.hasOwnProperty.call(r,i)&&e(n,t[n]);var r,i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartSettings=void 0;var r=n(3);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}e=t,o=[{key:"checkVersion",value:function(){if(t._data.ver<2){t._data.ver=2;var e=t._data.charts;e.period_weight={},e.period_weight.line=8,e.period_weight["1min"]=7,e.period_weight["5min"]=6,e.period_weight["15min"]=5,e.period_weight["30min"]=4,e.period_weight["1hour"]=3,e.period_weight["1day"]=2,e.period_weight["1week"]=1,e.period_weight["3min"]=0,e.period_weight["2hour"]=0,e.period_weight["4hour"]=0,e.period_weight["6hour"]=0,e.period_weight["12hour"]=0,e.period_weight["3day"]=0}if(t._data.ver<3){t._data.ver=3;t._data.charts.areaHeight=[]}}},{key:"get",value:function(){return void 0===t._data&&(t.init(),t.load(),t.checkVersion()),t._data}},{key:"init",value:function(){for(var e={},n=["MA","EMA","VOLUME","MACD","KDJ","StochRSI","RSI","DMI","OBV","BOLL","DMA","TRIX","BRAR","VR","EMV","WR","ROC","MTM","PSY"],i=0;i<n.length;i++){var o=r.ChartManager.instance.createIndicatorAndRange("",n[i],!0);if(null!==o){e[n[i]]=[];for(var a=o.indic.getParameters(),s=0;s<a.length;s++)e[n[i]].push(a[s])}}var u={};u.chartStyle="CandleStick",u.mIndic="MA",u.indics=["VOLUME","MACD"],u.indicsStatus="open",u.period="15m",t._data={ver:1,charts:u,indics:e,theme:"Dark"},t.checkVersion()}},{key:"load",value:function(){if(!(document.cookie.length<=0)){var e=document.cookie.indexOf("chartSettings=");if(!(e<0)){e+="chartSettings=".length;var n=document.cookie.indexOf(";",e);n<0&&(n=document.cookie.length);var r=unescape(document.cookie.substring(e,n));t._data=JSON.parse(r)}}}},{key:"save",value:function(){var e=new Date;e.setDate(e.getDate()+2),document.cookie="chartSettings="+escape(JSON.stringify(t._data))+";expires="+e.toGMTString()}}],(n=null)&&i(e.prototype,n),o&&i(e,o);var e,n,o;return t}();e.ChartSettings=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}e=t,i=[{key:"fromFloat",value:function(t,e){for(var n=t.toFixed(e),r=n.length-1;r>=0;r--){if("."===n[r])return n.substring(0,r);if("0"!==n[r])return n.substring(0,r+1)}}},{key:"formatTime",value:function(t){return t<10?"0"+t.toString():t.toString()}},{key:"isInstance",value:function(t,e){return null!==t&&void 0!==t&&t instanceof e}}],(n=null)&&r(e.prototype,n),i&&r(e,i);var e,n,i;return t}();e.Util=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LightTheme=e.DarkTheme=e.Theme=void 0;var r,i=(r=n(15),r&&r.__esModule?r:{default:r});function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(){u(this,t),this.getFont=function(t){return this._fonts[t]}}e=t,r=void 0,(n=[{key:"getColor",value:function(t){return this._colors[t]}}])&&c(e.prototype,n),r&&c(e,r);var e,n,r;return t}();e.Theme=l,l.theme_color_id=0,l.theme_font_id=0,l.Color={Positive:l.theme_color_id++,Negative:l.theme_color_id++,PositiveDark:l.theme_color_id++,NegativeDark:l.theme_color_id++,Unchanged:l.theme_color_id++,Background:l.theme_color_id++,Cursor:l.theme_color_id++,RangeMark:l.theme_color_id++,Indicator0:l.theme_color_id++,Indicator1:l.theme_color_id++,Indicator2:l.theme_color_id++,Indicator3:l.theme_color_id++,Indicator4:l.theme_color_id++,Indicator5:l.theme_color_id++,Grid0:l.theme_color_id++,Grid1:l.theme_color_id++,Grid2:l.theme_color_id++,Grid3:l.theme_color_id++,Grid4:l.theme_color_id++,TextPositive:l.theme_color_id++,TextNegative:l.theme_color_id++,Text0:l.theme_color_id++,Text1:l.theme_color_id++,Text2:l.theme_color_id++,Text3:l.theme_color_id++,Text4:l.theme_color_id++,LineColorNormal:l.theme_color_id++,LineColorSelected:l.theme_color_id++,CircleColorFill:l.theme_color_id++,CircleColorStroke:l.theme_color_id++},l.Font={Default:l.theme_font_id++};var h=function(t){s(e,l);function e(){var t;return u(this,e),(t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)))._colors=[],i.default.instance.reverseColor?(t._colors[l.Color.Positive]="#990e0e",t._colors[l.Color.Negative]="#19b34c",t._colors[l.Color.PositiveDark]="#3b0e08",t._colors[l.Color.NegativeDark]="#004718"):(t._colors[l.Color.Positive]="#19b34c",t._colors[l.Color.Negative]="#990e0e",t._colors[l.Color.PositiveDark]="#004718",t._colors[l.Color.NegativeDark]="#3b0e08"),t._colors[l.Color.Unchanged]="#fff",t._colors[l.Color.Background]="#0a0a0a",t._colors[l.Color.Cursor]="#aaa",t._colors[l.Color.RangeMark]="#f9ee30",t._colors[l.Color.Indicator0]="#ddd",t._colors[l.Color.Indicator1]="#f9ee30",t._colors[l.Color.Indicator2]="#f600ff",t._colors[l.Color.Indicator3]="#6bf",t._colors[l.Color.Indicator4]="#a5cf81",t._colors[l.Color.Indicator5]="#e18b89",t._colors[l.Color.Grid0]="#333",t._colors[l.Color.Grid1]="#444",t._colors[l.Color.Grid2]="#666",t._colors[l.Color.Grid3]="#888",t._colors[l.Color.Grid4]="#aaa",t._colors[l.Color.TextPositive]="#1bd357",t._colors[l.Color.TextNegative]="#ff6f5e",t._colors[l.Color.Text0]="#444",t._colors[l.Color.Text1]="#666",t._colors[l.Color.Text2]="#888",t._colors[l.Color.Text3]="#aaa",t._colors[l.Color.Text4]="#ccc",t._colors[l.Color.LineColorNormal]="#a6a6a6",t._colors[l.Color.LineColorSelected]="#ffffff",t._colors[l.Color.CircleColorFill]="#000000",t._colors[l.Color.CircleColorStroke]="#ffffff",t._fonts=[],t._fonts[l.Font.Default]="12px Tahoma",t}return e}();e.DarkTheme=h;var d=function(t){s(e,l);function e(){var t;return u(this,e),(t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)))._colors=[],i.default.instance.reverseColor?(t._colors[l.Color.Positive]="#db5542",t._colors[l.Color.Negative]="#53b37b",t._colors[l.Color.PositiveDark]="#ffadaa",t._colors[l.Color.NegativeDark]="#66d293"):(t._colors[l.Color.Positive]="#53b37b",t._colors[l.Color.Negative]="#db5542",t._colors[l.Color.PositiveDark]="#66d293",t._colors[l.Color.NegativeDark]="#ffadaa"),t._colors[l.Color.Unchanged]="#fff",t._colors[l.Color.Background]="#fff",t._colors[l.Color.Cursor]="#aaa",t._colors[l.Color.RangeMark]="#f27935",t._colors[l.Color.Indicator0]="#2fd2b2",t._colors[l.Color.Indicator1]="#ffb400",t._colors[l.Color.Indicator2]="#e849b9",t._colors[l.Color.Indicator3]="#1478c8",t._colors[l.Color.Grid0]="#eee",t._colors[l.Color.Grid1]="#afb1b3",t._colors[l.Color.Grid2]="#ccc",t._colors[l.Color.Grid3]="#bbb",t._colors[l.Color.Grid4]="#aaa",t._colors[l.Color.TextPositive]="#53b37b",t._colors[l.Color.TextNegative]="#db5542",t._colors[l.Color.Text0]="#ccc",t._colors[l.Color.Text1]="#aaa",t._colors[l.Color.Text2]="#888",t._colors[l.Color.Text3]="#666",t._colors[l.Color.Text4]="#444",t._colors[l.Color.LineColorNormal]="#8c8c8c",t._colors[l.Color.LineColorSelected]="#393c40",t._colors[l.Color.CircleColorFill]="#ffffff",t._colors[l.Color.CircleColorStroke]="#393c40",t._fonts=[],t._fonts[l.Font.Default]="12px Tahoma",t}return e}();e.LightTheme=d},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(28),a=n(6),s=n(1),u=n(0),c=function(t){r(e,t);function e(){return null!==t&&t.apply(this,arguments)||this}return Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return i},set:function(t){i=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return s.nameCompare(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw u.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return a.NamedNode.MIN},e.prototype.maxPost=function(){return new a.NamedNode(s.MAX_NAME,i)},e.prototype.makePost=function(t,e){return u.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new a.NamedNode(t,i)},e.prototype.toString=function(){return".key"},e}(o.Index);e.KeyIndex=c,e.KEY_INDEX=new c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(29),o=n(6),a=n(0),s=n(0),u=n(73),c=n(74),l=n(72),h=n(4),d=!0;function p(t,e){if(void 0===e&&(e=null),null===t)return r.ChildrenNode.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),s.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t){var n=t;return new i.LeafNode(n,p(e))}if(t instanceof Array||!d){var f=r.ChildrenNode.EMPTY_NODE,_=t;return a.forEach(_,function(t,e){if(a.contains(_,t)&&"."!==t.substring(0,1)){var n=p(e);!n.isLeafNode()&&n.isEmpty()||(f=f.updateImmediateChild(t,n))}}),f.updatePriority(p(e))}var g=[],v=!1,m=t;if(a.forEach(m,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=p(m[t]);n.isEmpty()||(v=v||!n.getPriority().isEmpty(),g.push(new o.NamedNode(t,n)))}}),0==g.length)return r.ChildrenNode.EMPTY_NODE;var y=u.buildChildSet(g,c.NAME_ONLY_COMPARATOR,function(t){return t.name},c.NAME_COMPARATOR);if(v){var b=u.buildChildSet(g,h.PRIORITY_INDEX.getCompare());return new r.ChildrenNode(y,p(e),new l.IndexMap({".priority":b},{".priority":h.PRIORITY_INDEX}))}return new r.ChildrenNode(y,p(e),l.IndexMap.Default)}e.nodeFromJSON=p,h.setNodeFromJSON(p)},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),e.c=function(t){switch(t){case i.RAW:case i.BASE64:case i.BASE64URL:case i.DATA_URL:return;default:throw"Expected one of the event types: ["+i.RAW+", "+i.BASE64+", "+i.BASE64URL+", "+i.DATA_URL+"]."}},e.b=function(t,e){switch(t){case i.RAW:return new o(a(e));case i.BASE64:case i.BASE64URL:return new o(s(t,e));case i.DATA_URL:return new o(function(t){var e=new u(t);return e.base64?s(i.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw r.i(i.DATA_URL,"Malformed data URL.")}return a(e)}(e.rest)}(e),new u(e).contentType)}throw r.s()};var r=n(9),i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};var o=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function a(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r)){if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189)}else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function s(t,e){switch(t){case i.BASE64:var n=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(n||o){var a=n?"-":"_";throw r.i(t,"Invalid character '"+a+"' found: is it base64url encoded?")}break;case i.BASE64URL:var s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u){a=s?"+":"/";throw r.i(t,"Invalid character '"+a+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/")}var c;try{c=atob(e)}catch(e){throw r.i(t,"Invalid character found")}for(var l=new Uint8Array(c.length),h=0;h<c.length;h++)l[h]=c.charCodeAt(h);return l}var u=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw r.i(i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(o=n,a=";base64",o.length>=a.length&&o.substring(o.length-a.length)===a),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var o,a}}()},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return o}),e.d=function(t){switch(t){case i.RUNNING:case i.PAUSING:case i.CANCELING:return o.RUNNING;case i.PAUSED:return o.PAUSED;case i.SUCCESS:return o.SUCCESS;case i.CANCELED:return o.CANCELED;case i.ERROR:default:return o.ERROR}};var r={STATE_CHANGED:"state_changed"},i={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},o={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TemplateMeasuringHandler=e.DefaultTemplate=e.Template=void 0;var r=n(3),i=n(18),o=f(n(11)),a=f(n(40)),s=f(n(41)),u=f(n(39)),c=n(102),l=n(55),h=f(n(103)),d=f(n(20)),p=f(n(58));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}var y=function(){function t(){g(this,t)}return m(t,null,[{key:"createCandlestickDataSource",value:function(t){return new o.MainDataSource(t)}},{key:"createDataSource",value:function(t,e,n){var i=r.ChartManager.instance;null===i.getCachedDataSource(e)&&i.setCachedDataSource(e,n(e)),i.setCurrentDataSource(t,e),i.updateData(t,null)}},{key:"createTableComps",value:function(t){this.createMainChartComps(t),this.displayVolume&&this.createIndicatorChartComps(t,"VOLUME"),this.createTimelineComps(t)}},{key:"createMainChartComps",value:function(t){var e=r.ChartManager.instance,n=e.getArea(t+".charts"),i=t+".main",o=i+"Range",c=new s.MainArea(i);e.setArea(i,c),n.addArea(c);var l=new s.MainRangeArea(o);e.setArea(o,l),n.addArea(l);var h=new a.MainDataProvider(i+".main");e.setDataProvider(h.getName(),h),e.setMainIndicator(t,"MA");var d=new p.MainRange(i);e.setRange(d.getName(),d),d.setPaddingTop(28),d.setPaddingBottom(12);var f=new u.MainAreaBackgroundPlotter(i+".background");e.setPlotter(f.getName(),f),f=new u.CGridPlotter(i+".grid"),e.setPlotter(f.getName(),f),f=new u.CandlestickPlotter(i+".main"),e.setPlotter(f.getName(),f),f=new u.MinMaxPlotter(i+".decoration"),e.setPlotter(f.getName(),f),f=new u.MainInfoPlotter(i+".info"),e.setPlotter(f.getName(),f),f=new u.SelectionPlotter(i+".selection"),e.setPlotter(f.getName(),f),f=new u.CDynamicLinePlotter(i+".tool"),e.setPlotter(f.getName(),f),f=new u.RangeAreaBackgroundPlotter(i+"Range.background"),e.setPlotter(f.getName(),f),f=new u.COrderGraphPlotter(i+"Range.grid"),e.setPlotter(f.getName(),f),f=new u.RangePlotter(i+"Range.main"),e.setPlotter(f.getName(),f),f=new u.RangeSelectionPlotter(i+"Range.selection"),e.setPlotter(f.getName(),f),f=new u.LastClosePlotter(i+"Range.decoration"),e.setPlotter(f.getName(),f)}},{key:"createIndicatorChartComps",value:function(t,e){var n=r.ChartManager.instance,o=n.getArea(t+".charts"),c=t+".indic"+o.getNextRowId(),l=c+"Range",h=new s.IndicatorArea(c);n.setArea(c,h),o.addArea(h);var d=o.getAreaCount()>>1,p=i.ChartSettings.get().charts.areaHeight;if(p.length>d){var f,_;for(_=0;_<d;_++)(f=o.getAreaAt(_<<1)).setTop(0),f.setBottom(p[_]);h.setTop(0),h.setBottom(p[d])}var g=new s.IndicatorRangeArea(l);n.setArea(l,g),o.addArea(g);var v=new a.IndicatorDataProvider(c+".secondary");if(n.setDataProvider(v.getName(),v),!1!==n.setIndicator(c,e)){var m=new u.MainAreaBackgroundPlotter(c+".background");n.setPlotter(m.getName(),m),m=new u.CGridPlotter(c+".grid"),n.setPlotter(m.getName(),m),m=new u.IndicatorPlotter(c+".secondary"),n.setPlotter(m.getName(),m),m=new u.IndicatorInfoPlotter(c+".info"),n.setPlotter(m.getName(),m),m=new u.SelectionPlotter(c+".selection"),n.setPlotter(m.getName(),m),m=new u.RangeAreaBackgroundPlotter(c+"Range.background"),n.setPlotter(m.getName(),m),m=new u.RangePlotter(c+"Range.main"),n.setPlotter(m.getName(),m),m=new u.RangeSelectionPlotter(c+"Range.selection"),n.setPlotter(m.getName(),m)}else n.removeIndicator(c)}},{key:"createTimelineComps",value:function(t){var e,n=r.ChartManager.instance,i=new c.Timeline(t);n.setTimeline(i.getName(),i),e=new u.TimelineAreaBackgroundPlotter(t+".timeline.background"),n.setPlotter(e.getName(),e),e=new u.TimelinePlotter(t+".timeline.main"),n.setPlotter(e.getName(),e),e=new u.TimelineSelectionPlotter(t+".timeline.selection"),n.setPlotter(e.getName(),e)}},{key:"createLiveOrderComps",value:function(t){var e,n=r.ChartManager.instance;e=new u.BackgroundPlotter(t+".main.background"),n.setPlotter(e.getName(),e),e=new u.CLiveOrderPlotter(t+".main.main"),n.setPlotter(e.getName(),e)}},{key:"createLiveTradeComps",value:function(t){var e,n=r.ChartManager.instance;e=new u.BackgroundPlotter(t+".main.background"),n.setPlotter(e.getName(),e),e=new u.CLiveTradePlotter(t+".main.main"),n.setPlotter(e.getName(),e)}}]),t}();e.Template=y,y.displayVolume=!0;var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,y);function e(){return g(this,e),function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return m(e,null,[{key:"loadTemplate",value:function(t,e){var n=r.ChartManager.instance,o=i.ChartSettings.get(),a=new l.CName(t).getCompAt(0);n.unloadTemplate(a),this.createDataSource(t,e,this.createCandlestickDataSource);var u=new h.DockableLayout(a);n.setFrame(u.getName(),u),n.setArea(u.getName(),u),u.setGridColor(d.Theme.Color.Grid1);var c=new s.TimelineArea(t+".timeline");n.setArea(c.getName(),c),u.addArea(c),c.setDockStyle(s.ChartArea.DockStyle.Bottom),c.Measuring.addHandler(c,w.onMeasuring);var p=new h.TableLayout(t+".charts");return n.setArea(p.getName(),p),p.setDockStyle(s.ChartArea.DockStyle.Fill),u.addArea(p),this.createTableComps(t),n.setThemeName(a,o.theme),n}}]),e}();e.DefaultTemplate=b;var w=function(){function t(){g(this,t)}return m(t,null,[{key:"onMeasuring",value:function(t,e){var n=e.Width;e.Height;"timeline"===t.getNameObject().getCompAt(2)&&t.setMeasuredDimension(n,22)}}]),t}();e.TemplateMeasuringHandler=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(147),i=n(148),o=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r.DOMStorageWrapper(e)}}catch(t){}return new i.MemoryStorage};e.PersistentStorage=o("localStorage"),e.SessionStorage=o("sessionStorage")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PROTOCOL_VERSION="5",e.VERSION_PARAM="v",e.TRANSPORT_SESSION_PARAM="s",e.REFERER_PARAM="r",e.FORGE_REF="f",e.FORGE_DOMAIN="firebaseio.com",e.LAST_SESSION_PARAM="ls",e.WEBSOCKET="websocket",e.LONG_POLLING="long_polling"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(1),o=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new r.NamedNode(i.MIN_NAME,t),o=new r.NamedNode(i.MIN_NAME,e);return 0!==this.compare(n,o)},t.prototype.minPost=function(){return r.NamedNode.MIN},t}();e.Index=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(1),a=n(70),s=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,i.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),a.validatePriorityNode(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return r},set:function(t){r=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(i.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+a.priorityHashText(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?o.doubleToIEEE754String(this.value_):this.value_,this.lazyHash_=o.sha1(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(i.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return i.assert(o>=0,"Unknown leaf type: "+n),i.assert(a>=0,"Unknown leaf type: "+r),o===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();e.LeafNode=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}();e.SortedMapIterator=r;var i=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:a.EMPTY_NODE,this.right=null!=o?o:a.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return a.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return a.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}();e.LLRBNode=i;var o=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new i(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}();e.LLRBEmptyNode=o;var a=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,i.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,i.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new r(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new r(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new r(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new r(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new o,t}();e.SortedMap=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(76),i=n(22),o=n(2),a=n(77),s=n(153),u=n(164),c=n(0),l=n(1),h=n(0),d=n(165),p=n(48),f=n(167),_=n(82),g=n(168),v=n(83),m=n(173),y=n(65),b=function(){function t(t,e,n){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new g.EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new a.SparseSnapshotTree,this.persistentConnection_=null;var i=new d.AuthTokenProvider(n);if(this.stats_=p.StatsManager.getCollection(t),e||l.beingCrawled())this.server_=new m.ReadonlyRestClient(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(void 0!==o&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{c.stringify(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new v.PersistentConnection(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){r.server_.refreshAuthToken(t)}),this.statsReporter_=p.StatsManager.getOrCreateReporter(t,function(){return new f.StatsReporter(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new u.SnapshotHolder,this.infoSyncTree_=new s.SyncTree({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new s.SyncTree({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new o.Path(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return r.generateWithValues({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var a=new o.Path(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var u=h.map(e,function(t){return i.nodeFromJSON(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(a,u,r)}else{var c=i.nodeFromJSON(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(a,c,r)}else if(n){var l=h.map(e,function(t){return i.nodeFromJSON(t)});s=this.serverSyncTree_.applyServerMerge(a,l)}else{var d=i.nodeFromJSON(e);s=this.serverSyncTree_.applyServerOverwrite(a,d)}var p=a;s.length>0&&(p=this.rerunTransactions_(a)),this.eventQueue_.raiseEventsForChangedPath(p,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;l.each(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new o.Path("/.info/"+t),r=i.nodeFromJSON(e);this.infoData_.updateSnapshot(n,r);var a=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,a)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,o){var a=this;this.log_("set",{path:t.toString(),value:e,priority:n});var s=this.generateServerValues(),u=i.nodeFromJSON(e,n),c=r.resolveDeferredValueSnapshot(u,s),h=this.getNextWriteId_(),d=this.serverSyncTree_.applyUserOverwrite(t,c,h,!0);this.eventQueue_.queueEvents(d),this.server_.put(t.toString(),u.val(!0),function(e,n){var r="ok"===e;r||l.warn("set at "+t+" failed: "+e);var i=a.serverSyncTree_.ackUserWrite(h,!r);a.eventQueue_.raiseEventsForChangedPath(t,i),a.callOnCompleteCallback(o,e,n)});var p=this.abortTransactions_(t);this.rerunTransactions_(p),this.eventQueue_.raiseEventsForChangedPath(p,[])},t.prototype.update=function(t,e,n){var o=this;this.log_("update",{path:t.toString(),value:e});var a=!0,s=this.generateServerValues(),u={};if(h.forEach(e,function(t,e){a=!1;var n=i.nodeFromJSON(e);u[t]=r.resolveDeferredValueSnapshot(n,s)}),a)l.log("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var c=this.getNextWriteId_(),d=this.serverSyncTree_.applyUserMerge(t,u,c);this.eventQueue_.queueEvents(d),this.server_.merge(t.toString(),e,function(e,r){var i="ok"===e;i||l.warn("update at "+t+" failed: "+e);var a=o.serverSyncTree_.ackUserWrite(c,!i),s=a.length>0?o.rerunTransactions_(t):t;o.eventQueue_.raiseEventsForChangedPath(s,a),o.callOnCompleteCallback(n,e,r)}),h.forEach(e,function(e){var n=o.abortTransactions_(t.child(e));o.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=[];r.resolveDeferredValueTree(this.onDisconnect_,e).forEachTree(o.Path.Empty,function(e,r){n=n.concat(t.serverSyncTree_.applyServerOverwrite(e,r));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new a.SparseSnapshotTree,this.eventQueue_.raiseEventsForChangedPath(o.Path.Empty,n)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,o=i.nodeFromJSON(e);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,i){"ok"===e&&r.onDisconnect_.remember(t,o),r.callOnCompleteCallback(n,e,i)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var o=this,a=i.nodeFromJSON(e,n);this.server_.onDisconnectPut(t.toString(),a.val(!0),function(e,n){"ok"===e&&o.onDisconnect_.remember(t,a),o.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(h.isEmpty(e))return l.log("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(o,a){"ok"===o&&h.forEach(e,function(e,n){var o=i.nodeFromJSON(n);r.onDisconnect_.remember(t.child(e),o)}),r.callOnCompleteCallback(n,o,a)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new _.StatsListener(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);h.forEach(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),l.log.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&l.exceptionGuard(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new y.Database(this))},enumerable:!0,configurable:!0}),t}();e.Repo=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}();e.CacheNode=r},function(t,e,n){"use strict";var r={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key"},i=(o={},o[r.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",o[r.AVAILABLE_IN_SW]="This method is available in a service worker context.",o[r.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",o[r.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",o[r.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",o[r.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",o[r.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",o[r.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",o[r.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",o[r.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",o[r.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",o[r.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",o[r.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",o[r.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",o[r.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",o[r.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",o[r.USE_SW_BEFORE_GET_TOKEN]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",o[r.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",o[r.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",o[r.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",o[r.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",o[r.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",o[r.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",o[r.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",o[r.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",o[r.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",o[r.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",o[r.BAD_SCOPE]="The service worker scope must be a string with at least one character.",o[r.BAD_VAPID_KEY]="The public VAPID key must be a string with at least one character.",o[r.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",o[r.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",o[r.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",o[r.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",o);e.a={codes:r,map:i};var o},function(t,e,n){"use strict";n.d(e,"f",function(){return r}),n.d(e,"g",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"h",function(){return l});var r="https://firebasestorage.googleapis.com",i="https://firebasestorage.googleapis.com",o="/v0",a="/v0";var s="storageBucket",u=12e4,c=6e4,l=-9007199254740991},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(9),i=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw r.h(e)},t.makeFromUrl=function(e){var n=null;for(var i=[{regex:new RegExp("^gs://([A-Za-z0-9.\\-]+)(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],o=0;o<i.length;o++){var a=i[o],s=a.regex.exec(e);if(s){var u=s[a.indices.bucket],c=s[a.indices.path];c||(c=""),n=new t(u,c),a.postModify(n);break}}if(null==n)throw r.k(e);return n},t}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Control=void 0;var _kline=_interopRequireDefault(__webpack_require__(15)),_kline_trade=__webpack_require__(54),_chart_manager=__webpack_require__(3),_chart_settings=__webpack_require__(18),_templates=__webpack_require__(25),_mevent=__webpack_require__(57),_jquery=_interopRequireDefault(__webpack_require__(59));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Control=function(){function Control(){_classCallCheck(this,Control)}a103211=Control,a103212=null,a103213=[{key:"refreshFunction",value:function(){Control.refreshCounter++;var t=_chart_manager.ChartManager.instance.getLanguage();if(Control.refreshCounter>3600){var e=Number(Control.refreshCounter/3600);"en-us"===t?(0,_jquery.default)("#chart_updated_time_text").html(e.toFixed(0)+"h"):"zh-tw"===t?(0,_jquery.default)("#chart_updated_time_text").html(e.toFixed(0)+""):(0,_jquery.default)("#chart_updated_time_text").html(e.toFixed(0)+"")}else if(Control.refreshCounter>60&&Control.refreshCounter<=3600){var n=Number(Control.refreshCounter/60);"en-us"===t?(0,_jquery.default)("#chart_updated_time_text").html(n.toFixed(0)+"m"):"zh-tw"===t?(0,_jquery.default)("#chart_updated_time_text").html(n.toFixed(0)+""):(0,_jquery.default)("#chart_updated_time_text").html(n.toFixed(0)+"")}else Control.refreshCounter<=60&&("en-us"===t?(0,_jquery.default)("#chart_updated_time_text").html(Control.refreshCounter+"s"):(0,_jquery.default)("#chart_updated_time_text").html(Control.refreshCounter+""))}},{key:"clearRefreshCounter",value:function(){window.clearInterval(Control.refreshHandler),Control.refreshCounter=0;"en-us"===_chart_manager.ChartManager.instance.getLanguage()?(0,_jquery.default)("#chart_updated_time_text").html(Control.refreshCounter+"s"):(0,_jquery.default)("#chart_updated_time_text").html(Control.refreshCounter+""),Control.refreshHandler=setInterval(Control.refreshFunction,_kline.default.instance.intervalTime)}},{key:"requestData",value:function(t){Control.AbortRequest(),window.clearTimeout(_kline.default.instance.timer),_kline.default.instance.paused||(!0===t&&(0,_jquery.default)("#chart_loading").addClass("activated"),"stomp"===_kline.default.instance.type&&_kline.default.instance.stompClient?Control.requestOverStomp():Control.requestOverHttp())}},{key:"parseRequestParam",value:function(t){return JSON.parse('{"'+decodeURI(t.replace(/&/g,'","').replace(/=/g,'":"'))+'"}')}},{key:"requestOverStomp",value:function(){_kline.default.instance.socketConnected?_kline.default.instance.stompClient&&1===_kline.default.instance.stompClient.ws.readyState?_kline.default.instance.stompClient.send(_kline.default.instance.sendPath,{},JSON.stringify(Control.parseRequestParam(_kline.default.instance.requestParam))):(_kline.default.instance.debug&&console.log("DEBUG: stomp client is not ready yet ..."),_kline.default.instance.timer=setTimeout(function(){Control.requestData(!0)},1e3)):_kline.default.instance.debug&&console.log("DEBUG: socket is not coonnected")}},{key:"requestOverHttp",value:function(){_kline.default.instance.debug&&console.log("DEBUG: "+_kline.default.instance.requestParam),(0,_jquery.default)(document).ready(_kline.default.instance.G_HTTP_REQUEST=_jquery.default.ajax({type:"GET",url:_kline.default.instance.url,dataType:"json",data:_kline.default.instance.requestParam,timeout:3e4,created:Date.now(),beforeSend:function(){this.range=_kline.default.instance.range,this.symbol=_kline.default.instance.symbol},success:function(t){_kline.default.instance.G_HTTP_REQUEST&&Control.requestSuccessHandler(t)},error:function(t,e,n){_kline.default.instance.debug&&console.log(t),200===t.status&&4===t.readyState||(_kline.default.instance.timer=setTimeout(function(){Control.requestData(!0)},_kline.default.instance.intervalTime))},complete:function(){_kline.default.instance.G_HTTP_REQUEST=null}}))}},{key:"requestSuccessHandler",value:function requestSuccessHandler(res){if(_kline.default.instance.debug&&console.log(res),res&&res.success){(0,_jquery.default)("#chart_loading").removeClass("activated");var chart=_chart_manager.ChartManager.instance.getChart();chart.setTitle(),_kline.default.instance.data=eval(res.data);var updateDataRes=_kline.default.instance.chartMgr.updateData("frame0.k0",_kline.default.instance.data.lines);_kline.default.instance.requestParam=Control.setHttpRequestParam(_kline.default.instance.symbol,_kline.default.instance.range,null,_kline.default.instance.chartMgr.getDataSource("frame0.k0").getLastDate());var intervalTime=_kline.default.instance.intervalTime<_kline.default.instance.range?_kline.default.instance.intervalTime:_kline.default.instance.range;updateDataRes?(_kline.default.instance.data.trades&&_kline.default.instance.data.trades.length>0&&(_kline_trade.KlineTrade.instance.pushTrades(_kline.default.instance.data.trades),_kline_trade.KlineTrade.instance.klineTradeInit=!0),_kline.default.instance.data.depths&&_kline_trade.KlineTrade.instance.updateDepth(_kline.default.instance.data.depths),Control.clearRefreshCounter(),"poll"===_kline.default.instance.type&&(_kline.default.instance.timer=setTimeout(Control.TwoSecondThread,intervalTime)),_chart_manager.ChartManager.instance.redraw("All",!1)):"poll"===_kline.default.instance.type&&(_kline.default.instance.timer=setTimeout(Control.requestData,intervalTime))}else"poll"===_kline.default.instance.type&&(_kline.default.instance.timer=setTimeout(function(){Control.requestData(!0)},_kline.default.instance.intervalTime))}},{key:"AbortRequest",value:function(){"stomp"===_kline.default.instance.type&&_kline.default.instance.stompClient||_kline.default.instance.G_HTTP_REQUEST&&4!==_kline.default.instance.G_HTTP_REQUEST.readyState&&_kline.default.instance.G_HTTP_REQUEST.abort()}},{key:"TwoSecondThread",value:function(){var t=_kline.default.instance.chartMgr.getDataSource("frame0.k0").getLastDate();_kline.default.instance.requestParam=-1===t?Control.setHttpRequestParam(_kline.default.instance.symbol,_kline.default.instance.range,_kline.default.instance.limit,null):Control.setHttpRequestParam(_kline.default.instance.symbol,_kline.default.instance.range,null,t.toString()),Control.requestData()}},{key:"readCookie",value:function(){_chart_settings.ChartSettings.get(),_chart_settings.ChartSettings.save();var t=_chart_settings.ChartSettings.get();_chart_manager.ChartManager.instance.setChartStyle("frame0.k0",t.charts.chartStyle);var e=t.charts.symbol;_kline.default.instance.init||(e=_kline.default.instance.symbol,_kline.default.instance.init=!0),_kline.default.instance.symbol=e,Control.switchSymbolSelected(e);var n=t.charts.period;Control.switchPeriod(n),(0,_jquery.default)("#chart_period_"+n+"_v a").addClass("selected"),(0,_jquery.default)("#chart_period_"+n+"_h a").addClass("selected"),"close"===t.charts.indicsStatus?Control.switchIndic("off"):"open"===t.charts.indicsStatus&&Control.switchIndic("on");(0,_jquery.default)("#chart_select_main_indicator").find("a").each(function(){(0,_jquery.default)(this).attr("name")===t.charts.mIndic&&(0,_jquery.default)(this).addClass("selected")});(0,_jquery.default)("#chart_select_chart_style").find("a").each(function(){(0,_jquery.default)(this)[0].innerHTML===t.charts.chartStyle&&(0,_jquery.default)(this).addClass("selected")}),_chart_manager.ChartManager.instance.getChart().setMainIndicator(t.charts.mIndic),_chart_manager.ChartManager.instance.setThemeName("frame0",t.theme),Control.switchTools("off"),"Dark"===t.theme?Control.switchTheme("dark"):"Light"===t.theme&&Control.switchTheme("light"),Control.chartSwitchLanguage(t.language||"zh-cn")}},{key:"setHttpRequestParam",value:function(t,e,n,r){var i="symbol="+t+"&range="+e;return i+=null!==n?"&limit="+n:"&since="+r,0!==_kline_trade.KlineTrade.instance.tradeDate.getTime()&&(i+="&prevTradeTime="+_kline_trade.KlineTrade.instance.tradeDate.getTime()),i}},{key:"refreshTemplate",value:function(){_kline.default.instance.chartMgr=_templates.DefaultTemplate.loadTemplate("frame0.k0",""),_chart_manager.ChartManager.instance.redraw("All",!0)}},{key:"chartSwitchLanguage",value:function(t){var e=t.replace(/-/,"_");(0,_jquery.default)("#chart_language_switch_tmp").find("span").each(function(){var t=(0,_jquery.default)(this).attr("name"),n=(0,_jquery.default)(this).attr(e);t="."+t;(0,_jquery.default)(t)[0]&&(0,_jquery.default)(t).each(function(){(0,_jquery.default)(this)[0].innerHTML=n})}),(0,_jquery.default)("#chart_language_setting_div li a[name='"+t+"']").addClass("selected"),_chart_manager.ChartManager.instance.setLanguage(t),_chart_manager.ChartManager.instance.getChart().setTitle();_chart_settings.ChartSettings.get().language=t,_chart_settings.ChartSettings.save(),_kline.default.instance.onLangChange(t)}},{key:"onSize",value:function(t,e){var n=t||window.innerWidth,r=_kline.default.instance.showTrade?n-_kline.default.instance.tradeWidth:n,i=e||window.innerHeight;(0,_jquery.default)(_kline.default.instance.element).css({width:n+"px",height:i+"px"});var o=(0,_jquery.default)("#chart_toolbar"),a=(0,_jquery.default)("#chart_toolpanel"),s=(0,_jquery.default)("#chart_canvasGroup"),u=(0,_jquery.default)("#chart_tabbar"),c="inline"===a[0].style.display,l="block"===u[0].style.display,h={};h.x=0,h.y=0,h.w=r,h.h=29;var d={};d.x=0,d.y=h.h+1,d.w=c?32:0,d.h=i-d.y;var p={};p.w=c?r-(d.w+1):r,p.h=l?22:-1,p.x=r-p.w,p.y=i-(p.h+1);var f={};f.x=p.x,f.y=d.y,f.w=p.w,f.h=p.y-d.y,o.css({left:h.x+"px",top:h.y+"px",width:h.w+"px",height:h.h+"px"}),c&&a.css({left:d.x+"px",top:d.y+"px",width:d.w+"px",height:d.h+"px"}),s.css({left:f.x+"px",top:f.y+"px",height:f.h+"px"});var _=(0,_jquery.default)("#chart_mainCanvas")[0],g=(0,_jquery.default)("#chart_overlayCanvas")[0];_.width=f.w,_.height=f.h,g.width=f.w,g.height=f.h,l&&u.css({left:p.x+"px",top:p.y+"px",width:p.w+"px",height:p.h+"px"});var v=(0,_jquery.default)("#chart_parameter_settings");v.css({left:r-v.width()>>1,top:i-v.height()>>1});var m=(0,_jquery.default)("#chart_loading");m.css({left:r-m.width()>>1,top:i-m.height()>>2});var y=(0,_jquery.default)("#chart_dom_elem_cache"),b=(0,_jquery.default)("#chart_select_theme")[0],w=(0,_jquery.default)("#chart_enable_tools")[0],C=(0,_jquery.default)("#chart_enable_indicator")[0],E=(0,_jquery.default)("#chart_toolbar_periods_vert"),P=(0,_jquery.default)("#chart_toolbar_periods_horz")[0],A=(0,_jquery.default)("#chart_show_indicator")[0],S=(0,_jquery.default)("#chart_show_tools")[0],x=(0,_jquery.default)("#chart_toolbar_theme")[0],O=(0,_jquery.default)("#chart_dropdown_settings"),k=E[0].offsetWidth,T=k+P.offsetWidth,I=T+A.offsetWidth+4,N=I+S.offsetWidth+4,R=N+x.offsetWidth,M=O.find(".chart_dropdown_t")[0].offsetWidth+150;k+=M,I+=M,N+=M,R+=M,r<(T+=M)?y.append(P):E.after(P),r<I?(y.append(A),C.style.display=""):(O.before(A),C.style.display="none"),r<N?(y.append(S),w.style.display=""):(O.before(S),w.style.display="none"),r<R?(y.append(x),b.style.display=""):(O.before(x),b.style.display="none"),_chart_manager.ChartManager.instance.redraw("All",!0),_kline.default.instance.onResize(n,i)}},{key:"mouseWheel",value:function(t,e){return _chart_manager.ChartManager.instance.scale(e>0?1:-1),_chart_manager.ChartManager.instance.redraw("All",!0),!1}},{key:"switchTheme",value:function(t){if((0,_jquery.default)("#chart_toolbar_theme a").removeClass("selected"),(0,_jquery.default)("#chart_select_theme a").removeClass("selected"),(0,_jquery.default)("#chart_toolbar_theme").find("a").each(function(){(0,_jquery.default)(this).attr("name")===t&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_select_theme a").each(function(){(0,_jquery.default)(this).attr("name")===t&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)(".chart_container").attr("class","chart_container "+t),(0,_jquery.default)(".marketName_ a").attr("class",t),"dark"===t){(0,_jquery.default)(".trade_container").addClass("dark").removeClass("light"),_chart_manager.ChartManager.instance.setThemeName("frame0","Dark");_chart_settings.ChartSettings.get().theme="Dark",_chart_settings.ChartSettings.save()}else if("light"===t){(0,_jquery.default)(".trade_container").addClass("light").removeClass("dark"),_chart_manager.ChartManager.instance.setThemeName("frame0","Light");_chart_settings.ChartSettings.get().theme="Light",_chart_settings.ChartSettings.save()}var e={};e.command="set current themes",e.content=t,(0,_jquery.default)("#chart_output_interface_text").val(JSON.stringify(e)),(0,_jquery.default)("#chart_output_interface_submit").submit(),(new _mevent.MEvent).raise(t),_chart_manager.ChartManager.instance.redraw(),_kline.default.instance.onThemeChange(t)}},{key:"switchTools",value:function(t){(0,_jquery.default)(".chart_dropdown_data").removeClass("chart_dropdown-hover"),(0,_jquery.default)("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),(0,_jquery.default)("#chart_enable_tools a").removeClass("selected"),"on"===t?((0,_jquery.default)("#chart_show_tools").addClass("selected"),(0,_jquery.default)("#chart_enable_tools a").each(function(){"on"===(0,_jquery.default)(this).attr("name")&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_toolpanel")[0].style.display="inline",_chart_manager.ChartManager.instance._drawingTool===_chart_manager.ChartManager.DrawingTool.Cursor?(0,_jquery.default)("#chart_Cursor").parent().addClass("selected"):_chart_manager.ChartManager.instance._drawingTool===_chart_manager.ChartManager.DrawingTool.CrossCursor&&(0,_jquery.default)("#chart_CrossCursor").parent().addClass("selected")):"off"===t&&((0,_jquery.default)("#chart_show_tools").removeClass("selected"),(0,_jquery.default)("#chart_enable_tools a").each(function(){"off"===(0,_jquery.default)(this).attr("name")&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_toolpanel")[0].style.display="none",_chart_manager.ChartManager.instance.setRunningMode(_chart_manager.ChartManager.instance._beforeDrawingTool),_chart_manager.ChartManager.instance.redraw("All",!0)),_kline.default.instance.isSized?Control.onSize():Control.onSize(_kline.default.instance.width,_kline.default.instance.height)}},{key:"switchIndic",value:function(t){if((0,_jquery.default)("#chart_enable_indicator a").removeClass("selected"),(0,_jquery.default)("#chart_enable_indicator a[name='"+t+"']").addClass("selected"),"on"===t){(0,_jquery.default)("#chart_show_indicator").addClass("selected");var e=_chart_settings.ChartSettings.get();e.charts.indicsStatus="open",_chart_settings.ChartSettings.save();var n=e.charts.indics[1];_templates.Template.displayVolume,_chart_manager.ChartManager.instance.getChart().setIndicator(2,n),(0,_jquery.default)("#chart_tabbar").find("a").each(function(){(0,_jquery.default)(this).attr("name")===n&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_tabbar")[0].style.display="block"}else if("off"===t){(0,_jquery.default)("#chart_show_indicator").removeClass("selected"),_chart_manager.ChartManager.instance.getChart().setIndicator(2,"NONE");_chart_settings.ChartSettings.get().charts.indicsStatus="close",_chart_settings.ChartSettings.save(),(0,_jquery.default)("#chart_tabbar")[0].style.display="none",(0,_jquery.default)("#chart_tabbar a").removeClass("selected")}_kline.default.instance.isSized?Control.onSize():Control.onSize(_kline.default.instance.width,_kline.default.instance.height)}},{key:"switchPeriod",value:function(t){if((0,_jquery.default)(".chart_container .chart_toolbar_tabgroup a").removeClass("selected"),(0,_jquery.default)("#chart_toolbar_periods_vert ul a").removeClass("selected"),(0,_jquery.default)(".chart_container .chart_toolbar_tabgroup a").each(function(){(0,_jquery.default)(this).parent().attr("name")===t&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_toolbar_periods_vert ul a").each(function(){(0,_jquery.default)(this).parent().attr("name")===t&&(0,_jquery.default)(this).addClass("selected")}),_chart_manager.ChartManager.instance.showCursor(),Control.calcPeriodWeight(t),"line"===t){_chart_manager.ChartManager.instance.getChart().strIsLine=!0,_chart_manager.ChartManager.instance.setChartStyle("frame0.k0","Line"),_chart_manager.ChartManager.instance.getChart().setCurrentPeriod("line");return _chart_settings.ChartSettings.get().charts.period=t,void _chart_settings.ChartSettings.save()}_chart_manager.ChartManager.instance.getChart().strIsLine=!1;var e=_kline.default.instance.tagMapPeriod[t];_chart_manager.ChartManager.instance.setChartStyle("frame0.k0",_chart_settings.ChartSettings.get().charts.chartStyle),_chart_manager.ChartManager.instance.getChart().setCurrentPeriod(e);_chart_settings.ChartSettings.get().charts.period=t,_chart_settings.ChartSettings.save()}},{key:"reset",value:function(t){_kline.default.instance.symbol=t,_kline.default.instance.showTrade&&_kline_trade.KlineTrade.instance.reset(t)}},{key:"switchSymbolSelected",value:function(t){Control.reset(t),(0,_jquery.default)(".market_chooser ul a").removeClass("selected"),(0,_jquery.default)(".market_chooser ul a[name='"+t+"']").addClass("selected"),_chart_manager.ChartManager.instance.getChart()._symbol=t;_chart_settings.ChartSettings.get().charts.symbol=t,_chart_settings.ChartSettings.save()}},{key:"switchSymbol",value:function(t){"stomp"===_kline.default.instance.type&&1===_kline.default.instance.stompClient.ws.readyState&&(_kline.default.instance.subscribed.unsubscribe(),_kline.default.instance.subscribed=_kline.default.instance.stompClient.subscribe(_kline.default.instance.subscribePath+"/"+t+"/"+_kline.default.instance.range,Control.subscribeCallback)),Control.switchSymbolSelected(t);"line"===_chart_settings.ChartSettings.get().charts.period?(_chart_manager.ChartManager.instance.getChart().strIsLine=!0,_chart_manager.ChartManager.instance.setChartStyle("frame0.k0","Line")):(_chart_manager.ChartManager.instance.getChart().strIsLine=!1,_chart_manager.ChartManager.instance.setChartStyle("frame0.k0",_chart_settings.ChartSettings.get().charts.chartStyle)),_chart_manager.ChartManager.instance.getChart().setSymbol(t)}},{key:"calcPeriodWeight",value:function(t){var e=t;"line"!==t&&(e=_kline.default.instance.periodMap[_kline.default.instance.tagMapPeriod[t]]);var n=_chart_settings.ChartSettings.get().charts.period_weight;for(var r in n)n[r]>n[e]&&(n[r]-=1);n[e]=8,_chart_settings.ChartSettings.save()}},{key:"subscribeCallback",value:function(t){Control.requestSuccessHandler(JSON.parse(t.body))}},{key:"socketConnect",value:function(){if(!_kline.default.instance.stompClient||!_kline.default.instance.socketConnected){if(_kline.default.instance.enableSockjs){var t=new SockJS(_kline.default.instance.url);_kline.default.instance.stompClient=Stomp.over(t)}else _kline.default.instance.stompClient=Stomp.client(_kline.default.instance.url);_kline.default.instance.socketConnected=!0}1!==_kline.default.instance.stompClient.ws.readyState?(_kline.default.instance.debug||(_kline.default.instance.stompClient.debug=null),_kline.default.instance.stompClient.connect({},function(){_kline.default.instance.stompClient.subscribe("/user"+_kline.default.instance.subscribePath,Control.subscribeCallback),_kline.default.instance.subscribed=_kline.default.instance.stompClient.subscribe(_kline.default.instance.subscribePath+"/"+_kline.default.instance.symbol+"/"+_kline.default.instance.range,Control.subscribeCallback),Control.requestData(!0)},function(){_kline.default.instance.stompClient.disconnect(),console.log("DEBUG: reconnect in 5 seconds ..."),setTimeout(function(){Control.socketConnect()},5e3)})):console.log("DEBUG: already connected")}}],a103212&&_defineProperties(a103211.prototype,a103212),a103213&&_defineProperties(a103211,a103213);var a103211,a103212,a103213;return Control}();exports.Control=Control,Control.refreshCounter=0,Control.refreshHandler=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPoint=void 0;var r=n(3),i=n(8),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(11)),a=n(19);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.NamedObject);function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).pos={index:-1,value:-1},n.state=e.state.Hide,n}n=e,l=void 0,(c=[{key:"getChartObjects",value:function(){var t=r.ChartManager.instance,e=t.getDataSource("frame0.k0");if(null===e||!a.Util.isInstance(e,o.MainDataSource))return null;var n=t.getTimeline("frame0.k0");if(null===n)return null;var i=t.getRange("frame0.k0.main");return null===i?null:{pMgr:t,pCDS:e,pTimeline:n,pRange:i}}},{key:"setPosXY",value:function(t,e){var n=this.getChartObjects(),r=n.pTimeline.toIndex(t),i=n.pRange.toValue(e),o=this.snapValue(r,i);null!==o&&(i=o),this.setPosIV(r,i)}},{key:"setPosXYNoSnap",value:function(t,e){var n=this.getChartObjects(),r=n.pTimeline.toIndex(t),i=n.pRange.toValue(e);this.setPosIV(r,i)}},{key:"setPosIV",value:function(t,e){this.pos={index:t,value:e}}},{key:"getPosXY",value:function(){var t=this.getChartObjects();return{x:t.pTimeline.toItemCenter(this.pos.index),y:t.pRange.toY(this.pos.value)}}},{key:"getPosIV",value:function(){return{i:this.pos.index,v:this.pos.value}}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"isSelected",value:function(t,n){var r=this.getPosXY();return!(t<r.x-4||t>r.x+4||n<r.y-4||n>r.y+4)&&(this.setState(e.state.Highlight),!0)}},{key:"snapValue",value:function(t,e){var n=this.getChartObjects(),r=null,i=Math.floor(n.pTimeline.getFirstIndex()),o=Math.floor(n.pTimeline.getLastIndex());if(t<i||t>o)return r;var a=n.pRange.toY(e),s=n.pCDS.getDataAt(t);if(null===s||void 0===s)return r;var u=null;u=t>0?n.pCDS.getDataAt(t-1):n.pCDS.getDataAt(t);var c=n.pMgr.getChartStyle(n.pCDS.getFrameName()),l=n.pRange.toY(s.open),h=n.pRange.toY(s.high),d=n.pRange.toY(s.low),p=n.pRange.toY(s.close);"CandleStickHLC"===c&&(l=n.pRange.toY(u.close));var f=Math.abs(l-a),_=Math.abs(h-a),g=Math.abs(d-a),v=Math.abs(p-a);return f<=_&&f<=g&&f<=v&&f<6&&(r=s.open),_<=f&&_<=g&&_<=v&&_<6&&(r=s.high),g<=f&&g<=_&&g<=v&&g<6&&(r=s.low),v<=f&&v<=_&&v<=g&&v<6&&(r=s.close),r}}])&&u(n.prototype,c),l&&u(n,l);var n,c,l;return e}();e.CPoint=c,c.state={Hide:0,Show:1,Highlight:2}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CArrowLineObject=e.CPriceLineObject=e.CVertiStraightLineObject=e.CTriParallelLineObject=e.CStraightLineObject=e.CSegLineObject=e.CRayLineObject=e.CHoriStraightLineObject=e.CHoriSegLineObject=e.CHoriRayLineObject=e.CFibRetraceObject=e.CFibFansObject=e.CBiParallelRayLineObject=e.CBiParallelLineObject=e.CBandLineObject=e.CTriToolObject=e.CBiToolObject=e.CToolObject=void 0;var r=n(3),i=n(8),o=n(37),a=n(19),s=c(n(11)),u=c(n(39));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:d(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function g(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=function(t){v(e,i.NamedObject);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=null,n.state=e.state.BeforeDraw,n.points=[],n.step=0,n}return _(e,[{key:"getChartObjects",value:function(){var t=r.ChartManager.instance,e=t.getDataSource("frame0.k0");if(null===e||!a.Util.isInstance(e,s.MainDataSource))return null;var n=t.getTimeline("frame0.k0");if(null===n)return null;var i=t.getArea("frame0.k0.main");if(null===i)return null;var o=t.getRange("frame0.k0.main");return null===o?null:{pMgr:t,pCDS:e,pTimeline:n,pArea:i,pRange:o}}},{key:"isValidMouseXY",value:function(t,e){var n=this.getChartObjects(),r=n.pArea.getLeft(),i=n.pArea.getTop(),o=n.pArea.getRight(),a=n.pArea.getBottom();return!(t<r||t>o||e<i||e>a)}},{key:"getPlotter",value:function(){return this.drawer}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"addPoint",value:function(t){this.points.push(t)}},{key:"getPoint",value:function(t){return this.points[t]}},{key:"acceptMouseMoveEvent",value:function(t,n){return!1!==this.isValidMouseXY(t,n)&&(this.state===e.state.BeforeDraw?this.setBeforeDrawPos(t,n):this.state===e.state.Draw?this.setDrawPos(t,n):this.state===e.state.AfterDraw&&this.setAfterDrawPos(t,n),!0)}},{key:"acceptMouseDownEvent",value:function(t,n){return!1!==this.isValidMouseXY(t,n)&&(this.state===e.state.BeforeDraw?(this.setDrawPos(t,n),this.setState(e.state.Draw)):this.state===e.state.Draw?(this.setAfterDrawPos(t,n),0===this.step&&this.setState(e.state.AfterDraw)):this.state===e.state.AfterDraw&&(e.prototype.isSelected(t,n)?(this.setDrawPos(t,n),this.setState(e.state.Draw)):(this.oldx=t,this.oldy=n)),!0)}},{key:"acceptMouseDownMoveEvent",value:function(t,n){if(!1===this.isValidMouseXY(t,n))return!1;if(this.state===e.state.Draw)this.setDrawPos(t,n);else if(this.state===e.state.AfterDraw){var r=this.getChartObjects(),i=r.pTimeline.getItemWidth();r.pRange;if(Math.abs(t-this.oldx)<i&&0===Math.abs(n-this.oldy))return!0;var o=r.pTimeline.toIndex(this.oldx),a=r.pRange.toValue(this.oldy),s=r.pTimeline.toIndex(t),u=r.pRange.toValue(n);this.oldx=t,this.oldy=n;var c=s-o,l=u-a;for(var h in this.points)this.points[h].pos.index+=c,this.points[h].pos.value+=l}return!0}},{key:"acceptMouseUpEvent",value:function(t,n){return!1!==this.isValidMouseXY(t,n)&&(this.state===e.state.Draw&&(this.setAfterDrawPos(t,n),0===this.step&&this.setState(e.state.AfterDraw),!0))}},{key:"setBeforeDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e),this.points[n].setState(o.CPoint.state.Show)}},{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].getState()===o.CPoint.state.Highlight&&this.points[n].setPosXY(t,e)}},{key:"setAfterDrawPos",value:function(t,e){0!==this.step&&(this.step-=1);for(var n in this.points)this.points[n].setState(o.CPoint.state.Hide);if(0===this.step){this.getChartObjects().pMgr.setNormalMode()}}},{key:"isSelected",value:function(t,e){var n=!1;for(var r in this.points)if(this.points[r].isSelected(t,e)){this.points[r].setState(o.CPoint.state.Highlight),n=!0;break}return!0===n&&(this.select(),!0)}},{key:"select",value:function(){for(var t in this.points)this.points[t].getState()===o.CPoint.state.Hide&&this.points[t].setState(o.CPoint.state.Show)}},{key:"unselect",value:function(){for(var t in this.points)this.points[t].getState()!==o.CPoint.state.Hide&&this.points[t].setState(o.CPoint.state.Hide)}},{key:"calcDistance",value:function(t,e,n){var r=t.getPosXY().x,i=t.getPosXY().y,o=e.getPosXY().x,a=e.getPosXY().y,s=n.getPosXY().x,u=n.getPosXY().y,c=r-s,l=i-u,h=o-s,d=a-u;return Math.abs(c*d-l*h)/Math.sqrt(Math.pow(o-r,2)+Math.pow(a-i,2))}},{key:"calcGap",value:function(t,e,n){var r=t.sx,i=t.sy,o=t.ex,a=t.ey,s=r-e,u=i-n,c=o-e,l=a-n;return Math.abs(s*l-u*c)/Math.sqrt(Math.pow(o-r,2)+Math.pow(a-i,2))}},{key:"isWithRect",value:function(t,e,n){var r=t.getPosXY().x,i=t.getPosXY().y,o=e.getPosXY().x,a=e.getPosXY().y,s=n.getPosXY().x,u=n.getPosXY().y;return r>o?(r+=4,o-=4):(r-=4,o+=4),i>a?(i+=4,a-=4):(i-=4,a+=4),r<=s&&o>=s&&i<=u&&a>=u||(r>=s&&o<=s&&i<=u&&a>=u||(r<=s&&o>=s&&i>=u&&a<=u||r>=s&&o<=s&&i>=u&&a<=u))}}]),e}();e.CToolObject=m,m.state={BeforeDraw:0,Draw:1,AfterDraw:2};var y=function(t){v(e,m);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).addPoint(new o.CPoint(t)),n.addPoint(new o.CPoint(t)),n}return _(e,[{key:"setBeforeDrawPos",value:function(t,n){this.step=1,d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setBeforeDrawPos",this).call(this,t,n),this.getPoint(0).setState(o.CPoint.state.Show),this.getPoint(1).setState(o.CPoint.state.Highlight)}}]),e}();e.CBiToolObject=y;var b=function(t){v(e,m);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).addPoint(new o.CPoint(t)),n.addPoint(new o.CPoint(t)),n.addPoint(new o.CPoint(t)),n}return _(e,[{key:"setBeforeDrawPos",value:function(t,n){this.step=2,d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setBeforeDrawPos",this).call(this,t,n),this.getPoint(0).setState(o.CPoint.state.Show),this.getPoint(1).setState(o.CPoint.state.Show),this.getPoint(2).setState(o.CPoint.state.Highlight)}},{key:"setAfterDrawPos",value:function(t,e){if(0!==this.step&&(this.step-=1),0===this.step)for(var n in this.points)this.points[n].setState(o.CPoint.state.Hide);else this.getPoint(0).setState(o.CPoint.state.Show),this.getPoint(1).setState(o.CPoint.state.Highlight),this.getPoint(2).setState(o.CPoint.state.Show);if(0===this.step){this.getChartObjects().pMgr.setNormalMode()}}}]),e}();e.CTriToolObject=b;var w=function(t){v(e,y);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawBandLinesPlotter(t,h(n)),n}return _(e,[{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.CPoint("frame0.k0").setPosXY(t,n);this.getPoint(0).getPosXY().x;for(var r=this.getPoint(0).getPosXY().y,i=(this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y),a=[100,87.5,75,62.5,50,37.5,25,12.5,0],s=0;s<a.length;s++){var u=r+(100-a[s])/100*(i-r);if(u<n+4&&u>n-4)return this.select(),!0}return!1}}]),e}();e.CBandLineObject=w;var C=function(t){v(e,b);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawBiParallelLinesPlotter(t,h(n)),n}return _(e,[{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,o=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,s=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,c={sx:r,sy:i,ex:s,ey:u},l={sx:o,sy:a,ex:r-(r-o+(r-s)),ey:i-(i-a+(i-u))};return!(this.calcGap(c,t,n)>4&&this.calcGap(l,t,n)>4)}}]),e}();e.CBiParallelLineObject=C;var E=function(t){v(e,b);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawBiParallelRayLinesPlotter(t,h(n)),n}return _(e,[{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,o=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,s=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,c={sx:r,sy:i,ex:s,ey:u},l={sx:o,sy:a,ex:r-(r-o+(r-s)),ey:i-(i-a+(i-u))};return(c.ex>c.sx&&t>c.sx-4||c.ex<c.sx&&t<c.sx+4||l.ex>l.sx&&t>l.sx-4||l.ex<l.sx&&t<l.sx+4)&&(!(this.calcGap(c,t,n)>4&&this.calcGap(l,t,n)>4)&&(this.select(),!0))}}]),e}();e.CBiParallelRayLineObject=E;var P=function(t){v(e,y);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawFibFansPlotter(t,h(n)),n}return _(e,[{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=new o.CPoint("frame0.k0");r.setPosXY(t,n);for(var i=this.getPoint(0).getPosXY().x,a=this.getPoint(0).getPosXY().y,s=this.getPoint(1).getPosXY().x,u=this.getPoint(1).getPosXY().y,c=this.getChartObjects(),l={left:c.pArea.getLeft(),top:c.pArea.getTop(),right:c.pArea.getRight(),bottom:c.pArea.getBottom()},h=[0,38.2,50,61.8],p=0;p<h.length;p++){var f={x:i,y:a},_={x:s,y:a+(100-h[p])/100*(u-a)},g=this.getRectCrossPt(l,f,_),v=Math.pow(g[0].x-i,2)+Math.pow(g[0].y-a,2)>Math.pow(g[0].x-s,2)+Math.pow(g[0].y-u,2)?{x:g[0].x,y:g[0].y}:{x:g[1].x,y:g[1].y};if(!(v.x>i&&t<i)&&!(v.x<i&&t>i)){var m=new o.CPoint("frame0.k0");m.setPosXY(i,a);var y=new o.CPoint("frame0.k0");if(y.setPosXY(v.x,v.y),!(this.calcDistance(m,y,r)>4))return this.select(),!0}}return!1}}]),e}();e.CFibFansObject=P;var A=function(t){v(e,y);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawFibRetracePlotter(t,h(n)),n}return _(e,[{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.CPoint("frame0.k0").setPosXY(t,n);this.getPoint(0).getPosXY().x;for(var r=this.getPoint(0).getPosXY().y,i=(this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y),a=[100,78.6,61.8,50,38.2,23.6,0],s=0;s<a.length;s++){var u=r+(100-a[s])/100*(i-r);if(u<n+4&&u>n-4)return this.select(),!0}return!1}}]),e}();e.CFibRetraceObject=A;var S=function(t){v(e,y);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawHoriRayLinesPlotter(t,h(n)),n}return _(e,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===o.CPoint.state.Highlight)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===o.CPoint.state.Highlight&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.CPoint("frame0.k0").setPosXY(t,n);var r=this.getPoint(0).getPosXY().y,i=this.getPoint(0).getPosXY().x,a=this.getPoint(1).getPosXY().x;return!(n>r+4||n<r-4)&&(!(a>i&&t<i-4)&&(!(a<i&&t>i+4)&&(this.select(),!0)))}}]),e}();e.CHoriRayLineObject=S;var x=function(t){v(e,y);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawHoriSegLinesPlotter(t,h(n)),n}return _(e,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===o.CPoint.state.Highlight)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===o.CPoint.state.Highlight&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.CPoint("frame0.k0").setPosXY(t,n);var r=this.getPoint(0).getPosXY().y,i=this.getPoint(0).getPosXY().x,a=this.getPoint(1).getPosXY().x;return!(n>r+4||n<r-4)&&(!(i>a&&(t>i+4||t<a-4))&&(!(i<a&&(t<i-4||t>a+4))&&(this.select(),!0)))}}]),e}();e.CHoriSegLineObject=x;var O=function(t){v(e,y);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawHoriStraightLinesPlotter(t,h(n)),n}return _(e,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e)}},{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.CPoint("frame0.k0").setPosXY(t,n);var r=this.getPoint(0).getPosXY().y;return!(n>r+4||n<r-4)&&(this.select(),!0)}}]),e}();e.CHoriStraightLineObject=O;var k=function(t){v(e,y);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawRayLinesPlotter(t,h(n)),n}return _(e,[{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=new o.CPoint("frame0.k0");r.setPosXY(t,n);var i=this.getPoint(0).getPosXY().x,a=this.getPoint(1).getPosXY().x;return!(a>i&&t<i-4)&&(!(a<i&&t>i+4)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),r)<4&&(this.select(),!0)))}}]),e}();e.CRayLineObject=k;var T=function(t){v(e,y);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawSegLinesPlotter(t,h(n)),n}return _(e,[{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=new o.CPoint("frame0.k0");return r.setPosXY(t,n),!1!==this.isWithRect(this.getPoint(0),this.getPoint(1),r)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),r)<4&&(this.select(),!0))}}]),e}();e.CSegLineObject=T;var I=function(t){v(e,y);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawStraightLinesPlotter(t,h(n)),n}return _(e,[{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=new o.CPoint("frame0.k0");return r.setPosXY(t,n),this.calcDistance(this.getPoint(0),this.getPoint(1),r)<4&&(this.select(),!0)}}]),e}();e.CStraightLineObject=I;var N=function(t){v(e,b);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawTriParallelLinesPlotter(t,h(n)),n}return _(e,[{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;this.getChartObjects();var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,o=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,s=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,c=r-(r-o+(r-s)),l=i-(i-a+(i-u)),h={sx:r,sy:i,ex:s,ey:u},p={sx:o,sy:a,ex:c,ey:l},f=o-r,_=a-i,g=c-s,v=l-u,m={sx:Math.abs(f-r),sy:Math.abs(_-i),ex:Math.abs(g-s),ey:Math.abs(v-u)};return!(this.calcGap(h,t,n)>4&&this.calcGap(p,t,n)>4&&this.calcGap(m,t,n)>4)&&(this.select(),!0)}}]),e}();e.CTriParallelLineObject=N;var R=function(t){v(e,y);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawVertiStraightLinesPlotter(t,h(n)),n}return _(e,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e)}},{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.CPoint("frame0.k0").setPosXY(t,n);var r=this.getPoint(0).getPosXY().x;return!(t>r+4||t<r-4)&&(this.select(),!0)}}]),e}();e.CVertiStraightLineObject=R;var M=function(t){v(e,T);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawPriceLinesPlotter(t,h(n)),n}return _(e,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e)}},{key:"isSelected",value:function(t,n){if(!0===d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.CPoint("frame0.k0").setPosXY(t,n);var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y;this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y;return!(t<r-4)&&(!(n>=i+4||n<=i-4)&&(this.select(),!0))}}]),e}();e.CPriceLineObject=M;var D=function(t){v(e,T);function e(t){var n;return p(this,e),(n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).drawer=new u.DrawArrowLinesPlotter(t,h(n)),n}return e}();e.CArrowLineObject=D},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDynamicLinePlotter=e.DrawFibFansPlotter=e.DrawBandLinesPlotter=e.DrawFibRetracePlotter=e.BandLinesPlotter=e.DrawTriParallelLinesPlotter=e.DrawBiParallelRayLinesPlotter=e.DrawBiParallelLinesPlotter=e.ParallelLinesPlotter=e.DrawPriceLinesPlotter=e.DrawVertiStraightLinesPlotter=e.DrawHoriSegLinesPlotter=e.DrawHoriRayLinesPlotter=e.DrawHoriStraightLinesPlotter=e.DrawArrowLinesPlotter=e.DrawRayLinesPlotter=e.DrawSegLinesPlotter=e.DrawStraightLinesPlotter=e.CToolPlotter=e.RangeSelectionPlotter=e.TimelineSelectionPlotter=e.SelectionPlotter=e.LastClosePlotter=e.LastVolumePlotter=e.COrderGraphPlotter=e.RangePlotter=e.TimelinePlotter=e.MinMaxPlotter=e.IndicatorInfoPlotter=e.IndicatorPlotter=e.MainInfoPlotter=e.OHLCPlotter=e.CandlestickHLCPlotter=e.CandlestickPlotter=e.CGridPlotter=e.TimelineAreaBackgroundPlotter=e.RangeAreaBackgroundPlotter=e.MainAreaBackgroundPlotter=e.BackgroundPlotter=e.Plotter=void 0;var r,i=(r=n(15),r&&r.__esModule?r:{default:r}),o=n(8),a=n(3),s=n(19),u=n(37),c=f(n(56)),l=f(n(20)),h=f(n(40)),d=f(n(11)),p=f(n(38));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}function y(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var w=function(t){b(e,o.NamedObject);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,null,[{key:"drawLine",value:function(t,e,n,r,i){t.beginPath(),t.moveTo(.5+(e<<0),.5+(n<<0)),t.lineTo(.5+(r<<0),.5+(i<<0)),t.stroke()}},{key:"drawLines",value:function(t,n){var r,i=n.length;for(t.beginPath(),t.moveTo(n[0].x,n[0].y),r=1;r<i;r++)t.lineTo(n[r].x,n[r].y);if(e.isChrome)for(t.moveTo(n[0].x,n[0].y),r=1;r<i;r++)t.lineTo(n[r].x,n[r].y);t.stroke()}},{key:"drawDashedLine",value:function(t,e,n,r,i,o,a){o<2&&(o=2);var s=r-e,u=i-n;if(t.beginPath(),0===u){for(var c=s/o+.5<<0,l=0;l<c;l++)t.rect(e,n,a,1),e+=o;t.fill()}else{for(var h=Math.sqrt(s*s+u*u)/o+.5<<0,d=(s/=h)*a/o,p=(u/=h)*a/o,f=0;f<h;f++)t.moveTo(e+.5,n+.5),t.lineTo(e+.5+d,n+.5+p),e+=s,n+=u;t.stroke()}}},{key:"createHorzDashedLine",value:function(t,e,n,r,i,o){i<2&&(i=2);for(var a=(n-e)/i+.5<<0,s=0;s<a;s++)t.rect(e,r,o,1),e+=i}},{key:"createRectangles",value:function(t,e){t.beginPath();var n,r,i=e.length;for(r=0;r<i;r++)n=e[r],t.rect(n.x,n.y,n.w,n.h)}},{key:"createPolygon",value:function(t,e){t.beginPath(),t.moveTo(e[0].x+.5,e[0].y+.5);var n,r=e.length;for(n=1;n<r;n++)t.lineTo(e[n].x+.5,e[n].y+.5);t.closePath()}},{key:"drawString",value:function(t,e,n){var r=t.measureText(e).width;return!(n.w<r)&&(t.fillText(e,n.x,n.y),n.x+=r,n.w-=r,!0)}}]),e}();e.Plotter=w,w.isChrome=null!==navigator.userAgent.toLowerCase().match(/chrome/);var C=function(t){b(e,w);function e(t){var n;return g(this,e),(n=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._color=l.Theme.Color.Background,n}return m(e,[{key:"getColor",value:function(){return this._color}},{key:"setColor",value:function(t){this._color=t}},{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTheme(this.getFrameName());t.fillStyle=r.getColor(this._color),t.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}]),e}();e.BackgroundPlotter=C;var E=function(t){b(e,C);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getRange(this.getAreaName()),o=e.getTheme(this.getFrameName()),s=n.getRect();if(!n.isChanged()&&!r.isUpdated()&&!i.isUpdated()){var u=r.getFirstIndex(),c=r.getLastIndex()-2,l=Math.max(u,c);s.X=r.toColumnLeft(l),s.Width=n.getRight()-s.X}t.fillStyle=o.getColor(this._color),t.fillRect(s.X,s.Y,s.Width,s.Height)}}]),e}();e.MainAreaBackgroundPlotter=E;var P=function(t){b(e,C);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=this.getAreaName(),r=e.getArea(n),i=e.getRange(n.substring(0,n.lastIndexOf("Range")));if("main"===i.getNameObject().getCompAt(2)||r.isChanged()||i.isUpdated()){var o=e.getTheme(this.getFrameName());t.fillStyle=o.getColor(this._color),t.fillRect(r.getLeft(),r.getTop(),r.getWidth(),r.getHeight())}}}]),e}();e.RangeAreaBackgroundPlotter=P;var A=function(t){b(e,C);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName());if(n.isChanged()||r.isUpdated()){var i=e.getTheme(this.getFrameName());t.fillStyle=i.getColor(this._color),t.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}}]),e}();e.TimelineAreaBackgroundPlotter=A;var S=function(t){b(e,o.NamedObject);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getRange(this.getAreaName()),o=!1;if(!n.isChanged()&&!r.isUpdated()&&!i.isUpdated()){var s=r.getFirstIndex(),u=r.getLastIndex(),c=Math.max(s,u-2),h=r.toColumnLeft(c);t.save(),t.rect(h,n.getTop(),n.getRight()-h,n.getHeight()),t.clip(),o=!0}var d=e.getTheme(this.getFrameName());t.fillStyle=d.getColor(l.Theme.Color.Grid0),t.beginPath();var p=4,f=1;w.isChrome&&(p=4,f=1);var _=i.getGradations();for(var g in _)w.createHorzDashedLine(t,n.getLeft(),n.getRight(),i.toY(_[g]),p,f);t.fill(),o&&t.restore()}}]),e}();e.CGridPlotter=S;var x=function(t){b(e,o.NamedObject);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getDataSource(this.getDataSourceName());if(!(n.getDataCount()<1)){var r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),o=e.getRange(this.getAreaName());if(0!==o.getRange()){var u,c=e.getTheme(this.getFrameName()),h=s.Util.isInstance(c,l.DarkTheme),d=i.getFirstIndex(),p=i.getLastIndex();u=r.isChanged()||i.isUpdated()||o.isUpdated()?d:Math.max(d,p-2);for(var f=i.getColumnWidth(),_=i.getItemWidth(),g=i.toItemLeft(u),v=i.toItemCenter(u),m=[],y=[],b=[],C=[],E=u;E<p;E++){var P=n.getDataAt(E),A=o.toY(P.high),S=o.toY(P.low),x=P.open,O=P.close;if(O>x){var k=o.toY(O),T=o.toY(x),I=Math.max(T-k,1);I>1&&_>1&&h?m.push({x:g+.5,y:k+.5,w:_-1,h:I-1}):y.push({x:g,y:k,w:Math.max(_,1),h:Math.max(I,1)}),P.high>O&&(A=Math.min(A,k-1),y.push({x:v,y:A,w:1,h:k-A})),x>P.low&&(S=Math.max(S,T+1),y.push({x:v,y:T,w:1,h:S-T}))}else if(O===x){var N=o.toY(O);b.push({x:g,y:N,w:Math.max(_,1),h:1}),P.high>O&&(A=Math.min(A,N-1)),x>P.low&&(S=Math.max(S,N+1)),A<S&&b.push({x:v,y:A,w:1,h:S-A})}else{var R=o.toY(x),M=o.toY(O),D=Math.max(M-R,1);C.push({x:g,y:R,w:Math.max(_,1),h:Math.max(D,1)}),P.high>x&&(A=Math.min(A,R-1)),O>P.low&&(S=Math.max(S,M+1)),A<S&&C.push({x:v,y:A,w:1,h:S-A})}g+=f,v+=f}m.length>0&&(t.strokeStyle=c.getColor(l.Theme.Color.Positive),w.createRectangles(t,m),t.stroke()),y.length>0&&(t.fillStyle=c.getColor(l.Theme.Color.Positive),w.createRectangles(t,y),t.fill()),b.length>0&&(t.fillStyle=c.getColor(l.Theme.Color.Negative),w.createRectangles(t,b),t.fill()),C.length>0&&(t.fillStyle=c.getColor(l.Theme.Color.Negative),w.createRectangles(t,C),t.fill())}}}}]),e}();e.CandlestickPlotter=x;var O=function(t){b(e,w);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getDataSource(this.getDataSourceName());if(s.Util.isInstance(n,d.MainDataSource)&&!(n.getDataCount()<1)){var r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),o=e.getRange(this.getAreaName());if(0!==o.getRange()){var u,c=e.getTheme(this.getFrameName()),h=s.Util.isInstance(c,l.DarkTheme),p=i.getFirstIndex(),f=i.getLastIndex();u=r.isChanged()||i.isUpdated()||o.isUpdated()?p:Math.max(p,f-2);for(var _=i.getColumnWidth(),g=i.getItemWidth(),v=i.toItemLeft(u),m=i.toItemCenter(u),y=[],b=[],C=[],E=[],P=u;P<f;P++){var A=n.getDataAt(P),S=o.toY(A.high),x=o.toY(A.low),O=A.open;P>0&&(O=n.getDataAt(P-1).close);var k=A.close;if(k>O){var T=o.toY(k),I=o.toY(O),N=Math.max(I-T,1);N>1&&g>1&&h?y.push({x:v+.5,y:T+.5,w:g-1,h:N-1}):b.push({x:v,y:T,w:Math.max(g,1),h:Math.max(N,1)}),A.high>k&&(S=Math.min(S,T-1),b.push({x:m,y:S,w:1,h:T-S})),O>A.low&&(x=Math.max(x,I+1),b.push({x:m,y:I,w:1,h:x-I}))}else if(k===O){var R=o.toY(k);C.push({x:v,y:R,w:Math.max(g,1),h:1}),A.high>k&&(S=Math.min(S,R-1)),O>A.low&&(x=Math.max(x,R+1)),S<x&&C.push({x:m,y:S,w:1,h:x-S})}else{var M=o.toY(O),D=o.toY(k),L=Math.max(D-M,1);E.push({x:v,y:M,w:Math.max(g,1),h:Math.max(L,1)}),A.high>O&&(S=Math.min(S,M-1)),k>A.low&&(x=Math.max(x,D+1)),S<x&&E.push({x:m,y:S,w:1,h:x-S})}v+=_,m+=_}y.length>0&&(t.strokeStyle=c.getColor(l.Theme.Color.Positive),w.createRectangles(t,y),t.stroke()),b.length>0&&(t.fillStyle=c.getColor(l.Theme.Color.Positive),w.createRectangles(t,b),t.fill()),C.length>0&&(t.fillStyle=c.getColor(l.Theme.Color.Negative),w.createRectangles(t,C),t.fill()),E.length>0&&(t.fillStyle=c.getColor(l.Theme.Color.Negative),w.createRectangles(t,E),t.fill())}}}}]),e}();e.CandlestickHLCPlotter=O;var k=function(t){b(e,w);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getDataSource(this.getDataSourceName());if(s.Util.isInstance(n,d.MainDataSource)&&!(n.getDataCount()<1)){var r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),o=e.getRange(this.getAreaName());if(0!==o.getRange()){var u,c=e.getTheme(this.getFrameName()),h=i.getFirstIndex(),p=i.getLastIndex();u=r.isChanged()||i.isUpdated()||o.isUpdated()?h:Math.max(h,p-2);for(var f=i.getColumnWidth(),_=i.getItemWidth()>>1,g=i.toItemLeft(u),v=i.toItemCenter(u),m=(i.getItemWidth(),[]),y=[],b=[],C=u;C<p;C++){var E=n.getDataAt(C),P=o.toY(E.high),A=o.toY(E.low),S=Math.max(A-P,1);if(E.close>E.open){var x=o.toY(E.close),O=o.toY(E.open);m.push({x:v,y:P,w:1,h:S}),m.push({x:g,y:x,w:_,h:1}),m.push({x:v,y:O,w:_,h:1})}else if(E.close===E.open){var k=o.toY(E.close);y.push({x:v,y:P,w:1,h:S}),y.push({x:g,y:k,w:_,h:1}),y.push({x:v,y:k,w:_,h:1})}else{var T=o.toY(E.open),I=o.toY(E.close);b.push({x:v,y:P,w:1,h:S}),b.push({x:g,y:T,w:_,h:1}),b.push({x:v,y:I,w:_,h:1})}g+=f,v+=f,f}m.length>0&&(t.fillStyle=c.getColor(l.Theme.Color.Positive),w.createRectangles(t,m),t.fill()),y.length>0&&(t.fillStyle=c.getColor(l.Theme.Color.Negative),w.createRectangles(t,y),t.fill()),b.length>0&&(t.fillStyle=c.getColor(l.Theme.Color.Negative),w.createRectangles(t,b),t.fill())}}}}]),e}();e.OHLCPlotter=k;var T=function(t){b(e,w);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getDataSource(this.getDataSourceName()),o=e.getTheme(this.getFrameName());t.font=o.getFont(l.Theme.Font.Default),t.textAlign="left",t.textBaseline="top",t.fillStyle=o.getColor(l.Theme.Color.Text4);var u={x:n.getLeft()+4,y:n.getTop()+2,w:n.getWidth()-8,h:20},c=r.getSelectedIndex();if(!(c<0)){var h=i.getDataAt(c),d=i.getDecimalDigits(),p=new Date(h.date),f=(p.getFullYear(),s.Util.formatTime(p.getMonth()+1),s.Util.formatTime(p.getDate()),s.Util.formatTime(p.getHours()),s.Util.formatTime(p.getMinutes()),e.getLanguage());if("zh-cn"===f){if(!w.drawString(t,"  : "+h.open.toFixed(d),u))return;if(!w.drawString(t,"  : "+h.high.toFixed(d),u))return;if(!w.drawString(t,"  : "+h.low.toFixed(d),u))return;if(!w.drawString(t,"  : "+h.close.toFixed(d),u))return}else if("en-us"===f){if(!w.drawString(t,"  O: "+h.open.toFixed(d),u))return;if(!w.drawString(t,"  H: "+h.high.toFixed(d),u))return;if(!w.drawString(t,"  L: "+h.low.toFixed(d),u))return;if(!w.drawString(t,"  C: "+h.close.toFixed(d),u))return}else if("zh-tw"===f){if(!w.drawString(t,"  : "+h.open.toFixed(d),u))return;if(!w.drawString(t,"  : "+h.high.toFixed(d),u))return;if(!w.drawString(t,"  : "+h.low.toFixed(d),u))return;if(!w.drawString(t,"  : "+h.close.toFixed(d),u))return}if(c>0){if("zh-cn"===f){if(!w.drawString(t,"  : ",u))return}else if("en-us"===f){if(!w.drawString(t,"  CHANGE: ",u))return}else if("zh-tw"===f&&!w.drawString(t,"  : ",u))return;var _,g=i.getDataAt(c-1);if((_=(h.close-g.close)/g.close*100?(h.close-g.close)/g.close*100:0)>=0?(_=" "+_.toFixed(2),t.fillStyle=o.getColor(l.Theme.Color.TextPositive)):(_=_.toFixed(2),t.fillStyle=o.getColor(l.Theme.Color.TextNegative)),!w.drawString(t,_,u))return;if(t.fillStyle=o.getColor(l.Theme.Color.Text4),!w.drawString(t," %",u))return}var v;if(v=(h.high-h.low)/h.low*100?(h.high-h.low)/h.low*100:0,"zh-cn"===f){if(!w.drawString(t,"  : "+v.toFixed(2)+" %",u))return}else if("en-us"===f){if(!w.drawString(t,"  AMPLITUDE: "+v.toFixed(2)+" %",u))return}else if("zh-tw"===f&&!w.drawString(t,"  : "+v.toFixed(2)+" %",u))return;var m=e.getDataProvider(this.getAreaName()+".secondary");if(void 0!==m){var y,b=m.getIndicator(),C=b.getOutputCount();for(y=0;y<C;y++){var E=b.getOutputAt(y),P=E.execute(c);if(!isNaN(P)){var A="  "+E.getName()+": "+P.toFixed(d),S=E.getColor();if(void 0===S&&(S=l.Theme.Color.Indicator0+y),t.fillStyle=o.getColor(S),!w.drawString(t,A,u))return}}}}}}]),e}();e.MainInfoPlotter=T;var I=function(t){b(e,o.NamedObject);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getRange(this.getAreaName());if(0!==i.getRange()){var o=e.getDataProvider(this.getName());if(s.Util.isInstance(o,h.IndicatorDataProvider)){var u,d=e.getTheme(this.getFrameName()),p=r.getColumnWidth(),f=r.getFirstIndex(),_=r.getLastIndex();u=n.isChanged()||r.isUpdated()||i.isUpdated()?f:Math.max(f,_-2);var g,v,m=o.getIndicator(),y=m.getOutputCount();for(v=0;v<y;v++){var b=(g=m.getOutputAt(v)).getStyle();b===c.OutputExpr.outputStyle.VolumeStick?this.drawVolumeStick(t,d,e.getDataSource(this.getDataSourceName()),u,_,r.toItemLeft(u),p,r.getItemWidth(),i):b===c.OutputExpr.outputStyle.MACDStick?this.drawMACDStick(t,d,g,u,_,r.toItemLeft(u),p,r.getItemWidth(),i):b===c.OutputExpr.outputStyle.SARPoint&&this.drawSARPoint(t,d,g,u,_,r.toItemCenter(u),p,r.getItemWidth(),i)}var C=r.toColumnLeft(u),E=r.toItemCenter(u);for(t.save(),t.rect(C,n.getTop(),n.getRight()-C,n.getHeight()),t.clip(),t.translate(.5,.5),v=0;v<y;v++){var P=E;if((g=m.getOutputAt(v)).getStyle()===c.OutputExpr.outputStyle.Line){var A=void 0,S=[];u>f&&(A=g.execute(u-1),!1===isNaN(A)&&S.push({x:P-p,y:i.toY(A)}));for(var x=u;x<_;x++,P+=p)A=g.execute(x),!1===isNaN(A)&&S.push({x:P,y:i.toY(A)});if(S.length>0){var O=g.getColor();void 0===O&&(O=l.Theme.Color.Indicator0+v),t.strokeStyle=d.getColor(O),w.drawLines(t,S)}}}t.restore()}}}},{key:"drawVolumeStick",value:function(t,e,n,r,i,o,a,u,c){for(var h=s.Util.isInstance(e,l.DarkTheme),d=o,p=(c.toY(0),[]),f=[],_=[],g=r;g<i;g++){var v=n.getDataAt(g),m=c.toY(v.volume),y=c.toHeight(v.volume);v.close>v.open?y>1&&u>1&&h?p.push({x:d+.5,y:m+.5,w:u-1,h:y-1}):f.push({x:d,y:m,w:Math.max(u,1),h:Math.max(y,1)}):v.close===v.open&&g>0&&v.close>=n.getDataAt(g-1).close?y>1&&u>1&&h?p.push({x:d+.5,y:m+.5,w:u-1,h:y-1}):f.push({x:d,y:m,w:Math.max(u,1),h:Math.max(y,1)}):_.push({x:d,y:m,w:Math.max(u,1),h:Math.max(y,1)}),d+=a}p.length>0&&(t.strokeStyle=e.getColor(l.Theme.Color.Positive),w.createRectangles(t,p),t.stroke()),f.length>0&&(t.fillStyle=e.getColor(l.Theme.Color.Positive),w.createRectangles(t,f),t.fill()),_.length>0&&(t.fillStyle=e.getColor(l.Theme.Color.Negative),w.createRectangles(t,_),t.fill())}},{key:"drawMACDStick",value:function(t,e,n,r,i,o,a,s,u){for(var c=o,h=u.toY(0),d=[],p=[],f=[],_=[],g=r>0?n.execute(r-1):NaN,v=r;v<i;v++){var m=n.execute(v);if(m>=0){var y=u.toHeight(m);(0===v||m>=g)&&y>1&&s>1?d.push({x:c+.5,y:h-y+.5,w:s-1,h:y-1}):f.push({x:c,y:h-y,w:Math.max(s,1),h:Math.max(y,1)})}else{var b=u.toHeight(-m);(0===v||m>=g)&&b>1&&s>1?p.push({x:c+.5,y:h+.5,w:s-1,h:b-1}):_.push({x:c,y:h,w:Math.max(s,1),h:Math.max(b,1)})}g=m,c+=a}d.length>0&&(t.strokeStyle=e.getColor(l.Theme.Color.Positive),w.createRectangles(t,d),t.stroke()),p.length>0&&(t.strokeStyle=e.getColor(l.Theme.Color.Negative),w.createRectangles(t,p),t.stroke()),f.length>0&&(t.fillStyle=e.getColor(l.Theme.Color.Positive),w.createRectangles(t,f),t.fill()),_.length>0&&(t.fillStyle=e.getColor(l.Theme.Color.Negative),w.createRectangles(t,_),t.fill())}},{key:"drawSARPoint",value:function(t,e,n,r,i,o,a,s,u){var c=s>>1;c<.5&&(c=.5),c>4&&(c=4);var h=o,d=h+c,p=2*Math.PI;t.save(),t.translate(.5,.5),t.strokeStyle=e.getColor(l.Theme.Color.Indicator3),t.beginPath();for(var f=r;f<i;f++){var _=u.toY(n.execute(f));t.moveTo(d,_),t.arc(h,_,c,0,p),h+=a,d+=a}t.stroke(),t.restore()}}]),e}();e.IndicatorPlotter=I;var N=function(t){b(e,w);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getDataProvider(this.getAreaName()+".secondary"),o=e.getTheme(this.getFrameName());t.font=o.getFont(l.Theme.Font.Default),t.textAlign="left",t.textBaseline="top",t.fillStyle=o.getColor(l.Theme.Color.Text4);var s,u={x:n.getLeft()+4,y:n.getTop()+2,w:n.getWidth()-8,h:20},c=i.getIndicator();switch(c.getParameterCount()){case 0:s=c.getName();break;case 1:s=c.getName()+"("+c.getParameterAt(0).getValue()+")";break;case 2:s=c.getName()+"("+c.getParameterAt(0).getValue()+","+c.getParameterAt(1).getValue()+")";break;case 3:s=c.getName()+"("+c.getParameterAt(0).getValue()+","+c.getParameterAt(1).getValue()+","+c.getParameterAt(2).getValue()+")";break;case 4:s=c.getName()+"("+c.getParameterAt(0).getValue()+","+c.getParameterAt(1).getValue()+","+c.getParameterAt(2).getValue()+","+c.getParameterAt(3).getValue()+")";break;default:return}if(w.drawString(t,s,u)){var h=r.getSelectedIndex();if(!(h<0)){var d,p,f,_,g,v=c.getOutputCount();for(g=0;g<v;g++)if(p=(d=c.getOutputAt(g)).execute(h),!isNaN(p)&&(f="  "+d.getName()+": "+p.toFixed(2),void 0===(_=d.getColor())&&(_=l.Theme.Color.Indicator0+g),t.fillStyle=o.getColor(_),!w.drawString(t,f,u)))return}}}}]),e}();e.IndicatorInfoPlotter=N;var R=function(t){b(e,o.NamedObject);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=e.getDataSource(this.getDataSourceName());if(!(n.getDataCount()<1)){var r=e.getTimeline(this.getDataSourceName());if(!(r.getInnerWidth()<r.getColumnWidth())){var i=e.getRange(this.getAreaName());if(0!==i.getRange()){var o=e.getDataProvider(this.getAreaName()+".main"),s=r.getFirstIndex(),u=s+r.getLastIndex()>>1,c=e.getTheme(this.getFrameName());t.font=c.getFont(l.Theme.Font.Default),t.textBaseline="middle",t.fillStyle=c.getColor(l.Theme.Color.Text4),t.strokeStyle=c.getColor(l.Theme.Color.Text4);var h=n.getDecimalDigits();this.drawMark(t,o.getMinValue(),h,i.toY(o.getMinValue()),s,u,o.getMinValueIndex(),r),this.drawMark(t,o.getMaxValue(),h,i.toY(o.getMaxValue()),s,u,o.getMaxValueIndex(),r)}}}}},{key:"drawMark",value:function(t,e,n,r,i,o,a,u){var c,l,h,d;a>o?(t.textAlign="right",h=(c=u.toItemCenter(a)-4)-3,d=(l=c-7)-4):(t.textAlign="left",h=(c=u.toItemCenter(a)+4)+3,d=(l=c+7)+4),w.drawLine(t,c,r,l,r),w.drawLine(t,c,r,h,r+2),w.drawLine(t,c,r,h,r-2),t.fillText(s.Util.fromFloat(e,n),d,r)}}]),e}();e.MinMaxPlotter=R;var M=function(t){b(e,w);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var n=a.ChartManager.instance,r=n.getArea(this.getAreaName()),i=n.getTimeline(this.getDataSourceName());if(r.isChanged()||i.isUpdated()){var o=n.getDataSource(this.getDataSourceName());if(!(o.getDataCount()<2)){var s,u=o.getDataAt(1).date-o.getDataAt(0).date,c=e.TIME_INTERVAL.length;for(s=0;s<c&&!(u<e.TIME_INTERVAL[s]);s++);for(;s<c&&!(e.TIME_INTERVAL[s]%u==0&&e.TIME_INTERVAL[s]/u*i.getColumnWidth()>60);s++);var h=i.getFirstIndex(),d=i.getLastIndex(),p=60*(new Date).getTimezoneOffset()*1e3,f=n.getTheme(this.getFrameName());t.font=f.getFont(l.Theme.Font.Default),t.textAlign="center",t.textBaseline="middle";for(var _=n.getLanguage(),g=[],v=r.getTop(),m=r.getMiddle(),y=h;y<d;y++){var b=o.getDataAt(y).date,C=b-p,E=new Date(b),P=E.getFullYear(),A=E.getMonth()+1,S=E.getDate(),x=E.getHours(),O=E.getMinutes(),k="";if(s<c){if(C%Math.max(e.TP_DAY,e.TIME_INTERVAL[s])==0)"zh-cn"===_?k=A.toString()+""+S.toString()+"":"zh-tw"===_?k=A.toString()+""+S.toString()+"":"en-us"===_&&(k=e.MonthConvert[A]+" "+S.toString()),t.fillStyle=f.getColor(l.Theme.Color.Text4);else if(C%e.TIME_INTERVAL[s]==0){var T=O.toString();O<10&&(T="0"+T),k=x.toString()+":"+T,t.fillStyle=f.getColor(l.Theme.Color.Text2)}}else 1===S&&x<u/e.TP_HOUR&&(1===A?(k=P.toString(),"zh-cn"===_?k+="":"zh-tw"===_&&(k+="")):"zh-cn"===_?k=A.toString()+"":"zh-tw"===_?k=A.toString()+"":"en-us"===_&&(k=e.MonthConvert[A]),t.fillStyle=f.getColor(l.Theme.Color.Text4));if(k.length>0){var I=i.toItemCenter(y);g.push({x:I,y:v,w:1,h:4}),t.fillText(k,I,m)}}g.length>0&&(t.fillStyle=f.getColor(l.Theme.Color.Grid1),w.createRectangles(t,g),t.fill())}}}}]),e}();e.TimelinePlotter=M,M.TP_MINUTE=6e4,M.TP_HOUR=60*M.TP_MINUTE,M.TP_DAY=24*M.TP_HOUR,M.TIME_INTERVAL=[5*M.TP_MINUTE,10*M.TP_MINUTE,15*M.TP_MINUTE,30*M.TP_MINUTE,M.TP_HOUR,2*M.TP_HOUR,3*M.TP_HOUR,6*M.TP_HOUR,12*M.TP_HOUR,M.TP_DAY,2*M.TP_DAY],M.MonthConvert={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."};var D=function(t){b(e,o.NamedObject);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"getRequiredWidth",value:function(t,e){var n=a.ChartManager.instance.getTheme(this.getFrameName());return t.font=n.getFont(l.Theme.Font.Default),t.measureText((Math.floor(e)+.88).toString()).width+16}},{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=this.getAreaName(),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),o=e.getRange(i);if(0!==o.getRange()){if("main"===o.getNameObject().getCompAt(2));else if(!r.isChanged()&&!o.isUpdated())return;var u=o.getGradations();if(0!==u.length){var c=r.getLeft(),h=r.getRight(),d=r.getCenter(),p=e.getTheme(this.getFrameName());t.font=p.getFont(l.Theme.Font.Default),t.textAlign="center",t.textBaseline="middle",t.fillStyle=p.getColor(l.Theme.Color.Text2);var f=[];for(var _ in u){var g=o.toY(u[_]);f.push({x:c,y:g,w:6,h:1}),f.push({x:h-6,y:g,w:6,h:1}),t.fillText(s.Util.fromFloat(u[_],2),d,g)}f.length>0&&(t.fillStyle=p.getColor(l.Theme.Color.Grid1),w.createRectangles(t,f),t.fill())}}}}]),e}();e.RangePlotter=D;var L=function(t){b(e,o.NamedObject);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){return this._Draw_(t)}},{key:"_Draw_",value:function(t){if(!1!==this.Update()&&!1!==this.updateData()){this.m_top=this.m_pArea.getTop(),this.m_bottom=this.m_pArea.getBottom(),this.m_left=this.m_pArea.getLeft(),this.m_right=this.m_pArea.getRight(),t.save(),t.rect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top),t.clip();var e=a.ChartManager.instance.getChart()._depthData;this.x_offset=0,this.y_offset=0;var n={},r={};n.x=this.m_left+e.array[this.m_ask_si].amounts*this.m_Step,n.y=this.m_pRange.toY(e.array[this.m_ask_si].rate),r.x=this.m_left+e.array[this.m_bid_si].amounts*this.m_Step,r.y=this.m_pRange.toY(e.array[this.m_bid_si].rate),Math.abs(n.y-r.y)<1&&(this.y_offset=1),this.x_offset=1,this.DrawBackground(t),this.UpdatePoints(),this.FillBlack(t),this.DrawGradations(t),this.DrawLine(t),t.restore()}}},{key:"DrawBackground",value:function(t){t.fillStyle=this.m_pTheme.getColor(l.Theme.Color.Background),t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top);var e=a.ChartManager.instance.getChart()._depthData;if(0===this.m_mode){var n=this.m_pRange.toY(e.array[this.m_ask_si].rate)-this.y_offset,r=this.m_pRange.toY(e.array[this.m_bid_si].rate)+this.y_offset,i=t.createLinearGradient(this.m_left,0,this.m_right,0);i.addColorStop(0,this.m_pTheme.getColor(l.Theme.Color.Background)),i.addColorStop(1,this.m_pTheme.getColor(l.Theme.Color.PositiveDark)),t.fillStyle=i,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,n-this.m_top);var o=t.createLinearGradient(this.m_left,0,this.m_right,0);o.addColorStop(0,this.m_pTheme.getColor(l.Theme.Color.Background)),o.addColorStop(1,this.m_pTheme.getColor(l.Theme.Color.NegativeDark)),t.fillStyle=o,t.fillRect(this.m_left,r,this.m_right-this.m_left,this.m_bottom-r)}else if(1===this.m_mode){var s=t.createLinearGradient(this.m_left,0,this.m_right,0);s.addColorStop(0,this.m_pTheme.getColor(l.Theme.Color.Background)),s.addColorStop(1,this.m_pTheme.getColor(l.Theme.Color.PositiveDark)),t.fillStyle=s,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}else if(2===this.m_mode){var u=t.createLinearGradient(this.m_left,0,this.m_right,0);u.addColorStop(0,this.m_pTheme.getColor(l.Theme.Color.Background)),u.addColorStop(1,this.m_pTheme.getColor(l.Theme.Color.NegativeDark)),t.fillStyle=u,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}}},{key:"DrawLine",value:function(t){if(0===this.m_mode||1===this.m_mode){t.strokeStyle=this.m_pTheme.getColor(l.Theme.Color.Positive),t.beginPath(),t.moveTo(Math.floor(this.m_ask_points[0].x)+.5,Math.floor(this.m_ask_points[0].y)+.5);for(var e=1;e<this.m_ask_points.length;e++)t.lineTo(Math.floor(this.m_ask_points[e].x)+.5,Math.floor(this.m_ask_points[e].y)+.5);t.stroke()}if(0===this.m_mode||2===this.m_mode){t.strokeStyle=this.m_pTheme.getColor(l.Theme.Color.Negative),t.beginPath(),t.moveTo(this.m_bid_points[0].x+.5,this.m_bid_points[0].y+.5);for(var n=1;n<this.m_bid_points.length;n++)t.lineTo(this.m_bid_points[n].x+.5,this.m_bid_points[n].y+.5);t.stroke()}}},{key:"UpdatePoints",value:function(){var t=a.ChartManager.instance.getChart()._depthData;this.m_ask_points=[];var e={};e.x=Math.floor(this.m_left),e.y=Math.floor(this.m_pRange.toY(t.array[this.m_ask_si].rate)-this.y_offset),this.m_ask_points.push(e);for(var n=0,r=this.m_ask_si;r>=this.m_ask_ei;r--){var i={},o={};r===this.m_ask_si?(i.x=Math.floor(this.m_left+t.array[r].amounts*this.m_Step+this.x_offset),i.y=Math.floor(this.m_pRange.toY(t.array[r].rate)-this.y_offset),this.m_ask_points.push(i),n=1):(i.x=Math.floor(this.m_left+t.array[r].amounts*this.m_Step+this.x_offset),i.y=Math.floor(this.m_ask_points[n].y),o.x=Math.floor(i.x),o.y=Math.floor(this.m_pRange.toY(t.array[r].rate)-this.y_offset),this.m_ask_points.push(i),n++,this.m_ask_points.push(o),n++)}this.m_bid_points=[];var s={};s.x=Math.floor(this.m_left),s.y=Math.ceil(this.m_pRange.toY(t.array[this.m_bid_si].rate)+this.y_offset),this.m_bid_points.push(s);for(var u=0,c=this.m_bid_si;c<=this.m_bid_ei;c++){var l={},h={};c===this.m_bid_si?(l.x=Math.floor(this.m_left+t.array[c].amounts*this.m_Step+this.x_offset),l.y=Math.ceil(this.m_pRange.toY(t.array[c].rate)+this.y_offset),this.m_bid_points.push(l),u=1):(l.x=Math.floor(this.m_left+t.array[c].amounts*this.m_Step+this.x_offset),l.y=Math.ceil(this.m_bid_points[u].y),h.x=Math.floor(l.x),h.y=Math.ceil(this.m_pRange.toY(t.array[c].rate)+this.x_offset),this.m_bid_points.push(l),u++,this.m_bid_points.push(h),u++)}}},{key:"updateData",value:function(){var t=a.ChartManager.instance.getChart()._depthData;if(null===t.array)return!1;if(t.array.length<=50)return!1;var e=this.m_pRange.getOuterMinValue(),n=this.m_pRange.getOuterMaxValue();this.m_ask_si=t.asks_si,this.m_ask_ei=t.asks_si;for(var r=t.asks_si;r>=t.asks_ei&&t.array[r].rate<n;r--)this.m_ask_ei=r;this.m_bid_si=t.bids_si,this.m_bid_ei=t.bids_si;for(var i=t.bids_si;i<=t.bids_ei&&t.array[i].rate>e;i++)this.m_bid_ei=i;return this.m_ask_ei===this.m_ask_si?this.m_mode=2:this.m_bid_ei===this.m_bid_si?this.m_mode=1:this.m_mode=0,this.m_Step=this.m_pArea.getWidth(),0===this.m_mode?this.m_ask_ei===t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=Math.min(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts):this.m_ask_ei!==t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=t.array[this.m_bid_ei].amounts:this.m_ask_ei===t.asks_ei&&this.m_bid_ei!==t.bids_ei?this.m_Step/=t.array[this.m_ask_ei].amounts:this.m_ask_ei!==t.asks_ei&&this.m_bid_ei!==t.bids_ei&&(this.m_Step/=Math.max(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts)):1===this.m_mode?this.m_Step/=t.array[this.m_ask_ei].amounts:2===this.m_mode&&(this.m_Step/=t.array[this.m_bid_ei].amounts),!0}},{key:"Update",value:function(){this.m_pMgr=a.ChartManager.instance;var t=this.getAreaName();if(this.m_pArea=this.m_pMgr.getArea(t),null===this.m_pArea)return!1;var e=t.substring(0,t.lastIndexOf("Range"));return this.m_pRange=this.m_pMgr.getRange(e),null!==this.m_pRange&&0!==this.m_pRange.getRange()&&(this.m_pTheme=this.m_pMgr.getTheme(this.getFrameName()),null!==this.m_pTheme)}},{key:"DrawGradations",value:function(t){var e=a.ChartManager.instance,n=this.getAreaName(),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),o=e.getRange(i);if(0!==o.getRange()){var s=o.getGradations();if(0!==s.length){var u=r.getLeft(),c=r.getRight(),h=[];for(var d in s){var p=o.toY(s[d]);h.push({x:u,y:p,w:6,h:1}),h.push({x:c-6,y:p,w:6,h:1})}if(h.length>0){var f=e.getTheme(this.getFrameName());t.fillStyle=f.getColor(l.Theme.Color.Grid1),w.createRectangles(t,h),t.fill()}}}}},{key:"FillBlack",value:function(t){var e=this.m_ask_points,n=this.m_bid_points,r={},i={};r.x=this.m_right,r.y=e[0].y,i.x=this.m_right,i.y=e[e.length-1].y;var o={},a={};o.x=this.m_right,o.y=n[0].y-1,a.x=this.m_right,a.y=n[n.length-1].y,e.unshift(r),e.push(i),n.unshift(o),n.push(a),t.fillStyle=this.m_pTheme.getColor(l.Theme.Color.Background),t.beginPath(),t.moveTo(Math.floor(e[0].x)+.5,Math.floor(e[0].y)+.5);for(var s=1;s<e.length;s++)t.lineTo(Math.floor(e[s].x)+.5,Math.floor(e[s].y)+.5);t.fill(),t.beginPath(),t.moveTo(Math.floor(n[0].x)+.5,Math.floor(n[0].y)+.5);for(var u=1;u<n.length;u++)t.lineTo(Math.floor(n[u].x)+.5,Math.floor(n[u].y)+.5);t.fill(),e.shift(),e.pop(),n.shift(),n.pop()}},{key:"DrawTickerGraph",value:function(t){var e=a.ChartManager.instance.getDataSource(this.getDataSourceName()),n=e._dataItems[e._dataItems.length-1].close;this.m_left,this.m_pRange.toY(n);t.fillStyle=this.m_pTheme.getColor(l.Theme.Color.Mark),t.strokeStyle=this.m_pTheme.getColor(l.Theme.Color.Mark)}}]),e}();e.COrderGraphPlotter=L;var j=function(t){b(e,w);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=(e.getTimeline(this.getDataSourceName()),this.getAreaName()),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),o=e.getRange(i);if(0!==o.getRange()){var u=e.getDataSource(this.getDataSourceName());if(!(u.getDataCount()<1)){var c=e.getTheme(this.getFrameName());t.font=c.getFont(l.Theme.Font.Default),t.textAlign="left",t.textBaseline="middle",t.fillStyle=c.getColor(l.Theme.Color.RangeMark),t.strokeStyle=c.getColor(l.Theme.Color.RangeMark);var h=u.getDataAt(u.getDataCount()-1).volume,d=o.toY(h),p=r.getLeft()+1;w.drawLine(t,p,d,p+7,d),w.drawLine(t,p,d,p+3,d+2),w.drawLine(t,p,d,p+3,d-2),t.fillText(s.Util.fromFloat(h,2),p+10,d)}}}}]),e}();e.LastVolumePlotter=j;var F=function(t){b(e,w);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=(e.getTimeline(this.getDataSourceName()),this.getAreaName()),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),o=e.getRange(i);if(0!==o.getRange()){var u=e.getDataSource(this.getDataSourceName());if(!(u.getDataCount()<1)){var c=u._dataItems[u._dataItems.length-1].close;if(!(c<=o.getMinValue()||c>=o.getMaxValue())){var h=e.getTheme(this.getFrameName());t.font=h.getFont(l.Theme.Font.Default),t.textAlign="left",t.textBaseline="middle",t.fillStyle=h.getColor(l.Theme.Color.RangeMark),t.strokeStyle=h.getColor(l.Theme.Color.RangeMark);var d=o.toY(c),p=r.getLeft()+1;w.drawLine(t,p,d,p+7,d),w.drawLine(t,p,d,p+3,d+2),w.drawLine(t,p,d,p+3,d-2),t.fillText(s.Util.fromFloat(c,u.getDecimalDigits()),p+10,d)}}}}}]),e}();e.LastClosePlotter=F;var U=function(t){b(e,w);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance;if(e._drawingTool===a.ChartManager.DrawingTool.CrossCursor){var n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName());if(!(r.getSelectedIndex()<0)){var i=e.getRange(this.getAreaName()),o=e.getTheme(this.getFrameName());t.strokeStyle=o.getColor(l.Theme.Color.Cursor);var s=r.toItemCenter(r.getSelectedIndex());w.drawLine(t,s,n.getTop()-1,s,n.getBottom());var u=i.getSelectedPosition();u>=0&&w.drawLine(t,n.getLeft(),u,n.getRight(),u)}}}}]),e}();e.SelectionPlotter=U;var V=function(t){b(e,w);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var n=a.ChartManager.instance,r=n.getArea(this.getAreaName()),o=n.getTimeline(this.getDataSourceName());if(!(o.getSelectedIndex()<0)){var u=n.getDataSource(this.getDataSourceName());if(s.Util.isInstance(u,d.MainDataSource)){var c=n.getTheme(this.getFrameName()),h=n.getLanguage(),p=o.toItemCenter(o.getSelectedIndex());t.fillStyle=c.getColor(l.Theme.Color.Background),t.fillRect(p-52.5,r.getTop()+2.5,106,18),t.strokeStyle=c.getColor(l.Theme.Color.Grid3),t.strokeRect(p-52.5,r.getTop()+2.5,106,18),t.font=c.getFont(l.Theme.Font.Default),t.textAlign="center",t.textBaseline="middle",t.fillStyle=c.getColor(l.Theme.Color.Text4);var f=new Date(u.getDataAt(o.getSelectedIndex()).date),_=f.getMonth()+1,g=f.getDate(),v=f.getHours(),m=f.getMinutes(),y=f.getSeconds(),b=_.toString(),w=g.toString(),C=v.toString(),E=m.toString(),P=y.toString();m<10&&(E="0"+E),y<10&&(P="0"+P);var A="";"zh-cn"===h?A=b+""+w+"  "+C+":"+E:"zh-tw"===h?A=b+""+w+"  "+C+":"+E:"en-us"===h&&(A=e.MonthConvert[_]+" "+w+"  "+C+":"+E),i.default.instance.range<6e4&&(A+=":"+P),t.fillText(A,p,r.getMiddle())}}}}]),e}();e.TimelineSelectionPlotter=V,V.MonthConvert={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."};var B=function(t){b(e,o.NamedObject);function e(t){return g(this,e),y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return m(e,[{key:"Draw",value:function(t){var e=a.ChartManager.instance,n=this.getAreaName(),r=e.getArea(n);if(!(e.getTimeline(this.getDataSourceName()).getSelectedIndex()<0)){var i=n.substring(0,n.lastIndexOf("Range")),o=e.getRange(i);if(!(0===o.getRange()||o.getSelectedPosition()<0)){var u=o.getSelectedValue();if(u!==-Number.MAX_VALUE){var c=o.getSelectedPosition();w.createPolygon(t,[{x:r.getLeft(),y:c},{x:r.getLeft()+5,y:c+10},{x:r.getRight()-3,y:c+10},{x:r.getRight()-3,y:c-10},{x:r.getLeft()+5,y:c-10}]);var h=e.getTheme(this.getFrameName());t.fillStyle=h.getColor(l.Theme.Color.Background),t.fill(),t.strokeStyle=h.getColor(l.Theme.Color.Grid4),t.stroke(),t.font=h.getFont(l.Theme.Font.Default),t.textAlign="center",t.textBaseline="middle",t.fillStyle=h.getColor(l.Theme.Color.Text3);var d=2;"main"===o.getNameObject().getCompAt(2)&&(d=e.getDataSource(this.getDataSourceName()).getDecimalDigits()),t.fillText(s.Util.fromFloat(u,d),r.getCenter(),c)}}}}}]),e}();e.RangeSelectionPlotter=B;var W=function(t){b(e,o.NamedObject);function e(t,n){var r;g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).toolObject=n;var i=a.ChartManager.instance.getArea("frame0.k0.main");return null===i?(r.areaPos={left:0,top:0,right:0,bottom:0},y(r)):(r.areaPos={left:i.getLeft(),top:i.getTop(),right:i.getRight(),bottom:i.getBottom()},r.crossPt={},r.normalSize=4,r.selectedSize=6,r.cursorLen=4,r.cursorGapLen=3,r.theme=a.ChartManager.instance.getTheme(r.getFrameName()),r)}return m(e,[{key:"drawCursor",value:function(t){this.drawCrossCursor(t)}},{key:"drawCrossCursor",value:function(t){t.strokeStyle=this.theme.getColor(l.Theme.Color.LineColorNormal),t.fillStyle=this.theme.getColor(l.Theme.Color.LineColorNormal);var e=this.toolObject.getPoint(0).getPosXY();if(null!==e){var n=e.x,r=e.y,i=this.cursorLen,o=this.cursorGapLen;t.fillRect(n,r,1,1),w.drawLine(t,n-i-o,r,n-o,r),w.drawLine(t,n+i+o,r,n+o,r),w.drawLine(t,n,r-i-o,n,r-o),w.drawLine(t,n,r+i+o,n,r+o)}}},{key:"drawCircle",value:function(t,e,n){var r=e.x,i=e.y;t.beginPath(),t.arc(r,i,n,0,2*Math.PI,!1),t.fillStyle=this.theme.getColor(l.Theme.Color.CircleColorFill),t.fill(),t.stroke()}},{key:"drawCtrlPt",value:function(t){t.strokeStyle=this.theme.getColor(l.Theme.Color.CircleColorStroke);for(var e=0;e<this.ctrlPtsNum;e++)this.drawCircle(t,this.ctrlPts[1][e],this.normalSize)}},{key:"highlightCtrlPt",value:function(t){t.strokeStyle=this.theme.getColor(l.Theme.Color.CircleColorStroke);for(var e=0;e<this.ctrlPtsNum;e++)this.toolObject.getPoint(e).getState()===u.CPoint.state.Highlight&&this.drawCircle(t,this.ctrlPts[1][e],this.selectedSize)}},{key:"drawFibRayLines",value:function(t,e,n){for(var r=0;r<this.fiboFansSequence.length;r++){var i=e.y+(100-this.fiboFansSequence[r])/100*(n.y-e.y),o={x:e.x,y:e.y},a={x:n.x,y:i};this.drawRayLines(t,o,a)}}},{key:"drawRayLines",value:function(t,e,n){this.getAreaPos();var r,i={x:e.x,y:e.y},o={x:n.x,y:n.y},a=this.getRectCrossPt(this.areaPos,i,o);r=n.x===e.x?n.y===e.y?n:n.y>e.y?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y}:n.x>e.x?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y},w.drawLine(t,e.x,e.y,r.x,r.y)}},{key:"lenBetweenPts",value:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"getCtrlPts",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[0][t]=this.toolObject.getPoint(t)}},{key:"updateCtrlPtPos",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[1][t]=this.ctrlPts[0][t].getPosXY()}},{key:"getAreaPos",value:function(){var t=a.ChartManager.instance.getArea("frame0.k0.main");this.areaPos=null!==t?{left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())}:{left:0,top:0,right:0,bottom:0}}},{key:"updateDraw",value:function(t){t.strokeStyle=this.theme.getColor(l.Theme.Color.LineColorNormal),this.draw(t),this.drawCtrlPt(t)}},{key:"finishDraw",value:function(t){t.strokeStyle=this.theme.getColor(l.Theme.Color.LineColorNormal),this.draw(t)}},{key:"highlight",value:function(t){t.strokeStyle=this.theme.getColor(l.Theme.Color.LineColorSelected),this.draw(t),this.drawCtrlPt(t),this.highlightCtrlPt(t)}}]),e}();e.CToolPlotter=W;var G=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?w.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y):(this.crossPt=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),w.drawLine(t,this.crossPt[0].x,this.crossPt[0].y,this.crossPt[1].x,this.crossPt[1].y))}}]),e}();e.DrawStraightLinesPlotter=G;var Y=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),w.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y)}}]),e}();e.DrawSegLinesPlotter=Y;var H=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawRayLines(t,this.startPoint,this.endPoint)}}]),e}();e.DrawRayLinesPlotter=H;var z=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).toolObject=n,r.arrowSizeRatio=.03,r.arrowSize=4,r.crossPt={x:-1,y:-1},r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"drawArrow",value:function(t,e,n){var r=this.lenBetweenPts(e,n),i=[n.x-e.x,n.y-e.y];this.crossPt.x=e.x+(1-this.arrowSize/r)*i[0],this.crossPt.y=e.y+(1-this.arrowSize/r)*i[1];var o=[-i[1],i[0]],a={x:o[0],y:o[1]},s={x:0,y:0};o[0]=this.arrowSize*a.x/this.lenBetweenPts(a,s),o[1]=this.arrowSize*a.y/this.lenBetweenPts(a,s);var u=[this.crossPt.x+o[0],this.crossPt.y+o[1]];w.drawLine(t,n.x,n.y,u[0],u[1]),u=[this.crossPt.x-o[0],this.crossPt.y-o[1]],w.drawLine(t,n.x,n.y,u[0],u[1])}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),w.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y),this.drawArrow(t,this.startPoint,this.endPoint)}}]),e}();e.DrawArrowLinesPlotter=z;var q=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).toolObject=n,r.ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],w.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y)}}]),e}();e.DrawHoriStraightLinesPlotter=q;var X=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){if(this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x)w.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y);else{var e={x:this.endPoint.x,y:this.startPoint.y};this.drawRayLines(t,this.startPoint,e)}}}]),e}();e.DrawHoriRayLinesPlotter=X;var Q=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.endPoint.y=this.startPoint.y,this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?w.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x+1,this.startPoint.y):w.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.startPoint.y)}}]),e}();e.DrawHoriSegLinesPlotter=Q;var K=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).toolObject=n,r.ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],w.drawLine(t,this.startPoint.x,this.areaPos.top,this.startPoint.x,this.areaPos.bottom)}}]),e}();e.DrawVertiStraightLinesPlotter=K;var Z=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).toolObject=n,r.ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){t.font="12px Tahoma",t.textAlign="left",t.fillStyle=this.theme.getColor(l.Theme.Color.LineColorNormal),this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0];var e=this.ctrlPts[0][0].getPosIV().v;w.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y),t.fillText(e.toFixed(2),this.startPoint.x+2,this.startPoint.y-15)}}]),e}();e.DrawPriceLinesPlotter=Z;var J=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).toolObject=n,r}return m(e,[{key:"getParaPt",value:function(){var t=[];t[0]=this.endPoint.x-this.startPoint.x,t[1]=this.endPoint.y-this.startPoint.y;var e=[];e[0]=this.paraStartPoint.x-this.startPoint.x,e[1]=this.paraStartPoint.y-this.startPoint.y,this.paraEndPoint={x:-1,y:-1},this.paraEndPoint.x=t[0]+e[0]+this.startPoint.x,this.paraEndPoint.y=t[1]+e[1]+this.startPoint.y}}]),e}();e.ParallelLinesPlotter=J;var $=function(t){b(e,J);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).toolObject=n,r.ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.getParaPt(),this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),w.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.paraEndPoint),w.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y)}}]),e}();e.DrawBiParallelLinesPlotter=$;var tt=function(t){b(e,J);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).toolObject=n,r.ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.getParaPt(),this.drawRayLines(t,this.startPoint,this.endPoint),this.drawRayLines(t,this.paraStartPoint,this.paraEndPoint)}}]),e}();e.DrawBiParallelRayLinesPlotter=tt;var et=function(t){b(e,J);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).toolObject=n,r.ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2];var e=[];e[0]=this.endPoint.x-this.startPoint.x,e[1]=this.endPoint.y-this.startPoint.y;var n=[];n[0]=this.paraStartPoint.x-this.startPoint.x,n[1]=this.paraStartPoint.y-this.startPoint.y,this.para1EndPoint={x:-1,y:-1},this.para2EndPoint={x:-1,y:-1},this.para2StartPoint={x:-1,y:-1},this.para1EndPoint.x=e[0]+n[0]+this.startPoint.x,this.para1EndPoint.y=e[1]+n[1]+this.startPoint.y,this.para2StartPoint.x=this.startPoint.x-n[0],this.para2StartPoint.y=this.startPoint.y-n[1],this.para2EndPoint.x=this.endPoint.x-n[0],this.para2EndPoint.y=this.endPoint.y-n[1],this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),w.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.para1EndPoint),w.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y),this.crossPt2=this.getRectCrossPt(this.areaPos,this.para2StartPoint,this.para2EndPoint),w.drawLine(t,this.crossPt2[0].x,this.crossPt2[0].y,this.crossPt2[1].x,this.crossPt2[1].y)}}]),e}();e.DrawTriParallelLinesPlotter=et;var nt=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"drawLinesAndInfo",value:function(t,e,n){t.font="12px Tahoma",t.textAlign="left",t.fillStyle=this.theme.getColor(l.Theme.Color.LineColorNormal);var r;this.toolObject.state===p.CToolObject.state.Draw&&(this.startPtValue=this.toolObject.getPoint(0).getPosIV().v,this.endPtValue=this.toolObject.getPoint(1).getPosIV().v),this.getAreaPos();for(var i=0;i<this.fiboSequence.length;i++){var o=e.y+(100-this.fiboSequence[i])/100*(n.y-e.y);if(!(o>this.areaPos.bottom)){var a=this.startPtValue+(100-this.fiboSequence[i])/100*(this.endPtValue-this.startPtValue);w.drawLine(t,this.areaPos.left,o,this.areaPos.right,o),r=this.fiboSequence[i].toFixed(1)+"% "+a.toFixed(1),t.fillText(r,this.areaPos.left+2,o-15)}}}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),e}();e.BandLinesPlotter=nt;var rt=function(t){b(e,nt);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).toolObject=n,r.fiboSequence=[100,78.6,61.8,50,38.2,23.6,0],r}return e}();e.DrawFibRetracePlotter=rt;var it=function(t){b(e,nt);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).toolObject=n,r.fiboSequence=[0,12.5,25,37.5,50,62.5,75,87.5,100],r}return e}();e.DrawBandLinesPlotter=it;var ot=function(t){b(e,W);function e(t,n){var r;return g(this,e),(r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).toolObject=n,r.fiboFansSequence=[0,38.2,50,61.8],r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return m(e,[{key:"drawLinesAndInfo",value:function(t,e,n){this.drawFibRayLines(t,e,n)}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),e}();e.DrawFibFansPlotter=ot;var at=function(t){b(e,o.NamedObject);function e(t){var n;return g(this,e),(n=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).flag=!0,n.context=a.ChartManager.instance._overlayContext,n}return m(e,[{key:"getAreaPos",value:function(){var t=a.ChartManager.instance.getArea("frame0.k0.main");this.areaPos=null!==t?{left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())}:{left:0,top:0,right:0,bottom:0}}},{key:"Draw",value:function(t){this.getAreaPos();var e=a.ChartManager.instance.getDataSource(this.getDataSourceName());if(null!==e&&s.Util.isInstance(e,d.MainDataSource)){this.context.save(),this.context.rect(this.areaPos.left,this.areaPos.top,this.areaPos.right-this.areaPos.left,this.areaPos.bottom-this.areaPos.top),this.context.clip();for(var n=e.getToolObjectCount(),r=0;r<n;r++){var i=e.getToolObject(r);switch(i.getState()){case p.CToolObject.state.BeforeDraw:i.getPlotter().theme=a.ChartManager.instance.getTheme(this.getFrameName()),i.getPlotter().drawCursor(this.context);break;case p.CToolObject.state.Draw:i.getPlotter().theme=a.ChartManager.instance.getTheme(this.getFrameName()),i.getPlotter().updateDraw(this.context);break;case p.CToolObject.state.AfterDraw:i.getPlotter().theme=a.ChartManager.instance.getTheme(this.getFrameName()),i.getPlotter().finishDraw(this.context)}}var o=e.getSelectToolObjcet();null!==o&&o!==p.CToolObject.state.Draw&&o.getPlotter().highlight(this.context),this.context.restore()}}}]),e}();e.CDynamicLinePlotter=at},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndicatorDataProvider=e.MainDataProvider=e.DataProvider=void 0;var r=n(8),i=n(3),o=n(19),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(11));function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){d(e,r.NamedObject);function e(t){var n;return u(this,e),(n=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._minValue=0,n._maxValue=0,n._minValueIndex=-1,n._maxValueIndex=-1,n}return l(e,[{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getMinValueIndex",value:function(){return this._minValueIndex}},{key:"getMaxValueIndex",value:function(){return this._maxValueIndex}},{key:"getMinMaxAt",value:function(t,e){return!0}},{key:"calcRange",value:function(t,e,n,r){for(var i=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=-1,s=-1,u={},c=e-1,l=t.length-1;l>=0;l--){var h=t[l];if(c<h)n[l]={min:i,max:o};else{for(;c>=h;c--)!1!==this.getMinMaxAt(c,u)&&(i>u.min&&(i=u.min,a=c),o<u.max&&(o=u.max,s=c));n[l]={min:i,max:o}}null!==r&&void 0!==r&&(r[l]={minIndex:a,maxIndex:s})}}},{key:"updateRange",value:function(){var t=i.ChartManager.instance.getTimeline(this.getDataSourceName()),e=[t.getFirstIndex()],n=[{}],r=[{}];this.calcRange(e,t.getLastIndex(),n,r),this._minValue=n[0].min,this._maxValue=n[0].max,this._minValueIndex=r[0].minIndex,this._maxValueIndex=r[0].maxIndex}}]),e}();e.DataProvider=p;var f=function(t){d(e,p);function e(t){var n;return u(this,e),(n=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._candlestickDS=null,n}return l(e,[{key:"updateData",value:function(){var t=i.ChartManager.instance.getDataSource(this.getDataSourceName());o.Util.isInstance(t,a.MainDataSource)&&(this._candlestickDS=t)}},{key:"getMinMaxAt",value:function(t,e){var n=this._candlestickDS.getDataAt(t);return e.min=n.low,e.max=n.high,!0}}]),e}();e.MainDataProvider=f;var _=function(t){d(e,p);function e(){return u(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return l(e,[{key:"getIndicator",value:function(){return this._indicator}},{key:"setIndicator",value:function(t){this._indicator=t,this.refresh()}},{key:"refresh",value:function(){var t=i.ChartManager.instance.getDataSource(this.getDataSourceName());if(!(t.getDataCount()<1)){var e,n=this._indicator,r=t.getDataCount();for(n.clear(),n.reserve(r),e=0;e<r;e++)n.execute(t,e)}}},{key:"updateData",value:function(){var t=i.ChartManager.instance.getDataSource(this.getDataSourceName());if(!(t.getDataCount()<1)){var e=this._indicator;switch(t.getUpdateMode()){case a.DataSource.UpdateMode.Refresh:this.refresh();break;case a.DataSource.UpdateMode.Append:e.reserve(t.getAppendedCount());break;case a.DataSource.UpdateMode.Update:var n,r=t.getDataCount();for(n=r-(t.getUpdatedCount()+t.getAppendedCount());n<r;n++)e.execute(t,n)}}}},{key:"getMinMaxAt",value:function(t,e){e.min=Number.MAX_VALUE,e.max=-Number.MAX_VALUE;var n,r,i=!1,o=this._indicator.getOutputCount();for(r=0;r<o;r++)n=this._indicator.getOutputAt(r).execute(t),!1===isNaN(n)&&(i=!0,e.min>n&&(e.min=n),e.max<n&&(e.max=n));return i}}]),e}();e.IndicatorDataProvider=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartAreaGroup=e.TimelineArea=e.IndicatorRangeArea=e.MainRangeArea=e.IndicatorArea=e.MainArea=e.ChartArea=void 0;var r=n(8),i=n(3),o=n(57);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function l(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=function(t){h(e,r.NamedObject);function e(t){var n;return s(this,e),(n=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._left=0,n._top=0,n._right=0,n._bottom=0,n._changed=!1,n._highlighted=!1,n._pressed=!1,n._selected=!1,n.Measuring=new o.MEvent,n}return c(e,[{key:"getDockStyle",value:function(){return this._dockStyle}},{key:"setDockStyle",value:function(t){this._dockStyle=t}},{key:"getLeft",value:function(){return this._left}},{key:"getTop",value:function(){return this._top}},{key:"setTop",value:function(t){this._top!==t&&(this._top=t,this._changed=!0)}},{key:"getRight",value:function(){return this._right}},{key:"getBottom",value:function(){return this._bottom}},{key:"setBottom",value:function(t){this._bottom!==t&&(this._bottom=t,this._changed=!0)}},{key:"getCenter",value:function(){return this._left+this._right>>1}},{key:"getMiddle",value:function(){return this._top+this._bottom>>1}},{key:"getWidth",value:function(){return this._right-this._left}},{key:"getHeight",value:function(){return this._bottom-this._top}},{key:"getRect",value:function(){return{X:this._left,Y:this._top,Width:this._right-this._left,Height:this._bottom-this._top}}},{key:"contains",value:function(t,e){return t>=this._left&&t<this._right&&e>=this._top&&e<this._bottom?[this]:null}},{key:"getMeasuredWidth",value:function(){return this._measuredWidth}},{key:"getMeasuredHeight",value:function(){return this._measuredHeight}},{key:"setMeasuredDimension",value:function(t,e){this._measuredWidth=t,this._measuredHeight=e}},{key:"measure",value:function(t,e,n){this._measuredWidth=0,this._measuredHeight=0,this.Measuring.raise(this,{Width:e,Height:n}),0===this._measuredWidth&&0===this._measuredHeight&&this.setMeasuredDimension(e,n)}},{key:"layout",value:function(t,e,n,r,i){t<<=0,this._left!==t&&(this._left=t,this._changed=!0),e<<=0,this._top!==e&&(this._top=e,this._changed=!0),n<<=0,this._right!==n&&(this._right=n,this._changed=!0),r<<=0,this._bottom!==r&&(this._bottom=r,this._changed=!0),i&&(this._changed=!0)}},{key:"isChanged",value:function(){return this._changed}},{key:"setChanged",value:function(t){this._changed=t}},{key:"isHighlighted",value:function(){return this._highlighted}},{key:"getHighlightedArea",value:function(){return this._highlighted?this:null}},{key:"highlight",value:function(t){return this._highlighted=this===t,this._highlighted?this:null}},{key:"isPressed",value:function(){return this._pressed}},{key:"setPressed",value:function(t){this._pressed=t}},{key:"isSelected",value:function(){return this._selected}},{key:"getSelectedArea",value:function(){return this._selected?this:null}},{key:"select",value:function(t){return this._selected=this===t,this._selected?this:null}},{key:"onMouseMove",value:function(t,e){return null}},{key:"onMouseLeave",value:function(t,e){}},{key:"onMouseDown",value:function(t,e){return null}},{key:"onMouseUp",value:function(t,e){return null}}]),e}();e.ChartArea=d,d.DockStyle={Left:0,Top:1,Right:2,Bottom:3,Fill:4};var p=function(t){h(e,d);function e(t){var n;return s(this,e),(n=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._dragStarted=!1,n._oldX=0,n._oldY=0,n._passMoveEventToToolManager=!0,n}return c(e,[{key:"onMouseMove",value:function(t,e){var n=i.ChartManager.instance;if(n._capturingMouseArea===this&&!1===this._dragStarted&&(Math.abs(this._oldX-t)>1||Math.abs(this._oldY-e)>1)&&(this._dragStarted=!0),this._dragStarted)return n.hideCursor(),n.onToolMouseDrag(this.getFrameName(),t,e)?this:(n.getTimeline(this.getDataSourceName()).move(t-this._oldX),this);if(this._passMoveEventToToolManager&&n.onToolMouseMove(this.getFrameName(),t,e))return n.hideCursor(),this;switch(n._drawingTool){case i.ChartManager.DrawingTool.Cursor:n.showCursor();break;case i.ChartManager.DrawingTool.CrossCursor:n.showCrossCursor(this,t,e)?n.hideCursor():n.showCursor();break;default:n.hideCursor()}return this}},{key:"onMouseLeave",value:function(t,e){this._dragStarted=!1,this._passMoveEventToToolManager=!0}},{key:"onMouseDown",value:function(t,e){var n=i.ChartManager.instance;return n.getTimeline(this.getDataSourceName()).startMove(),this._oldX=t,this._oldY=e,this._dragStarted=!1,n.onToolMouseDown(this.getFrameName(),t,e)&&(this._passMoveEventToToolManager=!1),this}},{key:"onMouseUp",value:function(t,e){var n=i.ChartManager.instance,r=null;return this._dragStarted&&(this._dragStarted=!1,r=this),n.onToolMouseUp(this.getFrameName(),t,e)&&(r=this),this._passMoveEventToToolManager=!0,r}}]),e}();e.MainArea=p;var f=function(t){h(e,d);function e(t){var n;return s(this,e),(n=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._dragStarted=!1,n._oldX=0,n._oldY=0,n}return c(e,[{key:"onMouseMove",value:function(t,e){var n=i.ChartManager.instance;if(n._capturingMouseArea===this&&!1===this._dragStarted&&(this._oldX===t&&this._oldY===e||(this._dragStarted=!0)),this._dragStarted)return n.hideCursor(),n.getTimeline(this.getDataSourceName()).move(t-this._oldX),this;switch(n._drawingTool){case i.ChartManager.DrawingTool.CrossCursor:n.showCrossCursor(this,t,e)?n.hideCursor():n.showCursor();break;default:n.showCursor()}return this}},{key:"onMouseLeave",value:function(t,e){this._dragStarted=!1}},{key:"onMouseDown",value:function(t,e){return i.ChartManager.instance.getTimeline(this.getDataSourceName()).startMove(),this._oldX=t,this._oldY=e,this._dragStarted=!1,this}},{key:"onMouseUp",value:function(t,e){return this._dragStarted?(this._dragStarted=!1,this):null}}]),e}();e.IndicatorArea=f;var _=function(t){h(e,d);function e(t){return s(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return c(e,[{key:"onMouseMove",value:function(t,e){return i.ChartManager.instance.showCursor(),this}}]),e}();e.MainRangeArea=_;var g=function(t){h(e,d);function e(t){return s(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return c(e,[{key:"onMouseMove",value:function(t,e){return i.ChartManager.instance.showCursor(),this}}]),e}();e.IndicatorRangeArea=g;var v=function(t){h(e,d);function e(t){return s(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return c(e,[{key:"onMouseMove",value:function(t,e){return i.ChartManager.instance.showCursor(),this}}]),e}();e.TimelineArea=v;var m=function(t){h(e,d);function e(t){var n;return s(this,e),(n=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._areas=[],n._highlightedArea=null,n._selectedArea=null,n}return c(e,[{key:"contains",value:function(t,n){var r,i,o=this._areas.length;for(i=0;i<o;i++)if(null!==(r=this._areas[i].contains(t,n)))return r.push(this),r;return function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"contains",this).call(this,t,n)}},{key:"getAreaCount",value:function(){return this._areas.length}},{key:"getAreaAt",value:function(t){return t<0||t>=this._areas.length?null:this._areas[t]}},{key:"addArea",value:function(t){this._areas.push(t)}},{key:"removeArea",value:function(t){var e,n=this._areas.length;for(e=0;e<n;e++)if(t===this._areas[e]){this._areas.splice(e),this.setChanged(!0);break}}},{key:"getGridColor",value:function(){return this._gridColor}},{key:"setGridColor",value:function(t){this._gridColor=t}},{key:"getHighlightedArea",value:function(){return null!==this._highlightedArea?this._highlightedArea.getHighlightedArea():null}},{key:"highlight",value:function(t){this._highlightedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)if(null!==(e=this._areas[n].highlight(t)))return this._highlightedArea=e,this;return null}},{key:"getSelectedArea",value:function(){return null!==this._selectedArea?this._selectedArea.getSelectedArea():null}},{key:"select",value:function(t){this._selectedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)if(null!==(e=this._areas[n].select(t)))return this._selectedArea=e,this;return null}},{key:"onMouseLeave",value:function(t,e){var n,r=this._areas.length;for(n=0;n<r;n++)this._areas[n].onMouseLeave(t,e)}},{key:"onMouseUp",value:function(t,e){var n,r,i=this._areas.length;for(r=0;r<i;r++)if(null!==(n=this._areas[r].onMouseUp(t,e)))return n;return null}}]),e}();e.ChartAreaGroup=m},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(68),o=n(149),a=n(1),s=n(150),u=n(69),c=n(31),l=n(2),h=n(174),d=n(12),p=n(0),f=n(0),_=n(80),g=function(t){r(e,t);function e(e,n){if(!(e instanceof c.Repo))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,h.QueryParams.DEFAULT,!1)||this}return e.prototype.getKey=function(){return p.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return p.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof l.Path||(null===this.path.getFront()?d.validateRootPathString("Reference.child",1,t,!1):d.validatePathString("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){p.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){p.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){p.validateArgCount("Reference.set",1,2,arguments.length),d.validateWritablePath("Reference.set",this.path),d.validateFirebaseDataArg("Reference.set",1,t,this.path,!1),p.validateCallback("Reference.set",2,e,!0);var n=new f.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(p.validateArgCount("Reference.update",1,2,arguments.length),d.validateWritablePath("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,a.warn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}d.validateFirebaseMergeDataArg("Reference.update",1,t,this.path,!1),p.validateCallback("Reference.update",2,e,!0);var i=new f.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(p.validateArgCount("Reference.setWithPriority",2,3,arguments.length),d.validateWritablePath("Reference.setWithPriority",this.path),d.validateFirebaseDataArg("Reference.setWithPriority",1,t,this.path,!1),d.validatePriority("Reference.setWithPriority",2,e,!1),p.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new f.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return p.validateArgCount("Reference.remove",0,1,arguments.length),d.validateWritablePath("Reference.remove",this.path),p.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(p.validateArgCount("Reference.transaction",1,3,arguments.length),d.validateWritablePath("Reference.transaction",this.path),p.validateCallback("Reference.transaction",1,t,!1),p.validateCallback("Reference.transaction",2,e,!0),d.validateBoolean("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new f.Deferred;"function"==typeof e&&r.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,n,i){t?r.reject(t):r.resolve(new o.TransactionResult(n,i)),"function"==typeof e&&e(t,n,i)},n),r.promise},e.prototype.setPriority=function(t,e){p.validateArgCount("Reference.setPriority",1,2,arguments.length),d.validateWritablePath("Reference.setPriority",this.path),d.validatePriority("Reference.setPriority",1,t,!1),p.validateCallback("Reference.setPriority",2,e,!0);var n=new f.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){p.validateArgCount("Reference.push",0,2,arguments.length),d.validateWritablePath("Reference.push",this.path),d.validateFirebaseDataArg("Reference.push",1,t,this.path,!0),p.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=s.nextPushId(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return d.validateWritablePath("Reference.onDisconnect",this.path),new i.OnDisconnect(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(u.Query);e.Reference=g,u.Query.__referenceConstructor=g,_.SyncPoint.__referenceConstructor=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(12),o=n(2),a=n(4),s=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return r.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return r.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return r.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return r.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){r.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),i.validatePathString("DataSnapshot.child",1,e,!1);var n=new o.Path(e),s=this.ref_.child(n);return new t(this.node_.getChild(n),s,a.PRIORITY_INDEX)},t.prototype.hasChild=function(t){r.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),i.validatePathString("DataSnapshot.hasChild",1,t,!1);var e=new o.Path(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return r.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(r.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),r.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;return!!this.node_.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),a.PRIORITY_INDEX))})},t.prototype.hasChildren=function(){return r.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return r.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return r.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}();e.DataSnapshot=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(30),o=n(2),a=n(1),s=n(0),u=function(){return r||(r=new i.SortedMap(a.stringCompare)),r},c=function(){function t(t,e){void 0===e&&(e=u()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return s.forEach(e,function(t,e){n=n.set(new o.Path(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:o.Path.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);if(null!=i){return{path:new o.Path(n).child(i.path),value:i.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(o.Path.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,o.Path.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,o.Path.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(o.Path.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}();e.ImmutableTree=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(16),o=n(5),a=n(4),s=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,o,a,s){r.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var u=t.getImmediateChild(e);return u.getChild(o).equals(n.getChild(o))&&u.isEmpty()==n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(i.Change.childRemovedChange(e,u)):r.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?s.trackChildChange(i.Change.childAddedChange(e,n)):s.trackChildChange(i.Change.childChangedChange(e,n,u))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(a.PRIORITY_INDEX,function(t,r){e.hasChild(t)||n.trackChildChange(i.Change.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(a.PRIORITY_INDEX,function(e,r){if(t.hasChild(e)){var o=t.getImmediateChild(e);o.equals(r)||n.trackChildChange(i.Change.childChangedChange(e,r,o))}else n.trackChildChange(i.Change.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?o.ChildrenNode.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}();e.IndexedFilter=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(166),i=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new r.StatsCollection),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}();e.StatsManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(31),o=n(1),a=n(66),s=n(12);n(176);var u,c=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return u||(u=new t),u},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&o.fatal("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var r=a.parseRepoInfo(n),i=r.repoInfo;s.validateUrl("Invalid Firebase Database URL",1,r),r.path.isEmpty()||o.fatal("Database URL must point to the root of a Firebase Database (not including a child path).");return this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=r.safeGet(this.repos_,t.app.name);e&&r.safeGet(e,t.repoInfo_.toURLString())===t||o.fatal("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=r.safeGet(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var a=r.safeGet(n,t.toURLString());return a&&o.fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new i.Repo(t,this.useRestClient_,e),n[t.toURLString()]=a,a},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}();e.RepoManager=c},function(t,e,n){"use strict";e.g=function(t,e,n){for(var i=e.length,o=e.length,a=0;a<e.length;a++)if(e[a].optional){i=a;break}if(!(i<=n.length&&n.length<=o))throw r.g(i,o,t,n.length);for(var a=0;a<n.length;a++)try{e[a].validator(n[a])}catch(e){throw e instanceof Error?r.f(a,t,e.message):r.f(a,t,e)}},e.e=function(t,e){function n(t){if(!o.j(t))throw"Expected string."}var r;t?(i=n,s=t,r=function(t){i(t),s(t)}):r=n;var i,s;return new a(r,e)},e.f=function(){return new a(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||o.e()&&t instanceof Blob))throw"Expected Blob or File."})},e.b=function(t){return new a(i.c,t)},e.c=function(){return new a(function(t){if(!(o.h(t)&&t>=0))throw"Expected a number 0 or greater."})},e.a=function(t,e){return new a(function(e){if(!(null===e||o.a(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)},e)},e.d=function(t){return new a(function(t){if(null!==t&&!o.b(t))throw"Expected a Function."},t)};var r=n(9),i=n(51),o=n(7);var a=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!o.c(e)||t(e)},this.optional=!!e}}()},function(t,e,n){"use strict";e.b=function(){if(l)return l;var t=[];t.push(new c("bucket")),t.push(new c("generation")),t.push(new c("metageneration")),t.push(new c("name","fullPath",!0));var e=new c("name");e.xform=function(t,e){return function(t){return!a.j(t)||t.length<2?t:(t=t,o.b(t))}(e)},t.push(e);var n=new c("size");n.xform=function(t,e){return a.a(e)?+e:e},t.push(n),t.push(new c("timeCreated")),t.push(new c("updated")),t.push(new c("md5Hash",null,!0)),t.push(new c("cacheControl",null,!0)),t.push(new c("contentDisposition",null,!0)),t.push(new c("contentEncoding",null,!0)),t.push(new c("contentLanguage",null,!0)),t.push(new c("contentType",null,!0)),t.push(new c("metadata","customMetadata",!0));return t.push(new c("downloadTokens","downloadURLs",!1,function(t,e){if(!(a.j(e)&&e.length>0))return[];var n=encodeURIComponent;return e.split(",").map(function(e){var r=t.bucket,i=t.fullPath,o="/b/"+n(r)+"/o/"+n(i),a=s.a(o),u=s.c({alt:"media",token:e});return a+u})})),l=t},e.a=function(t,e,n){var o=r.a(e);if(null===o)return null;return function(t,e,n){var r={};r.type="file";for(var o=n.length,a=0;a<o;a++){var s=n[a];r[s.local]=s.xform(r,e[s.server])}return u=r,c=t,Object.defineProperty(u,"ref",{get:function(){var t=u.bucket,e=u.fullPath,n=new i.a(t,e);return c.makeStorageReference(n)}}),r;var u,c}(t,o,n)},e.d=function(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)},e.c=function(t){if(!t||!a.i(t))throw"Expected Metadata object.";for(var e in t){var n=t[e];if("customMetadata"===e){if(!a.i(n))throw"Expected object for 'customMetadata' mapping."}else if(a.g(n))throw"Mapping for '"+e+"' cannot be an object."}};var r=n(191),i=n(35),o=n(96),a=n(7),s=n(52);function u(t,e){return e}var c=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||u}}(),l=null},function(t,e,n){"use strict";e.b=function(t){return r.f+r.a+t},e.a=function(t){return r.g+r.a+t},e.d=function(t){return r.f+r.b+t},e.c=function(t){var e=encodeURIComponent,n="?";return i.b(t,function(t,r){var i=e(t)+"="+e(r);n=n+i+"&"}),n=n.slice(0,-1)};var r=n(34),i=n(17)},function(t,e,n){"use strict";e.b=function(t,e){return-1!==t.indexOf(e)},e.a=function(t){return Array.prototype.slice.call(t)},e.c=function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KlineTrade=void 0;var r=n(3);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.browerState=0,this.tradeDate=new Date,this.tradesLimit=20,this.lastDepth=null,this.depthShowSize=15,this.priceDecimalDigits=6,this.amountDecimalDigits=4,this.symbol=null,this.curPrice=null,this.title="",Object.assign(this,e),t.created||(t.instance=this,t.created=!0),t.instance}e=t,o=void 0,(n=[{key:"reset",value:function(t){this.symbol=t,this.lastDepth=null,this.curPrice=null,this.klineTradeInit=!1,$("#trades .trades_list").empty(),$("#gasks .table").empty(),$("#gbids .table").empty(),$("#asks .table").empty(),$("#bids .table").empty()}},{key:"pushTrades",value:function(t){for(var e=$("#trades .trades_list"),n="",r=0;r<t.length;r++){var i=t[r];if(r>=t.length-this.tradesLimit){this.tradeDate.setTime(i.time);var o=this.dateFormatTf(this.tradeDate.getHours())+":"+this.dateFormatTf(this.tradeDate.getMinutes())+":"+this.dateFormatTf(this.tradeDate.getSeconds()),a=(i.amount.toFixed(4)+"").split("."),s=i.price;s>1&&(s=s.toFixed(2)),s<1&&s>1e-5&&(s=s.toFixed(4)),s<1e-5&&(s=s.toFixed(6)),n=this.klineTradeInit?"<ul class='newul'><li class='tm'>"+o+"</li><li class='pr-"+("buy"===i.type?"green":"red")+"'>"+s+"</li><li class='vl'>"+a[0]+"<g>"+(a.length>1?"."+a[1]:"")+"</g></li></ul>"+n:"<ul><li class='tm'>"+o+"</li><li class='pr-"+("buy"===i.type?"green":"red")+"'>"+s+"</li><li class='vl'>"+a[0]+"<g>"+(a.length>1?"."+a[1]:"")+"</g></li></ul>"+n}}var u=0,c=this;if(this.klineTradeInit){clearInterval(l);var l=setInterval(function(){var e=t[u],n=Number(e.price);n>1&&(n=n.toFixed(2)),n<1&&n>1e-4&&(n=n.toFixed(4)),n<1e-4&&(n=n.toFixed(6)),c.curPrice=n,$("div#price").attr("class","buy"===e.type?"green":"red").text(n),++u>=t.length&&clearInterval(l)},100)}else if(t.length>0){var h=Number(t[t.length-1].price);h>1&&(h=h.toFixed(2)),h<1&&h>1e-4&&(h=h.toFixed(4)),h<1e-4&&(h=h.toFixed(6)),c.curPrice=h,$("div#price").attr("class","buy"===t[t.length-1].type?"green":"red").text(h)}this.klineTradeInit?e.prepend(n):e.append(n),n=null,e.find("ul.newul").slideDown(1e3,function(){$(this).removeClass("newul")}),e.find("ul:gt("+(this.tradesLimit-1)+")").remove()}},{key:"updateDepth",value:function(t){if(r.ChartManager.instance.getChart().updateDepth(t),t)if($("#gasks .table").html(this.getgview(this.getgasks(t.asks))),$("#gbids .table").html(this.getgview(this.getgbids(t.bids))),null===this.lastDepth)this.lastDepth={},this.lastDepth.asks=this.getAsks(t.asks,this.depthShowSize),this.depthInit(this.lastDepth.asks,$("#asks .table")),this.lastDepth.bids=this.getBids(t.bids,this.depthShowSize),this.depthInit(this.lastDepth.bids,$("#bids .table"));else{var e=$("#asks .table");e.find("div.remove").remove(),e.find("div.add").removeClass("add");var n=this.getAsks(t.asks,this.depthShowSize),i=this.lastDepth.asks;this.lastDepth.asks=n,this.asksAndBids(n.slice(0),i,e);var o=$("#bids .table");o.find("div.remove").remove(),o.find("div.add").removeClass("add");var a=this.getBids(t.bids,this.depthShowSize),s=this.lastDepth.bids;this.lastDepth.bids=a,this.asksAndBids(a.slice(0),s,$("#bids .table"))}}},{key:"depthInit",value:function(t,e){if(e.empty(),t&&t.length>0){for(var n,r="",i=0;i<t.length;i++){var o=(t[i][0]+"").split("."),a=this.getPrice(o,n);n=o[0],o=(t[i][1]+"").split(".");var s=this.getAmount(o);r+="<div class='row'><span class='price'>"+a[0]+"<g>"+a[1]+"</g></span> <span class='amount'>"+s[0]+"<g>"+s[1]+"</g></span></div>"}e.append(r),r=null}}},{key:"asksAndBids",value:function(t,e,n){for(var r=0;r<e.length;r++){for(var i=!1,o=0;o<t.length;o++)if(e[r][0]===t[o][0]){if(i=!0,e[r][1]!==t[o][1]){var a=n.find("div:eq("+r+") .amount");a.addClass(e[r][1]>t[o][1]?"red":"green");var s=this.getAmount((t[o][1]+"").split("."));setTimeout(function(t,e){return function(){t.html(e[0]+"<g>"+e[1]+"</g>"),t.removeClass("red").removeClass("green"),t=null,e=null}}(a,s),500)}t.splice(o,1);break}i||(n.find("div:eq("+r+")").addClass("remove"),e[r][2]=-1)}for(var u=0;u<e.length;u++)for(var c=0;c<t.length;c++)if(t[c][0]>e[u][0]){var l=(t[c][1]+"").split("."),h=this.getAmount(l);n.find("div:eq("+u+")").before("<div class='row add'><span class='price'></span> <span class='amount'>"+h[0]+"<g>"+h[1]+"</g></span></div>"),e.splice(u,0,t[c]),t.splice(c,1);break}for(var d="",p=0;p<t.length;p++){e.push(t[p]);var f=(t[p][1]+"").split("."),_=this.getAmount(f);d+="<div class='row add'><span class='price'></span> <span class='amount'>"+_[0]+"<g>"+_[1]+"</g></span></div>"}d.length>0&&n.append(d),d=null;for(var g,v=0;v<e.length;v++){var m=n.find("div:eq("+v+")");if(!(e[v].length>=3&&-1===e[v][2])){var y=(e[v][0]+"").split("."),b=this.getPrice(y,g);g=y[0],m.find(".price").html(b[0]+"<g>"+b[1]+"</g>")}}t=null,e=null,n.find("div.add").slideDown(800),setTimeout((w=n.find("div.remove"),C=n.find("div.add"),function(){w.slideUp(500,function(){$(this).remove()}),C.removeClass("add")}),1e3);var w,C}},{key:"getAsks",value:function(t,e){return t.length>e&&t.splice(0,t.length-e),t}},{key:"getBids",value:function(t,e){return t.length>e&&t.splice(e,t.length-1),t}},{key:"getgview",value:function(t){for(var e,n="",r=0;r<t.length;r++){var i=t[r][0].split(".");1===i.length||i[0]!==e?(n+="<div class='row'><span class='price'>"+t[r][0]+"</span> <span class='amount'>"+t[r][1]+"</span></div>",e=i[0]):n+="<div class='row'><span class='price'><h>"+i[0]+".</h>"+i[1]+"</span> <span class='amount'>"+t[r][1]+"</span></div>"}return n}},{key:"getgasks",value:function(t){if(t.length<2)return[];var e=t[t.length-1][0],n=t[0][0],r=n-e,i=this.getBlock(r,100),o=Math.abs(Number(Math.log(i)/Math.log(10))).toFixed(0);r/i<2&&(i/=2,o++),i>=1&&(o=0),e=parseInt(e/i)*i,n=parseInt(n/i)*i;for(var a=[],s=0,u=t.length-1;u>=0;u--){if(t[u][0]>e){var c=parseInt(s,10);if(c>0&&a.unshift([Number(e).toFixed(o),c]),e>=n)break;e+=i}s+=t[u][1]}return a}},{key:"getgbids",value:function(t){if(t.length<2)return[];var e=t[t.length-1][0],n=t[0][0],r=n-e,i=this.getBlock(r,100),o=Math.abs(Number(Math.log(i)/Math.log(10))).toFixed(0);r/i<2&&(i/=2,o++),i>=1&&(o=0),e=parseInt(e/i)*i,n=parseInt(n/i)*i;for(var a=[],s=0,u=0;u<t.length;u++){if(t[u][0]<n){var c=parseInt(s,10);if(c>0&&a.push([Number(n).toFixed(o),c]),n<=e)break;n-=i}s+=t[u][1]}return a}},{key:"getBlock",value:function(t,e){return t>e||t<=0?e:(e/=10,this.getBlock(t,e))}},{key:"getZeros",value:function(t){for(var e="";t>0;)t--,e+="0";return e}},{key:"getPrice",value:function(t,e){var n=t[0];e===n?n="<h>"+n+".</h>":n+=".";var r="";return 1===t.length?(n+="0",r=this.getZeros(this.priceDecimalDigits-1)):(n+=t[1],r=this.getZeros(this.priceDecimalDigits-t[1].length)),[n,r]}},{key:"getAmount",value:function(t){var e=t[0],n="",r=this.amountDecimalDigits-e.length+1;return r>0&&(n=".",1===t.length?n+=this.getZeros(r):r>t[1].length?n+=t[1]+this.getZeros(r-t[1].length):r===t[1].length?n+=t[1]:n+=t[1].substring(0,r)),[e,n]}},{key:"dateFormatTf",value:function(t){return(t<10?"0":"")+t}}])&&i(e.prototype,n),o&&i(e,o);var e,n,o;return t}();e.KlineTrade=o,o.created=!1,o.instance=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CName=void 0;function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._names=[],this._comps=[],e instanceof t)this._names=e._names,this._comps=e._comps;else{var n=e.split("."),r=n.length-1;if(r>0){this._comps=n,this._names.push(n[0]);for(var i=1;i<=r;i++)this._names.push(this._names[i-1]+"."+n[i])}else this._comps.push(e),this._names.push(e)}}e=t,i=void 0,(n=[{key:"getCompAt",value:function(t){return t>=0&&t<this._comps.length?this._comps[t]:""}},{key:"getName",value:function(t){if(t<0){if(this._names.length>0)return this._names[this._names.length-1]}else if(t<this._names.length)return this._names[t];return""}}])&&r(e.prototype,n),i&&r(e,i);var e,n,i;return t}();e.CName=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SarExpr=e.SmaExpr=e.ExpmemaExpr=e.EmaExpr=e.MaExpr=e.StdExpr=e.SumExpr=e.CountExpr=e.LlvExpr=e.HhvExpr=e.RangeExpr=e.RangeOutputExpr=e.OutputExpr=e.AssignExpr=e.IfExpr=e.OrExpr=e.AndExpr=e.RefExpr=e.AbsExpr=e.MaxExpr=e.EqExpr=e.LeExpr=e.LtExpr=e.GeExpr=e.GtExpr=e.DivExpr=e.MulExpr=e.SubExpr=e.AddExpr=e.NegExpr=e.OpABCDExpr=e.OpABCExpr=e.OpABExpr=e.OpAExpr=e.ParameterExpr=e.ConstExpr=e.VolumeExpr=e.CloseExpr=e.LowExpr=e.HighExpr=e.OpenExpr=e.Expr=e.ExprEnv=void 0;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:i(o,e,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)}function o(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}var l=function(){function t(){s(this,t),this._ds=null,this._firstIndex=null}return c(t,[{key:"getDataSource",value:function(){return this._ds}},{key:"setDataSource",value:function(t){return this._ds=t}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"setFirstIndex",value:function(t){return this._firstIndex=t}}],[{key:"get",value:function(){return this.inst}},{key:"set",value:function(t){this.inst=t}}]),t}();e.ExprEnv=l,l.inst=null;var h=function(){function t(){s(this,t),this._rid=0}return c(t,[{key:"execute",value:function(t){}},{key:"reserve",value:function(t,e){}},{key:"clear",value:function(){}}]),t}();e.Expr=h;var d=function(t){a(e,h);function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,[{key:"execute",value:function(t){return l.get()._ds.getDataAt(t).open}}]),e}();e.OpenExpr=d;var p=function(t){a(e,h);function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,[{key:"execute",value:function(t){return l.get()._ds.getDataAt(t).high}}]),e}();e.HighExpr=p;var f=function(t){a(e,h);function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,[{key:"execute",value:function(t){return l.get()._ds.getDataAt(t).low}}]),e}();e.LowExpr=f;var _=function(t){a(e,h);function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,[{key:"execute",value:function(t){return l.get()._ds.getDataAt(t).close}}]),e}();e.CloseExpr=_;var g=function(t){a(e,h);function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,[{key:"execute",value:function(t){return l.get()._ds.getDataAt(t).volume}}]),e}();e.VolumeExpr=g;var v=function(t){a(e,h);function e(t){var n;return s(this,e),(n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)))._value=t,n}return c(e,[{key:"execute",value:function(t){return this._value}}]),e}();e.ConstExpr=v;var m=function(t){a(e,h);function e(t,n,r,i){var a;return s(this,e),(a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)))._name=t,a._minValue=n,a._maxValue=r,a._value=a._defaultValue=i,a}return c(e,[{key:"execute",value:function(t){return this._value}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getDefaultValue",value:function(){return this._defaultValue}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(t){0===t?this._value=0:t<this._minValue?this._value=this._minValue:t>this._maxValue?this._value=this._maxValue:this._value=t}}]),e}();e.ParameterExpr=m;var y=function(t){a(e,h);function e(t){var n;return s(this,e),(n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)))._exprA=t,n}return c(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear()}}]),e}();e.OpAExpr=y;var b=function(t){a(e,h);function e(t,n){var r;return s(this,e),(r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)))._exprA=t,r._exprB=n,r}return c(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear()}}]),e}();e.OpABExpr=b;var w=function(t){a(e,h);function e(t,n,r){var i;return s(this,e),(i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)))._exprA=t,i._exprB=n,i._exprC=r,i}return c(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear()}}]),e}();e.OpABCExpr=w;var C=function(t){a(e,h);function e(t,n,r,i){var a;return s(this,e),(a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)))._exprA=t,a._exprB=n,a._exprC=r,a._exprD=i,a}return c(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e),this._exprD.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear(),this._exprD.clear()}}]),e}();e.OpABCDExpr=C;var E=function(t){a(e,y);function e(t){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return c(e,[{key:"execute",value:function(t){return-this._exprA.execute(t)}}]),e}();e.NegExpr=E;var P=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return this._exprA.execute(t)+this._exprB.execute(t)}}]),e}();e.AddExpr=P;var A=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return this._exprA.execute(t)-this._exprB.execute(t)}}]),e}();e.SubExpr=A;var S=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return this._exprA.execute(t)*this._exprB.execute(t)}}]),e}();e.MulExpr=S;var x=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){var e=this._exprA.execute(t),n=this._exprB.execute(t);return 0===e?e:0===n?e>0?1e6:-1e6:e/n}}]),e}();e.DivExpr=x;var O=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return this._exprA.execute(t)>this._exprB.execute(t)?1:0}}]),e}();e.GtExpr=O;var k=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return this._exprA.execute(t)>=this._exprB.execute(t)?1:0}}]),e}();e.GeExpr=k;var T=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return this._exprA.execute(t)<this._exprB.execute(t)?1:0}}]),e}();e.LtExpr=T;var I=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return this._exprA.execute(t)<=this._exprB.execute(t)?1:0}}]),e}();e.LeExpr=I;var N=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return this._exprA.execute(t)===this._exprB.execute(t)?1:0}}]),e}();e.EqExpr=N;var R=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return Math.max(this._exprA.execute(t),this._exprB.execute(t))}}]),e}();e.MaxExpr=R;var M=function(t){a(e,y);function e(t){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return c(e,[{key:"execute",value:function(t){return Math.abs(this._exprA.execute(t))}}]),e}();e.AbsExpr=M;var D=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){if((void 0===this._offset||this._offset<0)&&(this._offset=this._exprB.execute(t),this._offset<0))throw"offset < 0";if((t-=this._offset)<0)throw"index < 0";var e=this._exprA.execute(t);if(isNaN(e))throw"NaN";return e}}]),e}();e.RefExpr=D;var L=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)&&0!==this._exprB.execute(t)?1:0}}]),e}();e.AndExpr=L;var j=function(t){a(e,b);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)||0!==this._exprB.execute(t)?1:0}}]),e}();e.OrExpr=j;var F=function(t){a(e,w);function e(t,n,r){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r))}return c(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)?this._exprB.execute(t):this._exprC.execute(t)}}]),e}();e.IfExpr=F;var U=function(t){a(e,y);function e(t,n){var r;return s(this,e),(r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n)))._name=t,r._buf=[],r}return c(e,[{key:"getName",value:function(){return this._name}},{key:"execute",value:function(t){return this._buf[t]}},{key:"assign",value:function(t){if(this._buf[t]=this._exprA.execute(t),l.get()._firstIndex>=0&&isNaN(this._buf[t])&&!isNaN(this._buf[t-1]))throw this._name+".assign("+t+"): NaN"}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var r=n;r>0;r--)this._buf.push(NaN);i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clear",this).call(this),this._buf=[]}}]),e}();e.AssignExpr=U;var V=function(t){a(e,U);function e(t,n,r,i){var a;return s(this,e),(a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)))._style=void 0===r?e.outputStyle.Line:r,a._color=i,a}return c(e,[{key:"getStyle",value:function(){return this._style}},{key:"getColor",value:function(){return this._color}}]),e}();e.OutputExpr=V,V.outputStyle={None:0,Line:1,VolumeStick:2,MACDStick:3,SARPoint:4};var B=function(t){a(e,V);function e(t,n,r,i){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i))}return c(e,[{key:"getName",value:function(){return this._name+this._exprA.getRange()}}]),e}();e.RangeOutputExpr=B;var W=function(t){a(e,b);function e(t,n){var r;return s(this,e),(r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)))._range=-1,r._buf=[],r}return c(e,[{key:"getRange",value:function(){return this._range}},{key:"initRange",value:function(){this._range=this._exprB.execute(0)}},{key:"execute",value:function(t){this._range<0&&this.initRange();var e=this._buf[t].resultA=this._exprA.execute(t);return this._buf[t].result=this.calcResult(t,e)}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var r=n;r>0;r--)this._buf.push({resultA:NaN,result:NaN});i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clear",this).call(this),this._range=-1,this._buf=[]}}]),e}();e.RangeExpr=W;var G=function(t){a(e,W);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=l.get()._firstIndex;if(n<0)return e;if(t>n){for(var r=e,i=t-this._range+1,o=Math.max(n,i);o<t;o++){var a=this._buf[o];r<a.resultA&&(r=a.resultA)}return r}return e}}]),e}();e.HhvExpr=G;var Y=function(t){a(e,W);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=l.get()._firstIndex;if(n<0)return e;if(t>n){for(var r=e,i=t-this._range+1,o=Math.max(n,i);o<t;o++){var a=this._buf[o];r>a.resultA&&(r=a.resultA)}return r}return e}}]),e}();e.LlvExpr=Y;var H=function(t){a(e,W);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=l.get()._firstIndex;if(n<0)return 0;if(t>=n){var r=this._range-1;r>t-n&&(r=t-n);for(var i=0;r>=0;r--)0!==this._buf[t-r].resultA&&i++;return i}return 0}}]),e}();e.CountExpr=H;var z=function(t){a(e,W);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"calcResult",value:function(t,e){var n=l.get()._firstIndex;if(n<0)return e;if(t>n){var r=this._range;return 0===r||r>=t+1-n?this._buf[t-1].result+e:this._buf[t-1].result+e-this._buf[t-r].resultA}return e}}]),e}();e.SumExpr=z;var q=function(t){a(e,W);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=this._stdBuf[t],r=l.get()._firstIndex;if(r<0)return n.resultMA=e,0;if(t>r){var i=this._range;i>=t+1-r?(i=t+1-r,n.resultMA=this._stdBuf[t-1].resultMA*(1-1/i)+e/i):n.resultMA=this._stdBuf[t-1].resultMA+(e-this._buf[t-i].resultA)/i;for(var o=0,a=t-i+1;a<=t;a++)o+=Math.pow(this._buf[a].resultA-n.resultMA,2);return Math.sqrt(o/i)}return n.resultMA=e,0}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var r=n;r>0;r--)this._stdBuf.push({resultMA:NaN});i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clear",this).call(this),this._stdBuf=[]}}]),e}();e.StdExpr=q;var X=function(t){a(e,W);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=l.get()._firstIndex;if(n<0)return e;if(t>n){var r=this._range;return r>=t+1-n?(r=t+1-n,this._buf[t-1].result*(1-1/r)+e/r):this._buf[t-1].result+(e-this._buf[t-r].resultA)/r}return e}}]),e}();e.MaExpr=X;var Q=function(t){a(e,W);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"initRange",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initRange",this).call(this),this._alpha=2/(this._range+1)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=l.get()._firstIndex;if(n<0)return e;if(t>n){var r=this._buf[t-1];return this._alpha*(e-r.result)+r.result}return e}}]),e}();e.EmaExpr=Q;var K=function(t){a(e,Q);function e(t,n){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return c(e,[{key:"calcResult",value:function(t,e){var n=l.get()._firstIndex;if(n<0)return e;if(t>n){var r=this._range,i=this._buf[t-1];return r>=t+1-n?(r=t+1-n,i.result*(1-1/r)+e/r):this._alpha*(e-i.result)+i.result}return e}}]),e}();e.ExpmemaExpr=K;var Z=function(t){a(e,W);function e(t,n,r){var i;return s(this,e),(i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)))._exprC=r,i._mul=null,i}return c(e,[{key:"initRange",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initRange",this).call(this),this._mul=this._exprC.execute(0)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=l.get()._firstIndex;if(n<0)return e;if(t>n){var r=this._range;return r>t+1-n&&(r=t+1-n),((r-1)*this._buf[t-1].result+e*this._mul)/r}return e}}]),e}();e.SmaExpr=Z;var J=function(t){a(e,C);function e(t,n,r,i){var a;return s(this,e),(a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i)))._buf=[],a._range=-1,a._min=null,a._step=null,a._max=null,a}return c(e,[{key:"execute",value:function(t){this._range<0&&(this._range=this._exprA.execute(0),this._min=this._exprB.execute(0)/100,this._step=this._exprC.execute(0)/100,this._max=this._exprD.execute(0)/100);var e=this._buf[t],n=l.get(),r=n._firstIndex;if(r<0)e.longPos=!0,e.sar=n._ds.getDataAt(t).low,e.ep=n._ds.getDataAt(t).high,e.af=.02;else{var i=n._ds.getDataAt(t).high,o=n._ds.getDataAt(t).low,a=this._buf[t-1];if(e.sar=a.sar+a.af*(a.ep-a.sar),a.longPos){if(e.longPos=!0,i>a.ep?(e.ep=i,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar>o){e.longPos=!1;var s=t-this._range+1;for(s=Math.max(s,r);s<t;s++){var u=n._ds.getDataAt(s).high;i<u&&(i=u)}e.sar=i,e.ep=o,e.af=.02}}else if(e.longPos=!1,o<a.ep?(e.ep=o,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar<i){e.longPos=!0;var c=t-this._range+1;for(c=Math.max(c,r);c<t;c++){var h=n._ds.getDataAt(c).low;o>h&&(o=h)}e.sar=o,e.ep=i,e.af=.02}}return e.sar}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var r=n;r>0;r--)this._buf.push({longPos:!0,sar:NaN,ep:NaN,af:NaN});i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clear",this).call(this),this._range=-1}}]),e}();e.SarExpr=J},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MEvent=void 0;function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers=[]}e=t,i=void 0,(n=[{key:"addHandler",value:function(t,e){this.indexOf(t,e)<0&&this._handlers.push({obj:t,func:e})}},{key:"removeHandler",value:function(t,e){var n=this.indexOf(t,e);n>=0&&this._handlers.splice(n,1)}},{key:"raise",value:function(t,e){var n,r=this._handlers,i=r.length;for(n=0;n<i;n++)r[n].func(t,e)}},{key:"indexOf",value:function(t,e){var n,r,i=this._handlers,o=i.length;for(r=0;r<o;r++)if(t===(n=i[r]).obj&&e===n.func)return r;return-1}}])&&r(e.prototype,n),i&&r(e,i);var e,n,i;return t}();e.MEvent=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PercentageRange=e.ZeroCenteredRange=e.MainRange=e.ZeroBasedPositiveRange=e.PositiveRange=e.Range=void 0;var r=n(8),i=n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function c(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){l(e,r.NamedObject);function e(t){var n;return a(this,e),(n=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._updated=!0,n._minValue=Number.MAX_VALUE,n._maxValue=-Number.MAX_VALUE,n._outerMinValue=Number.MAX_VALUE,n._outerMaxValue=-Number.MAX_VALUE,n._ratio=0,n._top=0,n._bottom=0,n._paddingTop=0,n._paddingBottom=0,n._minInterval=36,n._selectedPosition=-1,n._selectedValue=-Number.MAX_VALUE,n._gradations=[],n}return u(e,[{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getRange",value:function(){return this._maxValue-this._minValue}},{key:"getOuterMinValue",value:function(){return this._outerMinValue}},{key:"getOuterMaxValue",value:function(){return this._outerMaxValue}},{key:"getOuterRange",value:function(){return this._outerMaxValue-this._outerMinValue}},{key:"getHeight",value:function(){return Math.max(0,this._bottom-this._top)}},{key:"getGradations",value:function(){return this._gradations}},{key:"getMinInterval",value:function(){return this._minInterval}},{key:"setMinInterval",value:function(t){this._minInterval=t}},{key:"getSelectedPosition",value:function(){return this._selectedPosition>=0?this._selectedPosition:this._selectedValue>-Number.MAX_VALUE?this.toY(this._selectedValue):-1}},{key:"getSelectedValue",value:function(){if(this._selectedValue>-Number.MAX_VALUE)return this._selectedValue;var t=i.ChartManager.instance.getArea(this.getAreaName());return null===t?-Number.MAX_VALUE:this._selectedPosition<t.getTop()+12||this._selectedPosition>=t.getBottom()-4?-Number.MAX_VALUE:this.toValue(this._selectedPosition)}},{key:"setPaddingTop",value:function(t){this._paddingTop=t}},{key:"setPaddingBottom",value:function(t){this._paddingBottom=t}},{key:"toValue",value:function(t){return this._maxValue-(t-this._top)/this._ratio}},{key:"toY",value:function(t){return this._ratio>0?this._top+Math.floor((this._maxValue-t)*this._ratio+.5):this._top}},{key:"toHeight",value:function(t){return Math.floor(t*this._ratio+1.5)}},{key:"update",value:function(){for(var t,e=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=i.ChartManager.instance,o=[".main",".secondary"],a=0;a<o.length;a++)null!==(t=r.getDataProvider(this.getName()+o[a]))&&void 0!==t&&(e=Math.min(e,t.getMinValue()),n=Math.max(n,t.getMaxValue()));var s={min:e,max:n};this.preSetRange(s),this.setRange(s.min,s.max)}},{key:"select",value:function(t){this._selectedValue=t,this._selectedPosition=-1}},{key:"selectAt",value:function(t){this._selectedPosition=t,this._selectedValue=-Number.MAX_VALUE}},{key:"unselect",value:function(){this._selectedPosition=-1,this._selectedValue=-Number.MAX_VALUE}},{key:"preSetRange",value:function(t){t.min===t.max&&(t.min=-1,t.max=1)}},{key:"setRange",value:function(t,e){var n=i.ChartManager.instance.getArea(this.getAreaName());if(this._minValue!==t||this._maxValue!==e||n.isChanged()){this._updated=!0,this._minValue=t,this._maxValue=e,this._gradations=[];var r=n.getTop()+this._paddingTop,o=n.getBottom()-(this._paddingBottom+1);r>=o?this._minValue=this._maxValue:(this._top=r,this._bottom=o,this._maxValue>this._minValue?this._ratio=(o-r)/(this._maxValue-this._minValue):this._ratio=1,this._outerMinValue=this.toValue(n.getBottom()),this._outerMaxValue=this.toValue(n.getTop()),this.updateGradations())}}},{key:"calcInterval",value:function(){var t=this.getHeight(),e=this.getMinInterval();t/e<=1&&(e=t>>1);for(var n=this.getRange(),r=0;r>-2&&Math.floor(n)<n;)n*=10,r--;for(var i,o;(i=o=Math.pow(10,r),!(this.toHeight(i)>e))&&(i=2*o,!(this.toHeight(i)>e))&&(i=5*o,!(this.toHeight(i)>e));r++);return i}},{key:"updateGradations",value:function(){this._gradations=[];var t=this.calcInterval();if(!(t<=0)){var e=Math.floor(this.getMaxValue()/t)*t;do{this._gradations.push(e),e-=t}while(e>this.getMinValue())}}}]),e}();e.Range=h;var d=function(t){l(e,h);function e(t){return a(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return u(e,[{key:"preSetRange",value:function(t){t.min<0&&(t.min=0),t.max<0&&(t.max=0)}}]),e}();e.PositiveRange=d;var p=function(t){l(e,h);function e(t){return a(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return u(e,[{key:"preSetRange",value:function(t){t.min=0,t.max<0&&(t.max=0)}}]),e}();e.ZeroBasedPositiveRange=p;var f=function(t){l(e,h);function e(t){return a(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return u(e,[{key:"preSetRange",value:function(t){var e=i.ChartManager.instance,n=e.getTimeline(this.getDataSourceName()),r=n.getMaxIndex()-n.getLastIndex();if(r<25){var o=e.getDataSource(this.getDataSourceName()),a=o.getDataAt(o.getDataCount()-1),s=(t.max-t.min)/4*(1-r/25);t.min=Math.min(t.min,Math.max(a.low-s,0)),t.max=Math.max(t.max,a.high+s)}if(t.min>0){var u=t.max/t.min;if(u<1.016){var c=(t.max+t.min)/2,l=1.5*(u-1);t.max=c*(1+l),t.min=c*(1-l)}else if(u<1.048){var h=(t.max+t.min)/2;t.max=1.024*h,t.min=.976*h}}t.min<0&&(t.min=0),t.max<0&&(t.max=0)}}]),e}();e.MainRange=f;var _=function(t){l(e,h);function e(t){return a(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return u(e,[{key:"calcInterval",value:function(t){var e=this.getMinInterval();if(t.getHeight()/e<2)return 0;var n,r=this.getRange();for(n=3;!(this.toHeight(r/n)<=e);n+=2);return r/(n-=2)}},{key:"updateGradations",value:function(){this._gradations=[];var t=i.ChartManager.instance.getArea(this.getAreaName()),e=this.calcInterval(t);if(!(e<=0)){var n=e/2;do{this._gradations.push(n),this._gradations.push(-n),n+=e}while(n<=this.getMaxValue())}}},{key:"preSetRange",value:function(t){var e=Math.max(Math.abs(t.min),Math.abs(t.max));t.min=-e,t.max=e}}]),e}();e.ZeroCenteredRange=_;var g=function(t){l(e,h);function e(t){return a(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return u(e,[{key:"updateGradations",value:function(){this._gradations=[];var t=i.ChartManager.instance.getArea(this.getAreaName()),e=Math.floor(this.toHeight(10));if(!(e<<2>t.getHeight())){var n=10*Math.ceil(this.getMinValue()/10);if(0===n&&(n=0),e<<2<24){if(e<<1<8)return;do{20!==n&&80!==n||this._gradations.push(n),n+=10}while(n<this.getMaxValue())}else do{e<8?20!==n&&50!==n&&80!==n||this._gradations.push(n):0!==n&&20!==n&&50!==n&&80!==n&&100!==n||this._gradations.push(n),n+=10}while(n<this.getMaxValue())}}}]),e}();e.PercentageRange=g},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_59__},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=s(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||l||s(p)};function f(t,e){this.fun=t,this.array=e}f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function _(){}i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(43);e.assert=function(t,n){if(!t)throw e.assertionError(n)},e.assertionError=function(t){return new Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};e.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(d=64)),r.push(n[l],n[h],n[d],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!=s){var l=a<<4&240|s>>2;if(r.push(l),64!=u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},e.base64Encode=function(t){var n=r(t);return e.base64.encodeByteArray(n,!0)},e.base64Decode=function(t){try{return e.base64.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.jsonEval=function(t){return JSON.parse(t)};e.stringify=function(t){return JSON.stringify(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.forEach=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},e.extend=function(t,n){return e.forEach(n,function(e,n){t[e]=n}),t},e.clone=function(t){return e.extend({},t)},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.findKey=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},e.findValue=function(t,n,r){var i=e.findKey(t,n,r);return i&&t[i]},e.getAnyKey=function(t){for(var e in t)return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(66),o=n(2),a=n(44),s=n(31),u=n(49),c=n(0),l=n(12),h=function(){function t(t){this.repo_=t,t instanceof s.Repo||r.fatal("Don't call new Database() directly - please use firebase.database()."),this.root_=new a.Reference(t,o.Path.Empty),this.INTERNAL=new d(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),c.validateArgCount("database.ref",0,1,arguments.length),void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),c.validateArgCount(e,1,1,arguments.length);var n=i.parseRepoInfo(t);l.validateUrl(e,1,n);var o=n.repoInfo;return o.host!==this.repo_.repoInfo_.host&&r.fatal(e+": Host name does not match the current database: (found "+o.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&r.fatal("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){c.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){c.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}();e.Database=h;var d=function(){function t(t){this.database=t}return t.prototype.delete=function(){return this.database.checkDeleted_("delete"),u.RepoManager.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,Promise.resolve()},t}();e.DatabaseInternals=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(67),o=n(1);e.parseRepoInfo=function(t){var n=e.parseURL(t),a=n.subdomain;"firebase"===n.domain&&o.fatal(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),a&&"undefined"!=a||o.fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||o.warnIfPageIsSecure();var s="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new i.RepoInfo(n.host,n.secure,a,s),path:new r.Path(n.pathString)}},e.parseURL=function(t){var e="",n="",r="",i="",o=!0,a="https",s=443;if("string"==typeof t){var u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));var c=t.indexOf("/");-1===c&&(c=t.length),e=t.substring(0,c),i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(c));var l=e.split(".");3===l.length?(n=l[1],r=l[0].toLowerCase()):2===l.length&&(n=l[0]),(u=e.indexOf(":"))>=0&&(o="https"===a||"wss"===a,s=parseInt(e.substring(u+1),10))}return{host:e,port:s,domain:n,subdomain:r,secure:o,scheme:a,pathString:i}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(0),o=n(26),a=n(27),s=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=o.PersistentStorage.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&o.PersistentStorage.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){r.assert("string"==typeof t,"typeof type must == string"),r.assert("object"==typeof e,"typeof params must == object");var n;if(t===a.WEBSOCKET)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==a.LONG_POLLING)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var o=[];return i.forEach(e,function(t,e){o.push(t+"="+e)}),n+o.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();e.RepoInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(12),o=n(1),a=n(0),s=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){r.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),r.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){r.validateArgCount("OnDisconnect.remove",0,1,arguments.length),i.validateWritablePath("OnDisconnect.remove",this.path_),r.validateCallback("OnDisconnect.remove",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){r.validateArgCount("OnDisconnect.set",1,2,arguments.length),i.validateWritablePath("OnDisconnect.set",this.path_),i.validateFirebaseDataArg("OnDisconnect.set",1,t,this.path_,!1),r.validateCallback("OnDisconnect.set",2,e,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){r.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),i.validateWritablePath("OnDisconnect.setWithPriority",this.path_),i.validateFirebaseDataArg("OnDisconnect.setWithPriority",1,t,this.path_,!1),i.validatePriority("OnDisconnect.setWithPriority",2,e,!1),r.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var o=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,o.wrapCallback(n)),o.promise},t.prototype.update=function(t,e){if(r.validateArgCount("OnDisconnect.update",1,2,arguments.length),i.validateWritablePath("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},s=0;s<t.length;++s)n[""+s]=t[s];t=n,o.warn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}i.validateFirebaseMergeDataArg("OnDisconnect.update",1,t,this.path_,!1),r.validateCallback("OnDisconnect.update",2,e,!0);var u=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,u.wrapCallback(e)),u.promise},t}();e.OnDisconnect=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(21),a=n(4),s=n(71),u=n(75),c=n(1),l=n(2),h=n(12),d=n(0),p=n(151),f=n(0),_=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return i.assert(r,"Reference.ts has not been loaded"),r},set:function(t){r=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===o.KEY_INDEX){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",l="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=c.MIN_NAME)throw new Error(r);if("string"!=typeof e)throw new Error(l)}if(t.hasEnd()){if(t.getIndexEndName()!=c.MAX_NAME)throw new Error(r);if("string"!=typeof n)throw new Error(l)}}else if(t.getIndex()===a.PRIORITY_INDEX){if(null!=e&&!h.isValidPriority(e)||null!=n&&!h.isValidPriority(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(i.assert(t.getIndex()instanceof u.PathIndex||t.getIndex()===s.VALUE_INDEX,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return d.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){d.validateArgCount("Query.on",2,4,arguments.length),h.validateEventType("Query.on",1,e,!1),d.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new p.ValueEventRegistration(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new p.ChildEventRegistration(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){d.validateArgCount("Query.off",0,3,arguments.length),h.validateEventType("Query.off",1,t,!0),d.validateCallback("Query.off",2,e,!0),d.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new p.ValueEventRegistration(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new p.ChildEventRegistration(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;d.validateArgCount("Query.once",1,4,arguments.length),h.validateEventType("Query.once",1,e,!1),d.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new f.Deferred;u.promise.catch(function(){});var c=function(t){s&&(s=!1,o.off(e,c),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,c,function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)}),u.promise},t.prototype.limitToFirst=function(e){if(d.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(d.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(d.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');h.validatePathString("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new l.Path(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new u.PathIndex(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){d.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(o.KEY_INDEX);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){d.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(a.PRIORITY_INDEX);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){d.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(s.VALUE_INDEX);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),d.validateArgCount("Query.startAt",0,2,arguments.length),h.validateFirebaseDataArg("Query.startAt",1,e,this.path,!0),h.validateKey("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),d.validateArgCount("Query.endAt",0,2,arguments.length),h.validateFirebaseDataArg("Query.endAt",1,e,this.path,!0),h.validateKey("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(d.validateArgCount("Query.equalTo",1,2,arguments.length),h.validateFirebaseDataArg("Query.equalTo",1,t,this.path,!1),h.validateKey("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return d.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return d.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=c.ObjectToUniqueKey(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(d.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var n=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return n&&r&&i},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,d.validateCallback(t,3,r.cancel,!0),r.context=n,d.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(d.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}();e.Query=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(1),a=n(0);e.setMaxNode=function(t){r=t},e.priorityHashText=function(t){return"number"==typeof t?"number:"+o.doubleToIEEE754String(t):"string:"+t},e.validatePriorityNode=function(t){if(t.isLeafNode()){var e=t.val();i.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&a.contains(e,".sv"),"Priority must be a string or number.")}else i.assert(t===r||t.isEmpty(),"priority of unexpected type.");i.assert(t===r||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(28),o=n(6),a=n(1),s=n(22),u=function(t){r(e,t);function e(){return null!==t&&t.apply(this,arguments)||this}return e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?a.nameCompare(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return o.NamedNode.MIN},e.prototype.maxPost=function(){return o.NamedNode.MAX},e.prototype.makePost=function(t,e){var n=s.nodeFromJSON(t);return new o.NamedNode(e,n)},e.prototype.toString=function(){return".value"},e}(i.Index);e.ValueIndex=u,e.VALUE_INDEX=new u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(73),a=n(0),s=n(6),u=n(4),c=n(21),l={},h=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return i.assert(l&&u.PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),r=r||new t({".priority":l},{".priority":u.PRIORITY_INDEX})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=a.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===l?null:e},t.prototype.hasIndex=function(t){return a.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){i.assert(e!==c.KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],u=!1,h=n.getIterator(s.NamedNode.Wrap),d=h.getNext();d;)u=u||e.isDefinedOn(d.node),r.push(d),d=h.getNext();var p;p=u?o.buildChildSet(r,e.getCompare()):l;var f=e.toString(),_=a.clone(this.indexSet_);_[f]=e;var g=a.clone(this.indexes_);return g[f]=p,new t(g,_)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(a.map(this.indexes_,function(t,u){var c=a.safeGet(r.indexSet_,u);if(i.assert(c,"Missing index implementation for "+u),t===l){if(c.isDefinedOn(e.node)){for(var h=[],d=n.getIterator(s.NamedNode.Wrap),p=d.getNext();p;)p.name!=e.name&&h.push(p),p=d.getNext();return h.push(e),o.buildChildSet(h,c.getCompare())}return l}var f=n.get(e.name),_=t;return f&&(_=_.remove(new s.NamedNode(e.name,f))),_.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(a.map(this.indexes_,function(t){if(t===l)return t;var r=n.get(e.name);return r?t.remove(new s.NamedNode(e.name,r)):t}),this.indexSet_)},t}();e.IndexMap=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),i=n(30),o=Math.log(2),a=function(){function t(t){this.count=(e=t+1,parseInt(Math.log(e)/o,10));var e;this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}();e.buildChildSet=function(t,e,n,o){t.sort(e);var s=function(e,i){var o,a,u=i-e;if(0==u)return null;if(1==u)return o=t[e],a=n?n(o):o,new r.LLRBNode(a,o.node,r.LLRBNode.BLACK,null,null);var c=parseInt(u/2,10)+e,l=s(e,c),h=s(c+1,i);return o=t[c],a=n?n(o):o,new r.LLRBNode(a,o.node,r.LLRBNode.BLACK,l,h)},u=function(e){for(var i=null,o=null,a=t.length,u=function(e,i){var o=a-e,u=a;a-=e;var l=s(o+1,u),h=t[o],d=n?n(h):h;c(new r.LLRBNode(d,h.node,i,null,l))},c=function(t){i?(i.left=t,i=t):(o=t,i=t)},l=0;l<e.count;++l){var h=e.nextBitIsOne(),d=Math.pow(2,e.count-(l+1));h?u(d,r.LLRBNode.BLACK):(u(d,r.LLRBNode.BLACK),u(d,r.LLRBNode.RED))}return o}(new a(t.length));return new i.SortedMap(o||e,u)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.NAME_ONLY_COMPARATOR=function(t,e){return r.nameCompare(t.name,e.name)};e.NAME_COMPARATOR=function(t,e){return r.nameCompare(t,e)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),a=n(28),s=n(5),u=n(6),c=n(22),l=function(t){r(e,t);function e(e){var n=t.call(this)||this;return n.indexPath_=e,i.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?o.nameCompare(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=c.nodeFromJSON(t),r=s.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,n);return new u.NamedNode(e,r)},e.prototype.maxPost=function(){var t=s.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,s.MAX_NODE);return new u.NamedNode(o.MAX_NAME,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(a.Index);e.PathIndex=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(77),a=n(29),s=n(22),u=n(4);e.generateWithValues=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},e.resolveDeferredValue=function(t,e){return t&&"object"==typeof t?(r.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},e.resolveDeferredValueTree=function(t,n){var r=new o.SparseSnapshotTree;return t.forEachTree(new i.Path(""),function(t,i){r.remember(t,e.resolveDeferredValueSnapshot(i,n))}),r},e.resolveDeferredValueSnapshot=function(t,n){var r,i=t.getPriority().val(),o=e.resolveDeferredValue(i,n);if(t.isLeafNode()){var c=t,l=e.resolveDeferredValue(c.getValue(),n);return l!==c.getValue()||o!==c.getPriority().val()?new a.LeafNode(l,s.nodeFromJSON(o)):t}var h=t;return r=h,o!==h.getPriority().val()&&(r=r.updatePriority(new a.LeafNode(o))),h.forEachChild(u.PRIORITY_INDEX,function(t,i){var o=e.resolveDeferredValueSnapshot(i,n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(4),o=n(78),a=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();if(t=t.popFront(),this.children_.contains(e)){return this.children_.get(e).find(t)}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new o.CountedSet);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new t);var i=this.children_.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(i.PRIORITY_INDEX,function(t,e){n.remember(new r.Path(t),e)}),this.forget(t)}if(null!==this.children_){var o=t.getFront();if(t=t.popFront(),this.children_.contains(o)){this.children_.get(o).forget(t)&&this.children_.remove(o)}return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,i){var o=new r.Path(t.toString()+"/"+n);i.forEachTree(o,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}();e.SparseSnapshotTree=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return r.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return r.isEmpty(this.set)},t.prototype.count=function(){return r.getCount(this.set)},t.prototype.each=function(t){r.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return r.forEach(this.set,function(e){t.push(e)}),t},t}();e.CountedSet=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=n(2),o=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=r.OperationType.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,i.Path.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}();e.Overwrite=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(32),o=n(5),a=n(0),s=n(0),u=n(81),c=n(157),l=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return a.assert(r,"Reference.ts has not been loaded"),r},set:function(t){a.assert(!r,"__referenceConstructor has already been defined"),r=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return s.isEmpty(this.views_)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var i=s.safeGet(this.views_,r);return a.assert(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(t,e,n)}var o=[];return s.forEach(this.views_,function(r,i){o=o.concat(i.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,r,a){var l=t.queryIdentifier(),h=s.safeGet(this.views_,l);if(!h){var d=n.calcCompleteEventCache(a?r:null),p=!1;d?p=!0:r instanceof o.ChildrenNode?(d=n.calcCompleteEventChildren(r),p=!1):(d=o.ChildrenNode.EMPTY_NODE,p=!1);var f=new u.ViewCache(new i.CacheNode(d,p,!1),new i.CacheNode(r,a,!1));h=new c.View(t,f),this.views_[l]=h}return h.addEventRegistration(e),h.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i=e.queryIdentifier(),o=[],a=[],u=this.hasCompleteView();if("default"===i){var c=this;s.forEach(this.views_,function(t,e){a=a.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete c.views_[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var l=s.safeGet(this.views_,i);l&&(a=a.concat(l.removeEventRegistration(n,r)),l.isEmpty()&&(delete this.views_[i],l.getQuery().getQueryParams().loadsAllData()||o.push(l.getQuery())))}return u&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:a}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return s.forEach(this.views_,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return s.safeGet(this.views_,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){return s.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},t}();e.SyncPoint=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(32),o=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new i.CacheNode(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new i.CacheNode(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1),new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1)),t}();e.ViewCache=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=r.clone(t);return this.last_&&r.forEach(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}();e.StatsListener=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),o=n(0),a=n(0),s=n(0),u=n(1),c=n(2),l=n(169),h=n(170),d=n(0),p=n(85),f=n(0),_=n(0),g=1e3,v=3e5,m=function(t){r(e,t);function e(n,r,i,o,a,s){var c=t.call(this)||this;if(c.repoInfo_=n,c.onDataUpdate_=r,c.onConnectStatus_=i,c.onServerInfoUpdate_=o,c.authTokenProvider_=a,c.authOverride_=s,c.id=e.nextPersistentConnectionId_++,c.log_=u.logWrapper("p:"+c.id+":"),c.interruptReasons_={},c.listens_={},c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=g,c.maxReconnectDelay_=v,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,s&&!_.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),l.VisibilityMonitor.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&h.OnlineMonitor.getInstance().on("online",c.onOnline_,c),c}return e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(a.stringify(i)),s.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),s.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r);(n.listens_[i]&&n.listens_[i][o])===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&o.contains(t,"w")){var n=o.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();u.warn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||d.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=d.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+a.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):u.error("Unrecognized action received from server: "+a.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;s.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=g,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=g,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=g),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,r())},d=function(t){s.assert(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)};this.realtime_={close:h,sendRequest:d};var _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(_).then(function(e){c?u.log("getToken() completed but was canceled"):(u.log("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,l=new p.Connection(i,o.repoInfo_,t,n,r,function(t){u.warn(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(t){o.log_("Failed to get token: "+t),c||(f.CONSTANTS.NODE_ADMIN&&u.warn(t),h())})}},e.prototype.interrupt=function(t){u.log("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){u.log("Resuming connection for reason: "+t),delete this.interruptReasons_[t],o.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=g,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return u.ObjectToUniqueKey(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new c.Path(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===o.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){u.log("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&"undefined"!=typeof console&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),o.forEach(this.listens_,function(e,n){o.forEach(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";f.CONSTANTS.NODE_ADMIN?e="admin_node":f.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+i.default.SDK_VERSION.replace(/\./g,"-")]=1,_.isMobileCordova()?t["framework.cordova"]=1:_.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=h.OnlineMonitor.getInstance().currentlyOnline();return o.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(n(88).ServerActions);e.PersistentConnection=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t){this.allowedEvents_=t,this.listeners_={},r.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){r.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}();e.EventEmitter=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(26),o=n(27),a=n(171),s=function(){function t(t,e,n,i,o,s,u){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=r.logWrapper("c:"+this.id+":"),this.transportManager_=new a.TransportManager(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,i)},Math.floor(0));var o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=r.setTimeoutNonBlocking(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(o)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=r.requireKey("t",t),n=r.requireKey("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=r.requireKey("t",t),n=r.requireKey("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=r.requireKey("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?r.error("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):r.error("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),o.PROTOCOL_VERSION!==n&&r.warn("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),r.setTimeoutNonBlocking(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):r.setTimeoutNonBlocking(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(i.PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}();e.Connection=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(78),o=n(48),a=n(172),s=n(27),u=n(0),c=n(0);e.FIREBASE_LONGPOLL_START_PARAM="start",e.FIREBASE_LONGPOLL_CLOSE_COMMAND="close",e.FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",e.FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",e.FIREBASE_LONGPOLL_ID_PARAM="id",e.FIREBASE_LONGPOLL_PW_PARAM="pw",e.FIREBASE_LONGPOLL_SERIAL_PARAM="ser",e.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",e.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",e.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",e.FIREBASE_LONGPOLL_DATA_PARAM="d",e.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM="disconn",e.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe";var l=function(){function t(t,e,n,i){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=r.logWrapper(t),this.stats_=o.StatsManager.getCollection(e),this.urlFn=function(t){return e.connectionURL(s.LONG_POLLING,t)}}return t.prototype.open=function(t,n){var i=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new a.PacketReceiver(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){i.log_("Timed out trying to connect."),i.onClosed_(),i.connectTimeoutTimer_=null},Math.floor(3e4)),r.executeWhenDOMReady(function(){if(!i.isClosed_){i.scriptTagHolder=new h(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=t[1],a=t[2];t[3],t[4];if(i.incrementIncomingBytes_(t),i.scriptTagHolder)if(i.connectTimeoutTimer_&&(clearTimeout(i.connectTimeoutTimer_),i.connectTimeoutTimer_=null),i.everConnected_=!0,r==e.FIREBASE_LONGPOLL_START_PARAM)i.id=o,i.password=a;else{if(r!==e.FIREBASE_LONGPOLL_CLOSE_COMMAND)throw new Error("Unrecognized command received: "+r);o?(i.scriptTagHolder.sendNewPolls=!1,i.myPacketOrderer.closeAfter(o,function(){i.onClosed_()})):i.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];i.incrementIncomingBytes_(t),i.myPacketOrderer.handleResponse(n,r)},function(){i.onClosed_()},i.urlFn);var t={};t[e.FIREBASE_LONGPOLL_START_PARAM]="t",t[e.FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(1e8*Math.random()),i.scriptTagHolder.uniqueCallbackIdentifier&&(t[e.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=i.scriptTagHolder.uniqueCallbackIdentifier),t[s.VERSION_PARAM]=s.PROTOCOL_VERSION,i.transportSessionId&&(t[s.TRANSPORT_SESSION_PARAM]=i.transportSessionId),i.lastSessionId&&(t[s.LAST_SESSION_PARAM]=i.lastSessionId),!c.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(s.FORGE_DOMAIN)&&(t[s.REFERER_PARAM]=s.FORGE_REF);var n=i.urlFn(t);i.log_("Connecting via long-poll to "+n),i.scriptTagHolder.addTag(n,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!r.isChromeExtensionContentScript()&&!r.isWindowsStoreApp()&&!c.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=u.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=u.base64Encode(e),i=r.splitStringBySize(n,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,n){if(!c.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var r={};r[e.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",r[e.FIREBASE_LONGPOLL_ID_PARAM]=t,r[e.FIREBASE_LONGPOLL_PW_PARAM]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=u.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}();e.BrowserPollConnection=l;var h=function(){function t(n,o,a,s){if(this.onDisconnect=a,this.urlFn=s,this.outstandingRequests=new i.CountedSet,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,c.isNodeSdk())this.commandCB=n,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=r.LUIDGenerator(),window[e.FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=n,window[e.FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=o,this.myIFrame=t.createIFrame_();var u="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){u='<script>document.domain="'+document.domain+'";<\/script>'}var l="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(t){r.log("frame writing exception"),t.stack&&r.log(t.stack),r.log(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||r.log("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var n=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==n.myIFrame&&(document.body.removeChild(n.myIFrame),n.myIFrame=null)},Math.floor(0))),c.isNodeSdk()&&this.myID){var r={};r[e.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM]="t",r[e.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,r[e.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW;var i=this.urlFn(r);t.nodeRestRequest(i)}var o=this.onDisconnect;o&&(this.onDisconnect=null,o())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[e.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,t[e.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,t[e.FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;for(var n=this.urlFn(t),r="",i=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+r.length<=1870))break;var o=this.pendingSegs.shift();r=r+"&"+e.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+i+"="+o.seg+"&"+e.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+i+"="+o.ts+"&"+e.FIREBASE_LONGPOLL_DATA_PARAM+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;c.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=function(){r.log("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(t){}},Math.floor(1))},t}();e.FirebaseIFrameScriptHolder=h},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(0),o=n(1),a=n(48),s=n(27),u=n(0),c=n(26),l=n(0),h=n(0),d=null;"undefined"!=typeof MozWebSocket?d=MozWebSocket:"undefined"!=typeof WebSocket&&(d=WebSocket);e.setWebSocketImpl=function(t){d=t};var p=function(){function e(t,n,r,i){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=o.logWrapper(this.connId),this.stats_=a.StatsManager.getCollection(n),this.connURL=e.connectionURL_(n,r,i)}return e.connectionURL_=function(t,e,n){var r={};return r[s.VERSION_PARAM]=s.PROTOCOL_VERSION,!h.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(s.FORGE_DOMAIN)&&(r[s.REFERER_PARAM]=s.FORGE_REF),e&&(r[s.TRANSPORT_SESSION_PARAM]=e),n&&(r[s.LAST_SESSION_PARAM]=n),t.connectionURL(s.WEBSOCKET,r)},e.prototype.open=function(e,n){var i=this;this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,c.PersistentStorage.set("previous_websocket_failure",!0);try{if(h.isNodeSdk()){var o=u.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/"+s.PROTOCOL_VERSION+"/"+r.default.SDK_VERSION+"/"+t.platform+"/"+o}},l=t.env,p=0==this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;p&&(a.proxy={origin:p}),this.mySock=new d(this.connURL,[],a)}else this.mySock=new d(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var f=t.message||t.data;return f&&this.log_(f),void this.onClosed_()}this.mySock.onopen=function(){i.log_("Websocket connected."),i.everConnected_=!0},this.mySock.onclose=function(){i.log_("Websocket connection was disconnected."),i.mySock=null,i.onClosed_()},this.mySock.onmessage=function(t){i.handleIncomingFrame(t)},this.mySock.onerror=function(t){i.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&i.log_(e),i.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==d&&!e.forceDisallow_},e.previouslyFailed=function(){return c.PersistentStorage.isInMemoryStorage||!0===c.PersistentStorage.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){c.PersistentStorage.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=l.jsonEval(e);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(i.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(t){this.resetKeepAlive();var e=l.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=o.splitStringBySize(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();e.WebSocketConnection=p}).call(e,n(60))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}();e.ServerActions=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(47),i=n(4),o=n(6),a=n(5),s=function(){function t(e){this.indexedFilter_=new r.IndexedFilter(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,s){return this.matches(new o.NamedNode(e,n))||(n=a.ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,s)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=a.ChildrenNode.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(a.ChildrenNode.EMPTY_NODE);var s=this;return e.forEachChild(i.PRIORITY_INDEX,function(t,e){s.matches(new o.NamedNode(t,e))||(r=r.updateImmediateChild(t,a.ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}();e.RangedFilter=s},function(t,e,n){"use strict";var r=n(0),i=(n.n(r),n(33)),o=n(183),a=n(92),s="messagingSenderId",u=function(){function t(t){var e=this;if(this.errorFactory_=new r.ErrorFactory("messaging","Messaging",i.a.map),!t.options[s]||"string"!=typeof t.options[s])throw this.errorFactory_.create(i.a.codes.BAD_SENDER_ID);this.messagingSenderId_=t.options[s],this.tokenManager_=new o.a,this.app=t,this.INTERNAL={},this.INTERNAL.delete=function(){return e.delete}}return t.prototype.getToken=function(){var t=this,e=this.getNotificationPermission_();return e!==a.a.granted?e===a.a.denied?Promise.reject(this.errorFactory_.create(i.a.codes.NOTIFICATIONS_BLOCKED)):Promise.resolve(null):this.getSWRegistration_().then(function(e){return t.tokenManager_.getSavedToken(t.messagingSenderId_,e).then(function(n){return n||t.tokenManager_.createToken(t.messagingSenderId_,e)})})},t.prototype.deleteToken=function(t){var e=this;return this.tokenManager_.deleteToken(t).then(function(){return e.getSWRegistration_().then(function(t){if(t)return t.pushManager.getSubscription()}).then(function(t){if(t)return t.unsubscribe()})})},t.prototype.getSWRegistration_=function(){throw this.errorFactory_.create(i.a.codes.SHOULD_BE_INHERITED)},t.prototype.requestPermission=function(){throw this.errorFactory_.create(i.a.codes.AVAILABLE_IN_WINDOW)},t.prototype.useServiceWorker=function(t){throw this.errorFactory_.create(i.a.codes.AVAILABLE_IN_WINDOW)},t.prototype.onMessage=function(t,e,n){throw this.errorFactory_.create(i.a.codes.AVAILABLE_IN_WINDOW)},t.prototype.onTokenRefresh=function(t,e,n){throw this.errorFactory_.create(i.a.codes.AVAILABLE_IN_WINDOW)},t.prototype.setBackgroundMessageHandler=function(t){throw this.errorFactory_.create(i.a.codes.AVAILABLE_IN_SW)},t.prototype.delete=function(){return this.tokenManager_.closeDatabase()},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenManager=function(){return this.tokenManager_},t}();e.a=u},function(t,e,n){"use strict";var r=[4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110],i={userVisibleOnly:!0,applicationServerKey:new Uint8Array(r)};e.a={ENDPOINT:"https://fcm.googleapis.com",APPLICATION_SERVER_KEY:r,SUBSCRIPTION_OPTIONS:i}},function(t,e,n){"use strict";e.a={granted:"granted",default:"default",denied:"denied"}},function(t,e,n){"use strict";var r={TYPE_OF_MSG:"firebase-messaging-msg-type",DATA:"firebase-messaging-msg-data"};e.a={PARAMS:r,TYPES_OF_MSG:{PUSH_MSG_RECEIVED:"push-msg-received",NOTIFICATION_CLICKED:"notification-clicked"},createNewMsg:function(t,e){return(n={})[r.TYPE_OF_MSG]=t,n[r.DATA]=e,n;var n}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;(i=r||(r={}))[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT";var i},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(50),i=n(97),o=n(9),a=n(35),s=n(51),u=n(17),c=n(96),l=n(98),h=n(23),d=n(7),p=n(194),f=function(){function t(t,e){this.authWrapper=t,e instanceof a.a?this.location=e:this.location=a.a.makeFromUrl(e)}return t.prototype.toString=function(){return r.g("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return s.b()},t.prototype.child=function(t){r.g("child",[r.e()],arguments);var e=c.a(this.location.path,t),n=new a.a(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=c.c(this.location.path);if(null===t)return null;var e=new a.a(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new a.a(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return c.b(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),r.g("put",[r.f(),r.b(!0)],arguments),this.throwIfRoot_("put"),new p.a(this,this.authWrapper,this.location,this.mappings(),new i.a(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=h.a.RAW),r.g("putString",[r.e(),r.e(h.c,!0),r.b(!0)],arguments),this.throwIfRoot_("putString");var o=h.b(e,t),a=u.a(n);return!d.a(a.contentType)&&d.a(o.contentType)&&(a.contentType=o.contentType),new p.a(this,this.authWrapper,this.location,this.mappings(),new i.a(o.data,!0),a)},t.prototype.delete=function(){r.g("delete",[],arguments),this.throwIfRoot_("delete");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=l.d(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.getMetadata=function(){r.g("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=l.e(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){r.g("updateMetadata",[r.b()],arguments),this.throwIfRoot_("updateMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=l.i(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){return r.g("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then(function(t){var e=t.downloadURLs[0];if(d.a(e))return e;throw o.l()})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw o.j(t)},t}()},function(t,e,n){"use strict";e.c=function(t){if(0==t.length)return null;var e=t.lastIndexOf("/");if(-1===e)return"";return t.slice(0,e)},e.a=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n},e.b=function(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(192),i=n(23),o=n(7),a=function(){function t(t,e){var n=0,r="";o.d(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(o.d(this.data_)){var i=this.data_,a=r.b(i,e,n);return null===a?null:new t(a)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(o.e()){var a=e.map(function(e){return e instanceof t?e.data_:e});return new t(r.a.apply(null,a))}var s=e.map(function(t){return o.j(t)?i.b(i.a.RAW,t).data:t.data_}),u=0;s.forEach(function(t){u+=t.byteLength});var c=new Uint8Array(u),l=0;return s.forEach(function(t){for(var e=0;e<t.length;e++)c[l++]=t[e]}),new t(c,!0)},t.prototype.uploadData=function(){return this.data_},t}()},function(t,e,n){"use strict";e.e=function(t,e,n){var r=e.fullServerUrl(),i=l.b(r),o=t.maxOperationRetryTime(),a=new u.a(i,"GET",d(t,n),o);return a.errorHandler=f(e),a},e.i=function(t,e,n,r){var i=e.fullServerUrl(),o=l.b(i),s=a.d(n,r),c=t.maxOperationRetryTime(),h=new u.a(o,"PATCH",d(t,r),c);return h.headers={"Content-Type":"application/json; charset=utf-8"},h.body=s,h.errorHandler=f(e),h},e.d=function(t,e){var n=e.fullServerUrl(),r=l.b(n),i=t.maxOperationRetryTime();var o=new u.a(r,"DELETE",function(t,e){},i);return o.successCodes=[200,204],o.errorHandler=f(e),o},e.g=function(t,e,n,r,s){var c=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};var f=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();h["Content-Type"]="multipart/related; boundary="+f;var g=_(e,r,s),v=a.d(g,n),m="--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+v+"\r\n--"+f+"\r\nContent-Type: "+g.contentType+"\r\n\r\n",y="\r\n--"+f+"--",b=i.a.getBlob(m,r,y);if(null===b)throw o.d();var w={name:g.fullPath},C=l.d(c),E=t.maxUploadRetryTime(),P=new u.a(C,"POST",d(t,n),E);return P.urlParams=w,P.headers=h,P.body=b.uploadData(),P.errorHandler=p(e),P},n.d(e,"a",function(){return g}),e.c=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=_(e,r,i),d={name:s.fullPath},f=l.d(o),g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},m=a.d(s,n),y=t.maxUploadRetryTime();var b=new u.a(f,"POST",function(t,e){v(t);var n;try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){h(!1)}return h(c.j(n)),n},y);return b.urlParams=d,b.headers=g,b.body=m,b.errorHandler=p(e),b},e.f=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new u.a(n,"POST",function(t,e){var n,i=v(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){h(!1)}var o=parseInt(n,10);return h(!isNaN(o)),new g(o,r.size(),"final"===i)},i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=p(e),o},n.d(e,"h",function(){return m}),e.b=function(t,e,n,r,i,a,s,c){var l=new g(0,0);s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size());if(r.size()!==l.total)throw o.p();var h=l.total-l.current,f=h;i>0&&(f=Math.min(f,i));var _=l.current,m=_+f,y={"X-Goog-Upload-Command":f===h?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},b=r.slice(_,m);if(null===b)throw o.d();var w=e.maxUploadRetryTime(),C=new u.a(n,"POST",function(t,n){var i,o=v(t,["active","final"]),s=l.current+f,u=r.size();i="final"===o?d(e,a)(t,n):null;return new g(s,u,"final"===o,i)},w);return C.headers=y,C.body=b.uploadData(),C.progressCallback=c||null,C.errorHandler=p(t),C};var r=n(53),i=n(97),o=n(9),a=n(51),s=n(17),u=n(193),c=n(7),l=n(52);function h(t){if(!t)throw o.s()}function d(t,e){return function(n,r){var i=a.a(t,r,e);return h(null!==i),i}}function p(t){return function(e,n){var r;return(r=401===e.getStatus()?o.q():402===e.getStatus()?o.n(t.bucket):403===e.getStatus()?o.r(t.path):n).setServerResponseProp(n.serverResponseProp()),r}}function f(t){var e=p(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=o.m(t.path)),i.setServerResponseProp(r.serverResponseProp()),i}}function _(t,e,n){var r=s.a(n);r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=(i=null,o=e,i&&i.contentType||o&&o.type()||"application/octet-stream"));var i,o;return r}var g=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function v(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){h(!1)}var i=e||["active"];return h(r.b(i,n)),n}var m=262144},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(15),r&&r.__esModule?r:{default:r});window.Kline=i.default;var o=i.default;e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chart=void 0;var r,i=n(3),o=n(36),a=(r=n(15),r&&r.__esModule?r:{default:r}),s=n(25);function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=null,this._charStyle="CandleStick",this._depthData={array:null,asks_count:0,bids_count:0,asks_si:0,asks_ei:0,bids_si:0,bids_ei:0},this.strIsLine=!1,this._range=a.default.instance.range,this._symbol=a.default.instance.symbol}e=t,r=void 0,(n=[{key:"setTitle",value:function(){var e=i.ChartManager.instance.getLanguage(),n=a.default.instance.symbolName;n+=" ",n+=this.strIsLine?t.strPeriod[e].line:t.strPeriod[e][this._range],n+=(this._contract_unit+"/"+this._money_type).toUpperCase(),i.ChartManager.instance.setTitle("frame0.k0",n)}},{key:"setSymbol",value:function(t){this._symbol=t,this.updateDataAndDisplay()}},{key:"updateDataAndDisplay",value:function(){a.default.instance.symbol=this._symbol,a.default.instance.range=this._range,i.ChartManager.instance.setCurrentDataSource("frame0.k0",this._symbol+"."+this._range),i.ChartManager.instance.setNormalMode();var t=a.default.instance.chartMgr.getDataSource("frame0.k0").getLastDate();$(".symbol-title>a").text(a.default.instance.symbolName),-1===t?(a.default.instance.requestParam=o.Control.setHttpRequestParam(a.default.instance.symbol,a.default.instance.range,a.default.instance.limit,null),o.Control.requestData(!0)):(a.default.instance.requestParam=o.Control.setHttpRequestParam(a.default.instance.symbol,a.default.instance.range,null,t.toString()),o.Control.requestData()),i.ChartManager.instance.redraw("All",!1)}},{key:"setCurrentContractUnit",value:function(t){this._contract_unit=t,this.updateDataAndDisplay()}},{key:"setCurrentMoneyType",value:function(t){this._money_type=t,this.updateDataAndDisplay()}},{key:"setCurrentPeriod",value:function(t){this._range=a.default.instance.periodMap[t],"stomp"===a.default.instance.type&&1===a.default.instance.stompClient.ws.readyState&&(a.default.instance.subscribed.unsubscribe(),a.default.instance.subscribed=a.default.instance.stompClient.subscribe(a.default.instance.subscribePath+"/"+a.default.instance.symbol+"/"+this._range,o.Control.subscribeCallback)),this.updateDataAndDisplay(),a.default.instance.onRangeChange(this._range)}},{key:"updateDataSource",value:function(t){this._data=t,i.ChartManager.instance.updateData("frame0.k0",this._data)}},{key:"updateDepth",value:function(t){if(null===t)return this._depthData.array=[],void i.ChartManager.instance.redraw("All",!1);if(t.asks&&t.bids&&""!==t.asks&&""!==t.bids){var e=this._depthData;e.array=[];for(var n=0;n<t.asks.length;n++){var r={};r.rate=t.asks[n][0],r.amount=t.asks[n][1],e.array.push(r)}for(var o=0;o<t.bids.length;o++){var a={};a.rate=t.bids[o][0],a.amount=t.bids[o][1],e.array.push(a)}e.asks_count=t.asks.length,e.bids_count=t.bids.length,e.asks_si=e.asks_count-1,e.asks_ei=0,e.bids_si=e.asks_count-1,e.bids_ei=e.asks_count+e.bids_count-2;for(var s=e.asks_si;s>=e.asks_ei;s--)s===e.asks_si&&void 0!==e.array[s]?e.array[s].amounts=e.array[s].amount:void 0!==e.array[s+1]&&(e.array[s].amounts=e.array[s+1].amounts+e.array[s].amount);for(var u=e.bids_si;u<=e.bids_ei;u++)u===e.bids_si&&void 0!==e.array[u]?e.array[u].amounts=e.array[u].amount:void 0!==e.array[u-1]&&(e.array[u].amounts=e.array[u-1].amounts+e.array[u].amount);i.ChartManager.instance.redraw("All",!1)}}},{key:"setMainIndicator",value:function(t){this._mainIndicator=t,"NONE"===t?i.ChartManager.instance.removeMainIndicator("frame0.k0"):i.ChartManager.instance.setMainIndicator("frame0.k0",t),i.ChartManager.instance.redraw("All",!0)}},{key:"setIndicator",value:function(t,e){if("NONE"===e){var n=2;!1===s.Template.displayVolume&&(n=1);var r=i.ChartManager.instance.getIndicatorAreaName("frame0.k0",n);""!==r&&i.ChartManager.instance.removeIndicator(r)}else{var o=2;!1===s.Template.displayVolume&&(o=1);var a=i.ChartManager.instance.getIndicatorAreaName("frame0.k0",o);""===a?s.Template.createIndicatorChartComps("frame0.k0",e):i.ChartManager.instance.setIndicator(a,e)}i.ChartManager.instance.redraw("All",!0)}},{key:"addIndicator",value:function(t){i.ChartManager.instance.addIndicator(t),i.ChartManager.instance.redraw("All",!0)}},{key:"removeIndicator",value:function(t){var e=i.ChartManager.instance.getIndicatorAreaName(2);i.ChartManager.instance.removeIndicator(e),i.ChartManager.instance.redraw("All",!0)}}])&&u(e.prototype,n),r&&u(e,r);var e,n,r;return t}();e.Chart=c,c.strPeriod={"zh-cn":{line:"()","1min":"(1)","5min":"(5)","15min":"(15)","30min":"(30)","1hour":"(1)","1day":"()","1week":"()","3min":"(3)","2hour":"(2)","4hour":"(4)","6hour":"(6)","12hour":"(12)","3day":"(3)"},"en-us":{line:"(Line)","1min":"(1m)","5min":"(5m)","15min":"(15m)","30min":"(30m)","1hour":"(1h)","1day":"(1d)","1week":"(1w)","3min":"(3m)","2hour":"(2h)","4hour":"(4h)","6hour":"(6h)","12hour":"(12h)","3day":"(3d)"},"zh-tw":{line:"()","1min":"(1)","5min":"(5)","15min":"(15)","30min":"(30)","1hour":"(1)","1day":"()","1week":"()","3min":"(3)","2hour":"(2)","4hour":"(4)","6hour":"(6)","12hour":"(12)","3day":"(3)"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CToolManager=void 0;var r=n(8),i=n(37),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(38));function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.NamedObject);function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).selectedObject=-1,n.toolObjects=[],n}n=e,c=void 0,(u=[{key:"getToolObjectCount",value:function(){return this.toolObjects.length}},{key:"addToolObject",value:function(t){this.toolObjects.push(t)}},{key:"getToolObject",value:function(t){return t<this.toolObjects.length&&t>=0?this.toolObjects[t]:null}},{key:"getCurrentObject",value:function(){return this.getToolObject(this.getToolObjectCount()-1)}},{key:"getSelectedObject",value:function(){return this.getToolObject(this.selectedObject)}},{key:"delCurrentObject",value:function(){this.toolObjects.splice(this.getToolObjectCount()-1,1)}},{key:"delSelectedObject",value:function(){this.toolObjects.splice(this.selectedObject,1),this.selectedObject=-1}},{key:"acceptMouseMoveEvent",value:function(t,e){if(-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];if(null!==n&&void 0!==n&&n.getState()!==o.CToolObject.state.AfterDraw)return n.acceptMouseMoveEvent(t,e)}else{var r=this.toolObjects[this.selectedObject];if(r.getState()===o.CToolObject.state.Draw)return r.acceptMouseMoveEvent(t,e);r.unselect(),this.selectedObject=-1}for(var i in this.toolObjects)if(this.toolObjects[i].isSelected(t,e))return this.selectedObject=i,!1;return!1}},{key:"acceptMouseDownEvent",value:function(t,e){if(this.mouseDownMove=!1,-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];if(null!==n&&void 0!==n&&n.getState()!==o.CToolObject.state.AfterDraw)return n.acceptMouseDownEvent(t,e)}else{var r=this.toolObjects[this.selectedObject];if(r.getState()!==o.CToolObject.state.BeforeDraw)return r.acceptMouseDownEvent(t,e)}return!1}},{key:"acceptMouseDownMoveEvent",value:function(t,e){if(this.mouseDownMove=!0,-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];return null!==n&&void 0!==n&&n.getState()===o.CToolObject.state.Draw&&n.acceptMouseDownMoveEvent(t,e)}var r=this.toolObjects[this.selectedObject];if(r.getState()!==o.CToolObject.state.BeforeDraw){if(!0===r.acceptMouseDownMoveEvent(t,e))for(var a=this.toolObjects[this.selectedObject].points,s=0;s<a.length;s++)if(a[s].state===i.CPoint.state.Highlight||a[s].state===i.CPoint.state.Show)return!0;return!0}}},{key:"acceptMouseUpEvent",value:function(t,e){if(!0===this.mouseDownMove){if(-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];return null===n||void 0===n||n.getState()!==o.CToolObject.state.Draw||n.acceptMouseUpEvent(t,e)}var r=this.toolObjects[this.selectedObject];if(r.getState()!==o.CToolObject.state.BeforeDraw)return r.acceptMouseUpEvent(t,e)}if(-1!==this.selectedObject)return!0;var i=this.toolObjects[this.getToolObjectCount()-1];if(null!==i&&void 0!==i){if(i.getState()===o.CToolObject.state.Draw)return!0;if(!i.isValidMouseXY(t,e))return!1;if(i.isSelected(t,e))return!0}return!1}}])&&s(n.prototype,u),c&&s(n,c);var n,u,c;return e}();e.CToolManager=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Timeline=void 0;var r=n(8),i=n(3),o=n(11);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.NamedObject);function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._updated=!1,n._innerLeft=0,n._innerWidth=0,n._firstColumnLeft=0,n._scale=3,n._lastScale=-1,n._maxItemCount=0,n._maxIndex=0,n._firstIndex=-1,n._selectedIndex=-1,n._savedFirstIndex=-1,n}n=e,c=void 0,(u=[{key:"isLatestShown",value:function(){return this.getLastIndex()===this._maxIndex}},{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getItemWidth",value:function(){return e.itemWidth[this._scale]}},{key:"getSpaceWidth",value:function(){return e.spaceWidth[this._scale]}},{key:"getColumnWidth",value:function(){return this.getSpaceWidth()+this.getItemWidth()}},{key:"getInnerWidth",value:function(){return this._innerWidth}},{key:"getItemLeftOffset",value:function(){return this.getSpaceWidth()}},{key:"getItemCenterOffset",value:function(){return this.getSpaceWidth()+(this.getItemWidth()>>1)}},{key:"getFirstColumnLeft",value:function(){return this._firstColumnLeft}},{key:"getMaxItemCount",value:function(){return this._maxItemCount}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"getLastIndex",value:function(){return Math.min(this._firstIndex+this._maxItemCount,this._maxIndex)}},{key:"getSelectedIndex",value:function(){return this._selectedIndex}},{key:"getMaxIndex",value:function(){return this._maxIndex}},{key:"calcColumnCount",value:function(t){return Math.floor(t/this.getColumnWidth())<<0}},{key:"calcFirstColumnLeft",value:function(t){return this._innerLeft+this._innerWidth-this.getColumnWidth()*t}},{key:"calcFirstIndexAlignRight",value:function(t,e,n){return Math.max(0,t+Math.max(e,1)-Math.max(n,1))}},{key:"calcFirstIndex",value:function(t){return this.validateFirstIndex(this.calcFirstIndexAlignRight(this._firstIndex,this._maxItemCount,t),t)}},{key:"updateMaxItemCount",value:function(){var t,e=this.calcColumnCount(this._innerWidth);if(this._maxItemCount<1)t=this.calcFirstIndex(e);else if(this._lastScale===this._scale)t=this.validateFirstIndex(this._firstIndex-(e-this._maxItemCount));else{var n=this._selectedIndex>=0?this._selectedIndex:this.getLastIndex()-1;t=this.validateFirstIndex(n-Math.round((n-this._firstIndex)*e/this._maxItemCount))}this._lastScale=this._scale,this._firstIndex!==t&&(this._selectedIndex===this._firstIndex&&(this._selectedIndex=t),this._firstIndex=t,this._updated=!0),this._maxItemCount!==e&&(this._maxItemCount=e,this._updated=!0),this._firstColumnLeft=this.calcFirstColumnLeft(e)}},{key:"validateFirstIndex",value:function(t,e){if(this._maxIndex<1)return-1;if(t<0)return 0;var n=Math.max(0,this._maxIndex-1);return t>n?n:t}},{key:"validateSelectedIndex",value:function(){this._selectedIndex<this._firstIndex?this._selectedIndex=-1:this._selectedIndex>=this.getLastIndex()&&(this._selectedIndex=-1)}},{key:"onLayout",value:function(){var t=i.ChartManager.instance.getArea(this.getDataSourceName()+".main");if(null!==t){this._innerLeft=t.getLeft()+e.PADDING_LEFT;var n=Math.max(0,t.getWidth()-(e.PADDING_LEFT+e.PADDING_RIGHT));this._innerWidth!==n&&(this._innerWidth=n,this.updateMaxItemCount())}}},{key:"toIndex",value:function(t){return this._firstIndex+this.calcColumnCount(t-this._firstColumnLeft)}},{key:"toColumnLeft",value:function(t){return this._firstColumnLeft+this.getColumnWidth()*(t-this._firstIndex)}},{key:"toItemLeft",value:function(t){return this.toColumnLeft(t)+this.getItemLeftOffset()}},{key:"toItemCenter",value:function(t){return this.toColumnLeft(t)+this.getItemCenterOffset()}},{key:"selectAt",value:function(t){return this._selectedIndex=this.toIndex(t),this.validateSelectedIndex(),this._selectedIndex>=0}},{key:"unselect",value:function(){this._selectedIndex=-1}},{key:"update",value:function(){var t=i.ChartManager.instance.getDataSource(this.getDataSourceName()),e=this._maxIndex;switch(this._maxIndex=t.getDataCount(),t.getUpdateMode()){case o.DataSource.UpdateMode.Refresh:this._maxIndex<1?this._firstIndex=-1:this._firstIndex=Math.max(this._maxIndex-this._maxItemCount,0),this._selectedIndex=-1,this._updated=!0;break;case o.DataSource.UpdateMode.Append:var n=this.getLastIndex(),r=t.getErasedCount();n<e?r>0&&(this._firstIndex=Math.max(this._firstIndex-r,0),this._selectedIndex>=0&&(this._selectedIndex-=r,this.validateSelectedIndex()),this._updated=!0):n===e&&(this._firstIndex+=this._maxIndex-e,this._selectedIndex>=0&&(this._selectedIndex-=r,this.validateSelectedIndex()),this._updated=!0)}}},{key:"move",value:function(t){this.isLatestShown()&&i.ChartManager.instance.getArea(this.getDataSourceName()+".mainRange").setChanged(!0),this._firstIndex=this.validateFirstIndex(this._savedFirstIndex-this.calcColumnCount(t),this._maxItemCount),this._updated=!0,this._selectedIndex>=0&&this.validateSelectedIndex()}},{key:"startMove",value:function(){this._savedFirstIndex=this._firstIndex}},{key:"scale",value:function(t){this._scale+=t,this._scale<0?this._scale=0:this._scale>=e.itemWidth.length&&(this._scale=e.itemWidth.length-1),this.updateMaxItemCount(),this._selectedIndex>=0&&this.validateSelectedIndex()}}])&&s(n.prototype,u),c&&s(n,c);var n,u,c;return e}();e.Timeline=u,u.itemWidth=[1,3,3,5,5,7,9,11,13,15,17,19,21,23,25,27,29],u.spaceWidth=[1,1,2,2,3,3,3,3,3,3,5,5,5,5,7,7,7],u.PADDING_LEFT=4,u.PADDING_RIGHT=8},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DockableLayout=e.TableLayout=void 0;var r=s(n(41)),i=n(3),o=s(n(20)),a=n(18);function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function d(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:p(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _=function(t){f(e,r.ChartAreaGroup);function e(t){var n;return c(this,e),(n=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._nextRowId=0,n._focusedRowIndex=-1,n}return h(e,[{key:"getNextRowId",value:function(){return this._nextRowId++}},{key:"measure",value:function(t,e,n){this.setMeasuredDimension(e,n);var r,o,a,s,u=0,c=0,l=[],h=this._areas.length;for(s=0;s<h;s+=2){if(0===(r=this._areas[s].getHeight())){if(0===s){var d=n/(2*(a=h+1>>1)+5)*2<<0;for(o=n,s=a-1;s>0;s--)l.unshift(d),o-=d;l.unshift(o);break}r=2===s?u/3:u}c+=r,u=r,l.push(r)}if(c>0){var p=n/c;for(o=n,s=(a=h+1>>1)-1;s>0;s--)l[s]*=p,o-=l[s];l[0]=o}var f=Math.min(240,e>>1),_=76,g=i.ChartManager.instance,v=g.getTimeline(this.getDataSourceName());if(v.getFirstIndex()>=0){var m=[];for(_=76;_<f;_+=8)m.push(v.calcFirstIndex(v.calcColumnCount(e-_)));var y,b,w=v.getLastIndex(),C=[".main",".secondary"],E=new Array(m.length);for(y=0,b=0,_=76;y<this._areas.length&&b<m.length;y+=2){var P=this._areas[y],A=g.getPlotter(P.getName()+"Range.main");for(var S in C){var x=g.getDataProvider(P.getName()+C[S]);if(void 0!==x)for(x.calcRange(m,w,E,null);b<m.length;){var O=A.getRequiredWidth(t,E[b].min),k=A.getRequiredWidth(t,E[b].max);if(Math.max(O,k)<_)break;b++,_+=8}}}}for(s=1;s<this._areas.length;s+=2)this._areas[s].measure(t,_,l[s>>1]);var T=e-_;for(s=0;s<this._areas.length;s+=2)this._areas[s].measure(t,T,l[s>>1])}},{key:"layout",value:function(t,n,r,i,o){if(p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"layout",this).call(this,t,n,r,i,o),!(this._areas.length<1)){var a,s,u=t+this._areas[0].getMeasuredWidth(),c=n;o||(o=this.isChanged());var l,h=this._areas.length;for(l=0;l<h;l++)s=c+(a=this._areas[l]).getMeasuredHeight(),a.layout(t,c,u,s,o),l++,(a=this._areas[l]).layout(u,c,this.getRight(),s,o),c=s;this.setChanged(!1)}}},{key:"drawGrid",value:function(t){if(!(this._areas.length<1)){var e=i.ChartManager.instance,n=e.getTheme(this.getFrameName());t.fillStyle=n.getColor(o.Theme.Color.Grid1),t.fillRect(this._areas[0].getRight(),this.getTop(),1,this.getHeight());var r,a=this._areas.length-2;for(r=0;r<a;r+=2)t.fillRect(this.getLeft(),this._areas[r].getBottom(),this.getWidth(),1);if(!e.getCaptureMouseWheelDirectly())for(r=0,a+=2;r<a;r+=2)if(this._areas[r].isSelected()){t.strokeStyle=n.getColor(o.Theme.Color.Indicator1),t.strokeRect(this.getLeft()+.5,this.getTop()+.5,this.getWidth()-1,this.getHeight()-1);break}}}},{key:"highlight",value:function(t){this._highlightedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).highlight(e),this._highlightedArea=e,n++,(e=this._areas[n]).highlight(null),e.highlight(e)):e.highlight(null);return null!==this._highlightedArea?this:null}},{key:"select",value:function(t){this._selectedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).select(e),this._selectedArea=e,n++,(e=this._areas[n]).select(e)):e.select(null);return null!==this._selectedArea?this:null}},{key:"onMouseMove",value:function(t,e){if(this._focusedRowIndex>=0){var n=this._areas[this._focusedRowIndex],r=this._areas[this._focusedRowIndex+2],o=e-this._oldY;if(0===o)return this;var a=this._oldUpperBottom+o,s=this._oldLowerTop+o;return a-n.getTop()>=60&&r.getBottom()-s>=60&&(n.setBottom(a),r.setTop(s)),this}var u,c=this._areas.length-2;for(u=0;u<c;u+=2){var l=this._areas[u].getBottom();if(e>=l-4&&e<l+4)return i.ChartManager.instance.showCursor("n-resize"),this}return null}},{key:"onMouseLeave",value:function(t,e){this._focusedRowIndex=-1}},{key:"onMouseDown",value:function(t,e){var n,r=this._areas.length-2;for(n=0;n<r;n+=2){var i=this._areas[n].getBottom();if(e>=i-4&&e<i+4)return this._focusedRowIndex=n,this._oldY=e,this._oldUpperBottom=i,this._oldLowerTop=this._areas[n+2].getTop(),this}return null}},{key:"onMouseUp",value:function(t,e){if(this._focusedRowIndex>=0){this._focusedRowIndex=-1;var n,r=this._areas.length,i=[];for(n=0;n<r;n+=2)i.push(this._areas[n].getHeight());a.ChartSettings.get().charts.areaHeight=i,a.ChartSettings.save()}return this}}]),e}();e.TableLayout=_;var g=function(t){f(e,r.ChartAreaGroup);function e(t){return c(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return h(e,[{key:"measure",value:function(t,n,i){p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"measure",this).call(this,t,n,i),n=this.getMeasuredWidth(),i=this.getMeasuredHeight();for(var o in this._areas){var a=this._areas[o];switch(a.measure(t,n,i),a.getDockStyle()){case r.ChartArea.DockStyle.left:case r.ChartArea.DockStyle.Right:n-=a.getMeasuredWidth();break;case r.ChartArea.DockStyle.Top:case r.ChartArea.DockStyle.Bottom:i-=a.getMeasuredHeight();break;case r.ChartArea.DockStyle.Fill:n=0,i=0}}}},{key:"layout",value:function(t,n,i,o,a){p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"layout",this).call(this,t,n,i,o,a),t=this.getLeft(),n=this.getTop(),i=this.getRight(),o=this.getBottom();var s,u;a||(a=this.isChanged());for(var c in this._areas){var l=this._areas[c];switch(l.getDockStyle()){case r.ChartArea.DockStyle.left:s=l.getMeasuredWidth(),l.layout(t,n,t+s,o,a),t+=s;break;case r.ChartArea.DockStyle.Top:u=l.getMeasuredHeight(),l.layout(t,n,i,n+u,a),n+=u;break;case r.ChartArea.DockStyle.Right:s=l.getMeasuredWidth(),l.layout(i-s,n,i,o,a),i-=s;break;case r.ChartArea.DockStyle.Bottom:u=l.getMeasuredHeight(),l.layout(t,o-u,i,o,a),o-=u;break;case r.ChartArea.DockStyle.Fill:l.layout(t,n,i,o,a),t=i,n=o}}this.setChanged(!1)}},{key:"drawGrid",value:function(t){var e=i.ChartManager.instance.getTheme(this.getFrameName()),n=this.getLeft(),o=this.getTop(),a=this.getRight(),s=this.getBottom();t.fillStyle=e.getColor(this._gridColor);for(var u in this._areas){var c=this._areas[u];switch(c.getDockStyle()){case r.ChartArea.DockStyle.Left:t.fillRect(c.getRight(),o,1,s-o),n+=c.getWidth();break;case r.ChartArea.DockStyle.Top:t.fillRect(n,c.getBottom(),a-n,1),o+=c.getHeight();break;case r.ChartArea.DockStyle.Right:t.fillRect(c.getLeft(),o,1,s-o),a-=c.getWidth();break;case r.ChartArea.DockStyle.Bottom:t.fillRect(n,c.getTop(),a-n,1),s-=c.getHeight()}}}}]),e}();e.DockableLayout=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STOCHRSIIndicator=e.PSYIndicator=e.BOLLIndicator=e.MTMIndicator=e.ROCIndicator=e.KDJIndicator=e.SARIndicator=e.WRIndicator=e.RSIIndicator=e.EMVIndicator=e.OBVIndicator=e.VRIndicator=e.BRARIndicator=e.TRIXIndicator=e.DMAIndicator=e.DMIIndicator=e.MACDIndicator=e.VOLUMEIndicator=e.EMAIndicator=e.MAIndicator=e.HLCIndicator=e.Indicator=void 0;var r=o(n(56)),i=o(n(20));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}var d=function(){function t(){c(this,t),this._exprEnv=new r.ExprEnv,this._rid=0,this._params=[],this._assigns=[],this._outputs=[]}return h(t,[{key:"addParameter",value:function(t){this._params.push(t)}},{key:"addAssign",value:function(t){this._assigns.push(t)}},{key:"addOutput",value:function(t){this._outputs.push(t)}},{key:"getParameterCount",value:function(){return this._params.length}},{key:"getParameterAt",value:function(t){return this._params[t]}},{key:"getOutputCount",value:function(){return this._outputs.length}},{key:"getOutputAt",value:function(t){return this._outputs[t]}},{key:"clear",value:function(){this._exprEnv.setFirstIndex(-1);var t,e;for(e=this._assigns.length,t=0;t<e;t++)this._assigns[t].clear();for(e=this._outputs.length,t=0;t<e;t++)this._outputs[t].clear()}},{key:"reserve",value:function(t){this._rid++;var e,n;for(n=this._assigns.length,e=0;e<n;e++)this._assigns[e].reserve(this._rid,t);for(n=this._outputs.length,e=0;e<n;e++)this._outputs[e].reserve(this._rid,t)}},{key:"execute",value:function(t,e){if(!(e<0)){this._exprEnv.setDataSource(t),r.ExprEnv.set(this._exprEnv);try{var n,i;for(i=this._assigns.length,n=0;n<i;n++)this._assigns[n].assign(e);for(i=this._outputs.length,n=0;n<i;n++)this._outputs[n].assign(e);this._exprEnv.getFirstIndex()<0&&this._exprEnv.setFirstIndex(e)}catch(t){if(this._exprEnv.getFirstIndex()>=0)throw alert(t),t}}}},{key:"getParameters",value:function(){var t,e=[],n=this._params.length;for(t=0;t<n;t++)e.push(this._params[t].getValue());return e}},{key:"setParameters",value:function(t){if(t instanceof Array&&t.length===this._params.length)for(var e in this._params)this._params[e].setValue(t[e])}}]),t}();e.Indicator=d;var p=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("M1",2,1e3,60);return t.addParameter(n),t.addOutput(new r.OutputExpr("HIGH",new r.HighExpr,r.OutputExpr.outputStyle.None)),t.addOutput(new r.OutputExpr("LOW",new r.LowExpr,r.OutputExpr.outputStyle.None)),t.addOutput(new r.OutputExpr("CLOSE",new r.CloseExpr,r.OutputExpr.outputStyle.Line,i.Theme.Color.Indicator0)),t.addOutput(new r.RangeOutputExpr("MA",new r.MaExpr(new r.CloseExpr,n),r.OutputExpr.outputStyle.Line,i.Theme.Color.Indicator1)),t}return h(e,[{key:"getName",value:function(){return"CLOSE"}}]),e}();e.HLCIndicator=p;var f=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("M1",2,1e3,7),i=new r.ParameterExpr("M2",2,1e3,30),o=new r.ParameterExpr("M3",2,1e3,0),a=new r.ParameterExpr("M4",2,1e3,0),u=new r.ParameterExpr("M5",2,1e3,0),l=new r.ParameterExpr("M6",2,1e3,0);return t.addParameter(n),t.addParameter(i),t.addParameter(o),t.addParameter(a),t.addParameter(u),t.addParameter(l),t.addOutput(new r.RangeOutputExpr("MA",new r.MaExpr(new r.CloseExpr,n))),t.addOutput(new r.RangeOutputExpr("MA",new r.MaExpr(new r.CloseExpr,i))),t.addOutput(new r.RangeOutputExpr("MA",new r.MaExpr(new r.CloseExpr,o))),t.addOutput(new r.RangeOutputExpr("MA",new r.MaExpr(new r.CloseExpr,a))),t.addOutput(new r.RangeOutputExpr("MA",new r.MaExpr(new r.CloseExpr,u))),t.addOutput(new r.RangeOutputExpr("MA",new r.MaExpr(new r.CloseExpr,l))),t}return h(e,[{key:"getName",value:function(){return"MA"}}]),e}();e.MAIndicator=f;var _=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("M1",2,1e3,7),i=new r.ParameterExpr("M2",2,1e3,30),o=new r.ParameterExpr("M3",2,1e3,0),a=new r.ParameterExpr("M4",2,1e3,0),u=new r.ParameterExpr("M5",2,1e3,0),l=new r.ParameterExpr("M6",2,1e3,0);return t.addParameter(n),t.addParameter(i),t.addParameter(o),t.addParameter(a),t.addParameter(u),t.addParameter(l),t.addOutput(new r.RangeOutputExpr("EMA",new r.EmaExpr(new r.CloseExpr,n))),t.addOutput(new r.RangeOutputExpr("EMA",new r.EmaExpr(new r.CloseExpr,i))),t.addOutput(new r.RangeOutputExpr("EMA",new r.EmaExpr(new r.CloseExpr,o))),t.addOutput(new r.RangeOutputExpr("EMA",new r.EmaExpr(new r.CloseExpr,a))),t.addOutput(new r.RangeOutputExpr("EMA",new r.EmaExpr(new r.CloseExpr,u))),t.addOutput(new r.RangeOutputExpr("EMA",new r.EmaExpr(new r.CloseExpr,l))),t}return h(e,[{key:"getName",value:function(){return"EMA"}}]),e}();e.EMAIndicator=_;var g=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("M1",2,500,5),o=new r.ParameterExpr("M2",2,500,10);t.addParameter(n),t.addParameter(o);var a=new r.OutputExpr("VOLUME",new r.VolumeExpr,r.OutputExpr.outputStyle.VolumeStick,i.Theme.Color.Text4);return t.addOutput(a),t.addOutput(new r.RangeOutputExpr("MA",new r.MaExpr(a,n),r.OutputExpr.outputStyle.Line,i.Theme.Color.Indicator0)),t.addOutput(new r.RangeOutputExpr("MA",new r.MaExpr(a,o),r.OutputExpr.outputStyle.Line,i.Theme.Color.Indicator1)),t}return h(e,[{key:"getName",value:function(){return"VOLUME"}}]),e}();e.VOLUMEIndicator=g;var v=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("SHORT",2,200,12),i=new r.ParameterExpr("LONG",2,200,26),o=new r.ParameterExpr("MID",2,200,9);t.addParameter(n),t.addParameter(i),t.addParameter(o);var a=new r.OutputExpr("DIF",new r.SubExpr(new r.EmaExpr(new r.CloseExpr,n),new r.EmaExpr(new r.CloseExpr,i)));t.addOutput(a);var u=new r.OutputExpr("DEA",new r.EmaExpr(a,o));t.addOutput(u);var l=new r.OutputExpr("MACD",new r.MulExpr(new r.SubExpr(a,u),new r.ConstExpr(2)),r.OutputExpr.outputStyle.MACDStick);return t.addOutput(l),t}return h(e,[{key:"getName",value:function(){return"MACD"}}]),e}();e.MACDIndicator=v;var m=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,90,14),i=new r.ParameterExpr("MM",2,60,6);t.addParameter(n),t.addParameter(i);var o=new r.AssignExpr("MTR",new r.ExpmemaExpr(new r.MaxExpr(new r.MaxExpr(new r.SubExpr(new r.HighExpr,new r.LowExpr),new r.AbsExpr(new r.SubExpr(new r.HighExpr,new r.RefExpr(new r.CloseExpr,new r.ConstExpr(1))))),new r.AbsExpr(new r.SubExpr(new r.RefExpr(new r.CloseExpr,new r.ConstExpr(1)),new r.LowExpr))),n));t.addAssign(o);var a=new r.AssignExpr("HD",new r.SubExpr(new r.HighExpr,new r.RefExpr(new r.HighExpr,new r.ConstExpr(1))));t.addAssign(a);var u=new r.AssignExpr("LD",new r.SubExpr(new r.RefExpr(new r.LowExpr,new r.ConstExpr(1)),new r.LowExpr));t.addAssign(u);var l=new r.AssignExpr("DMP",new r.ExpmemaExpr(new r.IfExpr(new r.AndExpr(new r.GtExpr(a,new r.ConstExpr(0)),new r.GtExpr(a,u)),a,new r.ConstExpr(0)),n));t.addAssign(l);var h=new r.AssignExpr("DMM",new r.ExpmemaExpr(new r.IfExpr(new r.AndExpr(new r.GtExpr(u,new r.ConstExpr(0)),new r.GtExpr(u,a)),u,new r.ConstExpr(0)),n));t.addAssign(h);var d=new r.OutputExpr("PDI",new r.MulExpr(new r.DivExpr(l,o),new r.ConstExpr(100)));t.addOutput(d);var p=new r.OutputExpr("MDI",new r.MulExpr(new r.DivExpr(h,o),new r.ConstExpr(100)));t.addOutput(p);var f=new r.OutputExpr("ADX",new r.ExpmemaExpr(new r.MulExpr(new r.DivExpr(new r.AbsExpr(new r.SubExpr(p,d)),new r.AddExpr(p,d)),new r.ConstExpr(100)),i));t.addOutput(f);var _=new r.OutputExpr("ADXR",new r.ExpmemaExpr(f,i));return t.addOutput(_),t}return h(e,[{key:"getName",value:function(){return"DMI"}}]),e}();e.DMIIndicator=m;var y=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N1",2,60,10),i=new r.ParameterExpr("N2",2,250,50),o=new r.ParameterExpr("M",2,100,10);t.addParameter(n),t.addParameter(i),t.addParameter(o);var a=new r.OutputExpr("DIF",new r.SubExpr(new r.MaExpr(new r.CloseExpr,n),new r.MaExpr(new r.CloseExpr,i)));t.addOutput(a);var u=new r.OutputExpr("DIFMA",new r.MaExpr(a,o));return t.addOutput(u),t}return h(e,[{key:"getName",value:function(){return"DMA"}}]),e}();e.DMAIndicator=y;var b=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,100,12),i=new r.ParameterExpr("M",2,100,9);t.addParameter(n),t.addParameter(i);var o=new r.AssignExpr("MTR",new r.EmaExpr(new r.EmaExpr(new r.EmaExpr(new r.CloseExpr,n),n),n));t.addAssign(o);var a=new r.OutputExpr("TRIX",new r.MulExpr(new r.DivExpr(new r.SubExpr(o,new r.RefExpr(o,new r.ConstExpr(1))),new r.RefExpr(o,new r.ConstExpr(1))),new r.ConstExpr(100)));t.addOutput(a);var u=new r.OutputExpr("MATRIX",new r.MaExpr(a,i));return t.addOutput(u),t}return h(e,[{key:"getName",value:function(){return"TRIX"}}]),e}();e.TRIXIndicator=b;var w=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,120,26);t.addParameter(n);var i=new r.AssignExpr("REF_CLOSE_1",new r.RefExpr(new r.CloseExpr,new r.ConstExpr(1)));t.addAssign(i);var o=new r.OutputExpr("BR",new r.MulExpr(new r.DivExpr(new r.SumExpr(new r.MaxExpr(new r.ConstExpr(0),new r.SubExpr(new r.HighExpr,i)),n),new r.SumExpr(new r.MaxExpr(new r.ConstExpr(0),new r.SubExpr(i,new r.LowExpr)),n)),new r.ConstExpr(100)));t.addOutput(o);var a=new r.OutputExpr("AR",new r.MulExpr(new r.DivExpr(new r.SumExpr(new r.SubExpr(new r.HighExpr,new r.OpenExpr),n),new r.SumExpr(new r.SubExpr(new r.OpenExpr,new r.LowExpr),n)),new r.ConstExpr(100)));return t.addOutput(a),t}return h(e,[{key:"getName",value:function(){return"BRAR"}}]),e}();e.BRARIndicator=w;var C=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,100,26),i=new r.ParameterExpr("M",2,100,6);t.addParameter(n),t.addParameter(i);var o=new r.AssignExpr("REF_CLOSE_1",new r.RefExpr(new r.CloseExpr,new r.ConstExpr(1)));t.addAssign(o);var a=new r.AssignExpr("TH",new r.SumExpr(new r.IfExpr(new r.GtExpr(new r.CloseExpr,o),new r.VolumeExpr,new r.ConstExpr(0)),n));t.addAssign(a);var u=new r.AssignExpr("TL",new r.SumExpr(new r.IfExpr(new r.LtExpr(new r.CloseExpr,o),new r.VolumeExpr,new r.ConstExpr(0)),n));t.addAssign(u);var l=new r.AssignExpr("TQ",new r.SumExpr(new r.IfExpr(new r.EqExpr(new r.CloseExpr,o),new r.VolumeExpr,new r.ConstExpr(0)),n));t.addAssign(l);var h=new r.OutputExpr("VR",new r.MulExpr(new r.DivExpr(new r.AddExpr(new r.MulExpr(a,new r.ConstExpr(2)),l),new r.AddExpr(new r.MulExpr(u,new r.ConstExpr(2)),l)),new r.ConstExpr(100)));t.addOutput(h);var d=new r.OutputExpr("MAVR",new r.MaExpr(h,i));return t.addOutput(d),t}return h(e,[{key:"getName",value:function(){return"VR"}}]),e}();e.VRIndicator=C;var E=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("M",2,100,30);t.addParameter(n);var i=new r.AssignExpr("REF_CLOSE_1",new r.RefExpr(new r.CloseExpr,new r.ConstExpr(1)));t.addAssign(i);var o=new r.AssignExpr("VA",new r.IfExpr(new r.GtExpr(new r.CloseExpr,i),new r.VolumeExpr,new r.NegExpr(new r.VolumeExpr)));t.addAssign(o);var a=new r.OutputExpr("OBV",new r.SumExpr(new r.IfExpr(new r.EqExpr(new r.CloseExpr,i),new r.ConstExpr(0),o),new r.ConstExpr(0)));t.addOutput(a);var u=new r.OutputExpr("MAOBV",new r.MaExpr(a,n));return t.addOutput(u),t}return h(e,[{key:"getName",value:function(){return"OBV"}}]),e}();e.OBVIndicator=E;var P=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,90,14),i=new r.ParameterExpr("M",2,60,9);t.addParameter(n),t.addParameter(i);var o=new r.AssignExpr("VOLUME",new r.DivExpr(new r.MaExpr(new r.VolumeExpr,n),new r.VolumeExpr));t.addAssign(o);var a=new r.AssignExpr("MID",new r.MulExpr(new r.DivExpr(new r.SubExpr(new r.AddExpr(new r.HighExpr,new r.LowExpr),new r.RefExpr(new r.AddExpr(new r.HighExpr,new r.LowExpr),new r.ConstExpr(1))),new r.AddExpr(new r.HighExpr,new r.LowExpr)),new r.ConstExpr(100)));t.addAssign(a);var u=new r.OutputExpr("EMV",new r.MaExpr(new r.DivExpr(new r.MulExpr(a,new r.MulExpr(o,new r.SubExpr(new r.HighExpr,new r.LowExpr))),new r.MaExpr(new r.SubExpr(new r.HighExpr,new r.LowExpr),n)),n));t.addOutput(u);var l=new r.OutputExpr("MAEMV",new r.MaExpr(u,i));return t.addOutput(l),t}return h(e,[{key:"getName",value:function(){return"EMV"}}]),e}();e.EMVIndicator=P;var A=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N1",2,120,6),i=new r.ParameterExpr("N2",2,250,12),o=new r.ParameterExpr("N3",2,500,24);t.addParameter(n),t.addParameter(i),t.addParameter(o);var a=new r.AssignExpr("LC",new r.RefExpr(new r.CloseExpr,new r.ConstExpr(1)));t.addAssign(a);var u=new r.AssignExpr("CLOSE_LC",new r.SubExpr(new r.CloseExpr,a));return t.addAssign(u),t.addOutput(new r.OutputExpr("RSI1",new r.MulExpr(new r.DivExpr(new r.SmaExpr(new r.MaxExpr(u,new r.ConstExpr(0)),n,new r.ConstExpr(1)),new r.SmaExpr(new r.AbsExpr(u),n,new r.ConstExpr(1))),new r.ConstExpr(100)))),t.addOutput(new r.OutputExpr("RSI2",new r.MulExpr(new r.DivExpr(new r.SmaExpr(new r.MaxExpr(u,new r.ConstExpr(0)),i,new r.ConstExpr(1)),new r.SmaExpr(new r.AbsExpr(u),i,new r.ConstExpr(1))),new r.ConstExpr(100)))),t.addOutput(new r.OutputExpr("RSI3",new r.MulExpr(new r.DivExpr(new r.SmaExpr(new r.MaxExpr(u,new r.ConstExpr(0)),o,new r.ConstExpr(1)),new r.SmaExpr(new r.AbsExpr(u),o,new r.ConstExpr(1))),new r.ConstExpr(100)))),t}return h(e,[{key:"getName",value:function(){return"RSI"}}]),e}();e.RSIIndicator=A;var S=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,100,10),i=new r.ParameterExpr("N1",2,100,6);t.addParameter(n),t.addParameter(i);var o=new r.AssignExpr("HHV",new r.HhvExpr(new r.HighExpr,n));t.addAssign(o);var a=new r.AssignExpr("HHV1",new r.HhvExpr(new r.HighExpr,i));t.addAssign(a);var u=new r.AssignExpr("LLV",new r.LlvExpr(new r.LowExpr,n));t.addAssign(u);var l=new r.AssignExpr("LLV1",new r.LlvExpr(new r.LowExpr,i));t.addAssign(l);var h=new r.OutputExpr("WR1",new r.MulExpr(new r.DivExpr(new r.SubExpr(o,new r.CloseExpr),new r.SubExpr(o,u)),new r.ConstExpr(100)));t.addOutput(h);var d=new r.OutputExpr("WR2",new r.MulExpr(new r.DivExpr(new r.SubExpr(a,new r.CloseExpr),new r.SubExpr(a,l)),new r.ConstExpr(100)));return t.addOutput(d),t}return h(e,[{key:"getName",value:function(){return"WR"}}]),e}();e.WRIndicator=S;var x=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ConstExpr(4),i=new r.ConstExpr(2),o=new r.ConstExpr(2),a=new r.ConstExpr(20);return t.addOutput(new r.OutputExpr("SAR",new r.SarExpr(n,i,o,a),r.OutputExpr.outputStyle.SARPoint)),t}return h(e,[{key:"getName",value:function(){return"SAR"}}]),e}();e.SARIndicator=x;var O=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,90,9),i=new r.ParameterExpr("M1",2,30,3),o=new r.ParameterExpr("M2",2,30,3);t.addParameter(n),t.addParameter(i),t.addParameter(o);var a=new r.AssignExpr("HHV",new r.HhvExpr(new r.HighExpr,n));t.addAssign(a);var u=new r.AssignExpr("LLV",new r.LlvExpr(new r.LowExpr,n));t.addAssign(u);var l=new r.AssignExpr("RSV",new r.MulExpr(new r.DivExpr(new r.SubExpr(new r.CloseExpr,u),new r.SubExpr(a,u)),new r.ConstExpr(100)));t.addAssign(l);var h=new r.OutputExpr("K",new r.SmaExpr(l,i,new r.ConstExpr(1)));t.addOutput(h);var d=new r.OutputExpr("D",new r.SmaExpr(h,o,new r.ConstExpr(1)));t.addOutput(d);var p=new r.OutputExpr("J",new r.SubExpr(new r.MulExpr(h,new r.ConstExpr(3)),new r.MulExpr(d,new r.ConstExpr(2))));return t.addOutput(p),t}return h(e,[{key:"getName",value:function(){return"KDJ"}}]),e}();e.KDJIndicator=O;var k=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,120,12),i=new r.ParameterExpr("M",2,60,6);t.addParameter(n),t.addParameter(i);var o=new r.AssignExpr("REF_CLOSE_N",new r.RefExpr(new r.CloseExpr,n));t.addAssign(o);var a=new r.OutputExpr("ROC",new r.MulExpr(new r.DivExpr(new r.SubExpr(new r.CloseExpr,o),o),new r.ConstExpr(100)));t.addOutput(a);var u=new r.OutputExpr("MAROC",new r.MaExpr(a,i));return t.addOutput(u),t}return h(e,[{key:"getName",value:function(){return"ROC"}}]),e}();e.ROCIndicator=k;var T=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,120,12),i=new r.ParameterExpr("M",2,60,6);t.addParameter(n),t.addParameter(i);var o=new r.OutputExpr("MTM",new r.SubExpr(new r.CloseExpr,new r.RefExpr(new r.CloseExpr,n)));t.addOutput(o);var a=new r.OutputExpr("MTMMA",new r.MaExpr(o,i));return t.addOutput(a),t}return h(e,[{key:"getName",value:function(){return"MTM"}}]),e}();e.MTMIndicator=T;var I=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,120,20);t.addParameter(n);var i=new r.AssignExpr("STD_CLOSE_N",new r.StdExpr(new r.CloseExpr,n));t.addAssign(i);var o=new r.OutputExpr("BOLL",new r.MaExpr(new r.CloseExpr,n));t.addOutput(o);var a=new r.OutputExpr("UB",new r.AddExpr(o,new r.MulExpr(new r.ConstExpr(2),i)));t.addOutput(a);var u=new r.OutputExpr("LB",new r.SubExpr(o,new r.MulExpr(new r.ConstExpr(2),i)));return t.addOutput(u),t}return h(e,[{key:"getName",value:function(){return"BOLL"}}]),e}();e.BOLLIndicator=I;var N=function(t){u(e,d);function e(){var t;c(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var n=new r.ParameterExpr("N",2,100,12),i=new r.ParameterExpr("M",2,100,6);t.addParameter(n),t.addParameter(i);var o=new r.OutputExpr("PSY",new r.MulExpr(new r.DivExpr(new r.CountExpr(new r.GtExpr(new r.CloseExpr,new r.RefExpr(new r.CloseExpr,new r.ConstExpr(1))),n),n),new r.ConstExpr(100)));t.addOutput(o);var a=new r.OutputExpr("PSYMA",new r.MaExpr(o,i));return t.addOutput(a),t}return h(e,[{key:"getName",value:function(){return"PSY"}}]),e}();e.PSYIndicator=N;var R=function(t){u(e,d);function e(){var t;c(this,e),(t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))).getName=function(){return"StochRSI"};var n=new r.ParameterExpr("N",3,100,14),i=new r.ParameterExpr("M",3,100,14),o=new r.ParameterExpr("P1",2,50,3),a=new r.ParameterExpr("P2",2,50,3);t.addParameter(n),t.addParameter(i),t.addParameter(o),t.addParameter(a);var u=new r.AssignExpr("LC",new r.RefExpr(new r.CloseExpr,new r.ConstExpr(1)));t.addAssign(u);var l=new r.AssignExpr("CLOSE_LC",new r.SubExpr(new r.CloseExpr,u));t.addAssign(l);var h=new r.AssignExpr("RSI",new r.MulExpr(new r.DivExpr(new r.SmaExpr(new r.MaxExpr(l,new r.ConstExpr(0)),n,new r.ConstExpr(1)),new r.SmaExpr(new r.AbsExpr(l),n,new r.ConstExpr(1))),new r.ConstExpr(100)));t.addAssign(h);var d=new r.OutputExpr("STOCHRSI",new r.MulExpr(new r.DivExpr(new r.MaExpr(new r.SubExpr(h,new r.LlvExpr(h,i)),o),new r.MaExpr(new r.SubExpr(new r.HhvExpr(h,i),new r.LlvExpr(h,i)),o)),new r.ConstExpr(100)));return t.addOutput(d),t.addOutput(new r.RangeOutputExpr("MA",new r.MaExpr(d,a))),t}return e}();e.STOCHRSIIndicator=R},function(t,e,n){var r=n(106);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0};i.transform=void 0;n(118)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(107)(void 0)).push([t.i,"html,\nbody {\n    min-height: 100%;\n    margin: 0;\n    min-width: 100%\n}\n\n.chart_container {\n    cursor: default;\n    font-family: arial, sans, serif;\n    font-size: 12px;\n    height: 100%;\n    position: relative;\n    width: 100%\n}\n\n.chart_container div,\n.chart_container ul,\n.chart_container form {\n    margin: 0;\n    padding: 0\n}\n\n.chart_container a:hover {\n    text-decoration: none\n}\n\n.chart_container ul {\n    list-style: none;\n    border: 0;\n    margin: 0;\n    padding: 0\n}\n\n.chart_container button {\n    cursor: pointer\n}\n\n#chart_dom_elem_cache {\n    *font-weight: bold;\n    position: absolute;\n    visibility: hidden;\n    z-index: -1\n}\n\n#chart_toolbar {\n    border-bottom: 1px solid;\n    *font-weight: bold;\n    height: 29px;\n    position: absolute;\n    z-index: 3\n}\n\n.chart_container.dark #chart_toolbar {\n    background-color: #0a0a0a;\n    border-bottom-color: #404040\n}\n\n.chart_container.light #chart_toolbar {\n    background-color: #fff;\n    border-bottom-color: #afb1b3\n}\n\n.chart_container .chart_toolbar_sep {\n    float: left;\n    height: 100%;\n    width: 16px\n}\n\n.chart_container .chart_toolbar_minisep {\n    float: left;\n    height: 100%;\n    width: 4px\n}\n\n.chart_container .chart_dropdown {\n    display: inline-block;\n    float: left;\n    position: relative;\n    z-index: 100\n}\n\n.chart_container .chart_dropdown_t {\n    background-origin: content-box;\n    background-repeat: no-repeat;\n    border: 1px solid;\n    border-bottom-width: 0;\n    margin-top: 3px;\n    padding-right: 10px;\n    z-index: 101;\n    position: relative\n}\n\n.chart_container .chart_dropdown_t a {\n    display: inline-block;\n    padding: 3px 12px 5px 10px\n}\n\n.chart_container .chart_dropdown_data {\n    border: 1px solid;\n    display: none;\n    position: absolute;\n    padding: 6px 8px 6px 8px;\n    margin-top: -1px;\n    z-index: 100\n}\n\n.chart_container .chart_dropdown_data table {\n    border-collapse: collapse;\n    font-weight: normal;\n    white-space: nowrap\n}\n\n.chart_container .chart_dropdown_data td {\n    border-bottom: 1px solid;\n    padding: 8px 6px;\n    vertical-align: top\n}\n\n.market_chooser .chart_dropdown_data {\n    width: 370px\n}\n\n.market_chooser .chart_dropdown_data td {\n    border-bottom: 1px solid;\n    padding: 1px 6px !important;\n    vertical-align: top;\n    line-height: 24px\n}\n\n.market_chooser li {\n    float: left;\n    width: 80px;\n    height: 24px;\n    line-height: 24px\n}\n\n.chart_container .chart_dropdown_data td.marketName_ a.dark {\n    color: #fff\n}\n\n.chart_container .chart_dropdown_data td.marketName_ a.light {\n    color: #000\n}\n\n.chart_container .chart_dropdown_data table tr:last-child td {\n    border-bottom: 0\n}\n\n.chart_container .chart_dropdown_data li {\n    white-space: nowrap;\n    display: inline-block\n}\n\n.chart_container .chart_dropdown_data a {\n    text-decoration: none;\n    cursor: pointer;\n    padding: 5px 6px 5px 6px\n}\n\n.chart_container .chart_dropdown-hover.chart_dropdown_data {\n    display: block\n}\n\n#chart_dropdown_symbols .chart_dropdown_data td {\n    padding: 8px 6px 0 6px\n}\n\n#chart_dropdown_symbols .chart_dropdown_data li {\n    display: block;\n    height: 26px\n}\n\n#chart_dropdown_symbols .chart_dropdown_data a {\n    cursor: pointer\n}\n\n#chart_dropdown_themes .chart_dropdown_data td:first-child {\n    padding: 6px 1px 7px 6px\n}\n\n.chart_container.dark .chart_dropdown_t {\n    background-image: url("+n(108)+");\n    background-position: right 9px;\n    border-color: #0a0a0a;\n    color: #e5e5e5\n}\n\n.chart_container.dark .chart_dropdown-hover.chart_dropdown_t {\n    background-color: #0a0a0a;\n    background-image: url("+n(109)+");\n    background-position: right 8px;\n    border-color: #606060;\n    color: #fff\n}\n\n.chart_container.dark .chart_dropdown_data {\n    background-color: rgba(10, 10, 10, 0.8);\n    border-color: #606060\n}\n\n.chart_container.dark .chart_dropdown_data td {\n    border-bottom-color: #404040;\n    color: #e5e5e5\n}\n\n.chart_container.dark .chart_dropdown_data li a {\n    color: #1987da\n}\n\n.chart_container.dark .chart_dropdown_data li a:hover {\n    background-color: #383838\n}\n\n.chart_container.dark .chart_dropdown_data li a.selected {\n    color: #ffac00\n}\n\n.chart_container.light .chart_dropdown_t {\n    background-image: url("+n(110)+");\n    background-position: right 10px;\n    border-color: #fff;\n    color: #393c40\n}\n\n.chart_container.light .chart_dropdown-hover.chart_dropdown_t {\n    background-color: #fff;\n    background-image: url("+n(111)+");\n    background-position: right 9px;\n    border-color: #4c4f53;\n    color: #393c40\n}\n\n.chart_container.light .chart_dropdown_data {\n    background-color: #fff;\n    border-color: #4c4f53\n}\n\n.chart_container.light .chart_dropdown_data td {\n    border-bottom-color: #e4e5e6;\n    color: #393c40\n}\n\n.chart_container.light .chart_dropdown_data li a {\n    color: #1478c8\n}\n\n.chart_container.light .chart_dropdown_data a:hover {\n    background-color: #f4f4f4\n}\n\n.chart_container.light .chart_dropdown_data a.selected {\n    color: #f27935\n}\n\n.chart_container .chart_toolbar_label {\n    cursor: default;\n    display: inline-block;\n    float: left;\n    padding: 7px 4px\n}\n\n.chart_container.dark .chart_toolbar_label {\n    border-color: #232323;\n    color: #e5e5e5\n}\n\n.chart_container.light .chart_toolbar_label {\n    border-color: #fff;\n    color: #393c40\n}\n\n.chart_container .chart_toolbar_button {\n    border: 1px solid;\n    cursor: pointer;\n    float: left;\n    margin: 3px 2px;\n    padding: 3px 10px;\n    position: relative;\n    z-index: 100\n}\n\n.chart_container.dark .chart_toolbar_button {\n    border-color: #404040;\n    color: #e5e5e5\n}\n\n.chart_container.dark .chart_toolbar_button:hover {\n    background-color: #383838;\n    border-color: #606060;\n    color: #fff\n}\n\n.chart_container.dark .chart_toolbar_button.selected {\n    background-color: #383838;\n    border-color: #606060;\n    color: #ffac00\n}\n\n.chart_container.dark .chart_toolbar_button.selected:hover {\n    background-color: #474747;\n    border-color: #808080;\n    color: #ffac00\n}\n\n.chart_container.light .chart_toolbar_button {\n    border-color: #ccc;\n    color: #393c40\n}\n\n.chart_container.light .chart_toolbar_button:hover {\n    background-color: #f4f4f4;\n    color: #393c40\n}\n\n.chart_container.light .chart_toolbar_button.selected {\n    background-color: #f4f4f4;\n    border-color: #f27935;\n    color: #f27935\n}\n\n.chart_container .chart_toolbar_tabgroup {\n    float: left\n}\n\n.chart_container .chart_toolbar_tabgroup li {\n    display: inline-block;\n    padding: 4px 0;\n    margin: 3px 0\n}\n\n.chart_container .chart_toolbar_tabgroup li a {\n    cursor: pointer;\n    padding: 4px 4px\n}\n\n.chart_container .chart_toolbar_tabgroup li a:hover {\n    text-decoration: none\n}\n\n.chart_container.dark .chart_toolbar_tabgroup li a {\n    color: #1987da\n}\n\n.chart_container.dark .chart_toolbar_tabgroup li a:hover {\n    background-color: #383838\n}\n\n.chart_container.dark .chart_toolbar_tabgroup li a.selected {\n    color: #ffac00\n}\n\n.chart_container.light .chart_toolbar_tabgroup li a {\n    color: #1478c8\n}\n\n.chart_container.light .chart_toolbar_tabgroup li a:hover {\n    background-color: #f4f4f4\n}\n\n.chart_container.light .chart_toolbar_tabgroup li a.selected {\n    color: #f27935\n}\n\n#chart_toolbar_periods_horz {\n    display: inline-block;\n    float: left;\n    position: relative;\n    z-index: 100\n}\n\n#chart_toolbar_periods_vert {\n    float: left\n}\n\n.chart_container a.chart_icon {\n    border: 1px solid;\n    height: 16px;\n    padding: 0;\n    width: 16px\n}\n\n.chart_container a.chart_icon:hover {\n    border-width: 2px;\n    height: 14px;\n    width: 14px\n}\n\n.chart_container .chart_dropdown_data a.chart_icon {\n    display: inline-block;\n    magin: 0 6px 0 6px\n}\n\n.chart_container a.chart_icon_theme_dark,\n.chart_container .chart_dropdown_data li a.chart_icon_theme_dark:hover {\n    background-color: #000\n}\n\n.chart_container a.chart_icon_theme_light,\n.chart_container .chart_dropdown_data li a.chart_icon_theme_light:hover {\n    background-color: #fff\n}\n\n.chart_container #chart_toolbar_theme {\n    float: left;\n    padding: 0 8px\n}\n\n.chart_container #chart_toolbar_theme a.chart_icon {\n    cursor: pointer;\n    float: left;\n    margin: 6px 4px\n}\n\n.chart_container #chart_select_theme td:last-child {\n    padding: 6px 6px 0 8px\n}\n\n.chart_container #chart_select_theme li {\n    padding: 0 4px 0 4px\n}\n\n.chart_container.dark a.chart_icon {\n    border-color: #aaa\n}\n\n.chart_container.dark a.chart_icon:hover {\n    border-color: #1987da\n}\n\n.chart_container.dark a.chart_icon.selected {\n    border-color: #ffac00\n}\n\n.chart_container.light a.chart_icon {\n    border-color: #aaa\n}\n\n.chart_container.light a.chart_icon.selected {\n    border-color: #f27935\n}\n\n.chart_container #chart_updated_time {\n    float: right;\n    margin: 4px 3px;\n    padding: 3px 10px\n}\n\n.chart_container.dark #chart_updated_time {\n    color: #e5e5e5\n}\n\n.chart_container.light #chart_updated_time {\n    color: #393c40\n}\n\n#chart_toolpanel {\n    border-right: 1px solid;\n    display: none;\n    position: absolute;\n    width: 32px;\n    z-index: 2\n}\n\n#chart_toolpanel .chart_toolpanel_separator {\n    position: relative;\n    height: 4px\n}\n\n#chart_toolpanel .chart_toolpanel_button {\n    position: relative;\n    z-index: 100\n}\n\n#chart_toolpanel .chart_toolpanel_icon {\n    background-origin: content-box;\n    background-repeat: no-repeat;\n    border: 1px solid;\n    cursor: pointer;\n    height: 16px;\n    margin: 1px 4px 1px 4px;\n    padding: 3px;\n    position: relative;\n    width: 16px;\n    z-index: 101\n}\n\n#chart_toolpanel .chart_toolpanel_tip {\n    border-radius: 4px;\n    border: 1px solid;\n    display: none;\n    *font-weight: bold;\n    position: absolute;\n    padding: 3px 6px 4px 6px;\n    margin-left: 36px;\n    margin-top: -25px;\n    white-space: nowrap;\n    z-index: 100\n}\n\n#chart_toolpanel .chart_toolpanel_button:hover .chart_toolpanel_tip {\n    display: block\n}\n\n.chart_container.dark #chart_toolpanel {\n    background-color: #0a0a0a;\n    border-right-color: #404040\n}\n\n.chart_container.dark .chart_toolpanel_icon {\n    background-color: #0a0a0a;\n    border-color: #0a0a0a\n}\n\n.chart_container.dark .chart_toolpanel_button:hover .chart_toolpanel_icon {\n    background-color: #404040;\n    border-color: #666\n}\n\n.chart_container.dark .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-color: #080808;\n    border-color: #666\n}\n\n.chart_container.dark .chart_toolpanel_tip {\n    background-color: #ffac00;\n    border-color: #ffac00;\n    color: #0a0a0a\n}\n\n.chart_container.light #chart_toolpanel {\n    background-color: #fff;\n    border-right-color: #afb1b3\n}\n\n.chart_container.light .chart_toolpanel_icon {\n    background-color: #fff;\n    border-color: #fff\n}\n\n.chart_container.light .chart_toolpanel_button:hover .chart_toolpanel_icon {\n    background-color: #eee;\n    border-color: #afb1b3\n}\n\n.chart_container.light .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-color: #f4f4f4;\n    border-color: #afb1b3\n}\n\n.chart_container.light .chart_toolpanel_tip {\n    background-color: #f27938;\n    border-color: #f27938;\n    color: #eee\n}\n\n.chart_container.dark #chart_toolpanel .chart_toolpanel_button .chart_toolpanel_icon {\n    background-image: url("+n(112)+")\n}\n\n.chart_container.dark #chart_toolpanel .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-image: url("+n(113)+")\n}\n\n.chart_container.dark #chart_toolbar .chart_BoxSize {\n    background: url("+n(114)+") no-repeat;\n}\n\n.chart_container.light #chart_toolpanel .chart_toolpanel_button .chart_toolpanel_icon {\n    background-image: url("+n(115)+")\n}\n\n.chart_container.light #chart_toolpanel .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-image: url("+n(116)+")\n}\n\n.chart_container.light #chart_toolbar .chart_BoxSize {\n    background: url("+n(117)+') no-repeat;\n}\n\n.chart_container #chart_toolpanel #chart_Cursor {\n    background-position: 0 0\n}\n\n.chart_container #chart_toolpanel #chart_CrossCursor {\n    background-position: 0 -20px\n}\n\n.chart_container #chart_toolpanel #chart_SegLine {\n    background-position: 0 -40px\n}\n\n.chart_container #chart_toolpanel #chart_StraightLine {\n    background-position: 0 -60px\n}\n\n.chart_container #chart_toolpanel #chart_RayLine {\n    background-position: 0 -100px\n}\n\n.chart_container #chart_toolpanel #chart_ArrowLine {\n    background-position: 0 -80px\n}\n\n.chart_container #chart_toolpanel #chart_HoriSegLine {\n    background-position: 0 -160px\n}\n\n.chart_container #chart_toolpanel #chart_HoriStraightLine {\n    background-position: 0 -120px\n}\n\n.chart_container #chart_toolpanel #chart_HoriRayLine {\n    background-position: 0 -140px\n}\n\n.chart_container #chart_toolpanel #chart_VertiStraightLine {\n    background-position: 0 -180px\n}\n\n.chart_container #chart_toolpanel #chart_PriceLine {\n    background-position: 0 -200px\n}\n\n.chart_container #chart_toolpanel #chart_TriParallelLine {\n    background-position: 0 -220px\n}\n\n.chart_container #chart_toolpanel #chart_BiParallelLine {\n    background-position: 0 -240px\n}\n\n.chart_container #chart_toolpanel #chart_BiParallelRayLine {\n    background-position: 0 -260px\n}\n\n.chart_container .chart_toolpanel_button #chart_DrawFibRetrace {\n    background-position: 0 -280px\n}\n\n.chart_container #chart_toolpanel #chart_DrawFibFans {\n    background-position: 0 -300px\n}\n\n#chart_tabbar {\n    border-top: 1px solid;\n    cursor: default;\n    display: none;\n    *font-weight: bold;\n    height: 22px;\n    overflow: hidden;\n    position: absolute;\n    z-index: 1\n}\n\n#chart_tabbar ul {\n    height: 100%;\n    list-style: none;\n    padding: 0 0 0 4px\n}\n\n#chart_tabbar li {\n    display: inline-block;\n    height: 100%;\n    margin: 0\n}\n\n#chart_tabbar a {\n    cursor: pointer;\n    display: inline-block;\n    height: 100%;\n    margin: 0;\n    padding: 3px 4px 0 4px;\n    overflow: hidden\n}\n\n#chart_tabbar a:hover {\n    text-decoration: none\n}\n\n.chart_container.dark #chart_tabbar {\n    background-color: #0a0a0a;\n    border-top-color: #404040\n}\n\n.chart_container.dark #chart_tabbar a {\n    color: #e5e5e5\n}\n\n.chart_container.dark #chart_tabbar a:hover {\n    background-color: #383838;\n    color: #fff\n}\n\n.chart_container.dark #chart_tabbar a.selected {\n    color: #ffac00\n}\n\n.chart_container.light #chart_tabbar {\n    background-color: #fff;\n    border-top-color: #afb1b3\n}\n\n.chart_container.light #chart_tabbar a {\n    color: #393c40\n}\n\n.chart_container.light #chart_tabbar a:hover {\n    background-color: #f4f4f4;\n    color: #393c40\n}\n\n.chart_container.light #chart_tabbar a.selected {\n    color: #f27935\n}\n\n#chart_canvasGroup {\n    position: absolute;\n    z-index: 0\n}\n\n#chart_mainCanvas {\n    overflow: hidden;\n    position: absolute;\n    z-index: 0\n}\n\n#chart_overlayCanvas {\n    overflow: hidden;\n    position: absolute;\n    z-index: 2\n}\n\n#chart_loading {\n    border: 1px solid;\n    border-radius: 4px;\n    font-size: 18px;\n    font-weight: bold;\n    line-height: 48px;\n    overflow: hidden;\n    position: absolute;\n    text-align: center;\n    visibility: hidden;\n    width: 200px;\n    z-index: 200\n}\n\n#chart_loading.activated {\n    visibility: visible\n}\n\n.chart_container.dark #chart_loading {\n    border-color: #aaa;\n    background-color: rgba(0, 0, 0, 0.6);\n    color: #ccc\n}\n\n.chart_container.light #chart_loading {\n    border-color: #afb1b3;\n    background-color: rgba(244, 244, 244, 0.8);\n    color: #393c40\n}\n\n#chart_parameter_settings {\n    border-radius: 4px;\n    border: 1px solid;\n    width: 640px;\n    position: absolute;\n    overflow: hidden;\n    visibility: hidden;\n    z-index: 500\n}\n\n#chart_parameter_settings.clicked {\n    visibility: visible\n}\n\n#chart_parameter_settings h2 {\n    padding: 8px 12px;\n    margin: 0\n}\n\n#chart_parameter_settings table {\n    border-collapse: collapse;\n    width: 100%\n}\n\n#chart_parameter_settings tr {\n    line-height: 32px\n}\n\n#chart_parameter_settings th {\n    text-align: right;\n    padding: 0 4px 0 16px\n}\n\n#chart_parameter_settings input {\n    width: 2em;\n    margin: 0 2px 0 2px\n}\n\n#chart_parameter_settings #close_settings {\n    border-radius: 4px;\n    cursor: pointer;\n    font-weight: bold;\n    text-align: center;\n    margin: 8px auto;\n    padding: 5px 24px 5px 24px;\n    width: 84px\n}\n\n#chart_parameter_settings .chart_str_default {\n    margin-right: 24px\n}\n\n.chart_container.dark #chart_parameter_settings {\n    background-color: rgba(0, 0, 0, 0.9);\n    border-color: rgba(0, 0, 0, 0.9);\n    color: #ccc;\n}\n\n.chart_container.dark #chart_parameter_settings #close_settings {\n    background: #1887da;\n    color: #eee\n}\n\n.chart_container.light #chart_parameter_settings {\n    background-color: rgba(244, 244, 244, 0.8);\n    border-color: #afb1b3;\n    color: #393c40\n}\n\n.chart_container.light #chart_parameter_settings #close_settings {\n    background: #1478c8;\n    color: #eee\n}\n\n.chart_container input,\n.chart_container button {\n    border-radius: 4px;\n    border: 1px solid;\n    padding: 4px\n}\n\n.chart_container input[type=text] {\n    width: 12em\n}\n\n.chart_container input[type=button],\n.chart_container input[type=submit],\n.chart_container button {\n    font-family: arial, sans, serif;\n    padding: 4px 8px;\n    cursor: pointer\n}\n\n.chart_container.dark input,\n.chart_container.dark button {\n    background-color: #151515;\n    border-color: #333;\n    color: #ccc\n}\n\n.chart_container.light input,\n.chart_container.light button {\n    background-color: #ddd;\n    border-color: #ddd;\n    color: #222\n}\n\n.trade_container {\n    width: 250px;\n    height: 100%;\n    float: right;\n    z-index: 99999;\n    font-size: 12px;\n    overflow: hidden\n}\n\n.trade_container.dark {\n    background: #0a0a0a;\n    color: #f1f1f1\n}\n\n.m_righttop {\n    position: fixed;\n    top: 0;\n    height: 41px;\n    line-height: 41px;\n    width: 230px;\n    text-align: right;\n    padding-right: 20px;\n    font-size: 16px;\n    color: #f78d15;\n    font-family: Gotham, "Helvetica Neue", Helvetica, Arial, sans-serif\n}\n\n.m_righttop em {\n    width: 123px;\n    height: 28px;\n    background-position: 0 0;\n    display: block;\n    float: right;\n    margin-top: 5px\n}\n\n.dark .m_righttop em {\n    background-position: 0 0\n}\n\n.m_rightbot {\n    height: 22px;\n    line-height: 22px;\n    border-top: 1px solid #404040;\n    width: 230px;\n    text-align: right;\n    padding-right: 20px;\n    background-color: #0a0a0a;\n    border-bottom-color: #404040\n}\n\n.m_guadan {\n    margin-top: 29px;\n    overflow: hidden;\n    border-left: 1px solid #404040;\n    border-top: 1px solid #404040\n}\n\n.m_guadan a {\n    font-weight: bold;\n    color: #FFF;\n    text-decoration: none\n}\n\n.light .m_guadan {\n    margin-top: 29px;\n    overflow: hidden;\n    border-left: 1px solid #afb1b3;\n    border-top: 1px solid #afb1b3\n}\n\n#orderbook #asks,\n#orderbook #gasks,\n#orderbook #bids,\n#orderbook #gbids {\n    height: 195px;\n    position: relative;\n    display: inline-block;\n    overflow: hidden\n}\n\n.symbol-title {\n    font-size: 14px;\n    font-weight: bold;\n    text-align: center;\n    height: 16px;\n    line-height: 16px;\n    font-family: Arial, sans, serif;\n    padding: 5px\n}\n\n.symbol-title .dark {\n    color: #6BF\n}\n\n.symbol-title .infoDepth {\n    margin-left: 8px;\n    color: #f78d15\n}\n\n.symbol-title a:hover {\n    text-decoration: underline\n}\n\n#asks,\n#bids {\n    width: 150px\n}\n\n#orderbook {\n    padding-left: 3px;\n    border-bottom: 1px solid #222;\n    padding-bottom: 2px;\n    margin-left: 5px;\n    margin-bottom: 2px\n}\n\n#orderbook .table {\n    position: absolute;\n    border-collapse: collapse;\n    padding: 0;\n    margin: 0\n}\n\n#gasks .table,\n#asks .table {\n    bottom: 0\n}\n\n#orderbook .table .row {\n    padding: 0;\n    margin: 0;\n    height: 13px;\n    line-height: 13px;\n    font-family: Consolas, monospace\n}\n\n#orderbook .table .row {\n    line-height: 13px\n}\n\n#orderbook .table .g {\n    color: #666\n}\n\n#gasks,\n#gbids {\n    width: 80px\n}\n\n#gasks .amount,\n#gbids .amount {\n    float: right\n}\n\n#gasks .price,\n#gbids .price {\n    float: left;\n    text-align: right\n}\n\n.price {\n    margin-right: 10px\n}\n\n.price h {\n    visibility: hidden\n}\n\n.price g,\n.amount g {\n    color: #666\n}\n\n#price {\n    text-align: center;\n    font-size: 16px;\n    font-weight: bold;\n    height: 25px;\n    line-height: 25px\n}\n\n.trade_container .green {\n    color: #0F0\n}\n\n.trade_container .red {\n    color: #F00\n}\n\n.trade_container.dark #orderbook div.table div.remove g,\n.trade_container.dark #orderbook div.table div.remove span {\n    color: #444\n}\n\n.trade_container.light #orderbook div.table div.remove g,\n.trade_container.light #orderbook div.table div.remove span {\n    color: #ddd\n}\n\n.trade_container.dark #orderbook div.table div.add {\n    display: none;\n    background-color: rgba(238, 238, 238, 0.2)\n}\n\n.trade_container.light #orderbook div.table div.add {\n    display: none;\n    background-color: rgba(100, 100, 100, 0.2)\n}\n\n#trades {\n    overflow-y: auto;\n    text-align: left;\n    color: #666;\n    padding-top: 5px\n}\n\n.trade_container.light {\n    background: #fff;\n    border-left: 1px solid #afb1b3;\n    color: #000\n}\n\n.trade_container.light .m_righttop em {\n    background-position: 0 -32px\n}\n\n.trade_container.light .m_righttop {\n    position: fixed;\n    top: 0;\n    height: 40px;\n    line-height: 40px;\n    background: #FFF;\n    width: 230px;\n    border-bottom: 1px solid #afb1b3;\n    text-align: right;\n    padding-right: 20px\n}\n\n.trade_container.light #trades.trades table {\n    color: #333\n}\n\n.trade_container.light #trades.trades .v {\n    color: #333\n}\n\n.trade_container.light #trades.trades .v g {\n    color: #333\n}\n\n.trade_container.light .m_rightbot {\n    background: #fff;\n    border-top: 1px solid #afb1b3\n}\n\n.trade_container.light #orderbook {\n    border-bottom: 1px solid #afb1b3\n}\n\n.trades_list {\n    padding-left: 25px\n}\n\n.trades_list ul {\n    width: 200px;\n    height: 14px;\n    line-height: 14px;\n    text-align: left;\n    list-style: none;\n    clear: both;\n    zoom: 1;\n    margin: 0;\n    padding: 0\n}\n\n.trades_list ul li {\n    height: 14px;\n    line-height: 14px;\n    color: #999;\n    font-size: 12px;\n    list-style: none;\n    float: left;\n    *display: inline;\n    margin: 0;\n    padding: 0;\n    font-family: Consolas, monospace\n}\n\n.trades_list ul li.tm {\n    width: 62px;\n    color: #999\n}\n\n.trades_list ul li.pr-green {\n    width: 65px;\n    color: #6c6\n}\n\n.trades_list ul li.pr-red {\n    width: 65px;\n    color: #c66\n}\n\n.trades_list ul li.vl {\n    width: 60px;\n    color: #ccc\n}\n\n.trades_list ul li.vl g {\n    color: #666\n}\n\n.trade_container.dark .trades_list ul.newul {\n    display: none;\n    background-color: rgba(238, 238, 238, 0.2)\n}\n\n.trade_container.light .trades_list ul.newul {\n    display: none;\n    background-color: rgba(100, 100, 100, 0.2)\n}\n\n.light .trades_list ul li.tm {\n    color: #333\n}\n\n.light .trades_list ul li.pr-green {\n    color: #6c6\n}\n\n.light .trades_list ul li.pr-red {\n    color: #c66\n}\n\n.light .trades_list ul li.vl {\n    color: #333\n}\n\n.light .trades_list ul li.vl g {\n    color: #333\n}\n\n.container .nav {\n    margin: 0;\n    list-style: none;\n    padding: 0 0 0 3px;\n    height: 41px\n}\n\n.container .nav li {\n    display: inline-block;\n    margin-right: 9px\n}\n\n.container a {\n    text-decoration: none;\n    color: #6BF;\n    font-family: Arial, sans, serif\n}\n\n.container a:hover {\n    text-decoration: underline\n}\n\n.container a.active {\n    color: #FC9\n}\n\n.container span {\n    margin-left: 3px;\n    font-family: Consolas, monospace;\n    color: #ccc\n}\n\n.light .container span {\n    color: #333\n}\n\n.light .container a {\n    text-decoration: none;\n    color: #1478c8;\n    font-family: Arial, sans, serif\n}\n\n.chart_BoxSize {\n    width: 20px;\n    height: 20px\n}\n',""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAJn2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj42PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NTwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDY8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0xMi0wM1QxNzo1Njo1MiswODowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDozNjIzYmJlYi1iNGU2LWNhNDktOTRjZi05MTIyY2Q1Y2NiZTk8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjM2MjNiYmViLWI0ZTYtY2E0OS05NGNmLTkxMjJjZDVjY2JlOTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDo2QzE5MkVEOTY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBODwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDo4MzE3OTEwZi1kOTE5LTY4NDAtYWVhOS0zNzI5NWE2NGI1NmU8L3N0UmVmOmluc3RhbmNlSUQ+CiAgICAgICAgICAgIDxzdFJlZjpkb2N1bWVudElEPnhtcC5kaWQ6MWYwY2U2ZjQtZTRlNS1jODQ3LWIyOTgtNGNkNjRiYzBkYzA2PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE0LTEyLTAzVDE3OjU2OjUyKzA4OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxNC0xMi0wM1QxNzo1NjoyOCswODowMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE0LTEyLTAzVDE3OjU2OjUyKzA4OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgqC9xe+AAAAWUlEQVQIHWO8cOHCFgYGBm8gRgZbmRgZGXOBIj+QRH8wMTHlMenr69////9/J0wCxNbT07vHCBK4f/8+x8ePH6+B2Pz8/FqKioo/mEAcEAOoEmRkHogNEgMA0qYfb8X3frQAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA21pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0E5Qjc0ODc3QUQ0MTFFNDhCN0ZBNEVBQTM1QTBFNjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0E5Qjc0ODY3QUQ0MTFFNDhCN0ZBNEVBQTM1QTBFNjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2MjNiYmViLWI0ZTYtY2E0OS05NGNmLTkxMjJjZDVjY2JlOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QzE5MkVEOTY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvrZrC8AAABOSURBVHjaYvz//z8DCFy8eNEbSDHq6+tvAfEZQRJAQQ4g+xoDBGgBJX8wQTkVQKwIxRVgHRcuXFCEquaAKvoBxNogHZORBBmg7EkAAQYAImEV+46peUgAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3FpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkMxOTJFRDk2NTdFMTFFNEFFMDJBOUZGMjQ2MkEwQTgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkMxOTJFRDg2NTdFMTFFNEFFMDJBOUZGMjQ2MkEwQTgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjgzMTc5MTBmLWQ5MTktNjg0MC1hZWE5LTM3Mjk1YTY0YjU2ZSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5MkIK1AAAAPklEQVR42mJ0CUvewsDA4M2ACrYyAYlcIP6BJAhi54Ek7gNxJ5IEiH2PCcrpgCq4D2UzsCBpBxnJCDMWIMAAVuANgw9cJ2UAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADcWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFmMGNlNmY0LWU0ZTUtYzg0Ny1iMjk4LTRjZDY0YmMwZGMwNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2QzE5MkVEOTY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBOCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2QzE5MkVEODY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBOCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODMxNzkxMGYtZDkxOS02ODQwLWFlYTktMzcyOTVhNjRiNTZlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFmMGNlNmY0LWU0ZTUtYzg0Ny1iMjk4LTRjZDY0YmMwZGMwNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkyQgrUAAABCSURBVBhXY3QJS2aAAh8g/g/EW0EcJhABBBxAPAmIJ0PZcIkKIFaEYhAbLKEExOUgDhSA2IogCZARYO1QAGQzTAYAPbkH1E4jJr8AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0EwQTE5MkI4MTFEMTFFNEI4Njg4OEVFQzVGMTEyOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0EwQTE5MkE4MTFEMTFFNEI4Njg4OEVFQzVGMTEyOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjYzNEUzRUIyODExOTExRTRBNkJDQzhDODM5MEQxQTkwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjYzNEUzRUIzODExOTExRTRBNkJDQzhDODM5MEQxQTkwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VsD84AAABMxJREFUeNrsXEloFEEU7QztBgoKkmgueogajSQRBEEQJ3jITVDUgxL1YoggHlSU6MHlKkEQ3FFREEEviogexJlTDqIxcQl60Is4oujFDVFhfN+p1kqlu7ZZMhN+w6My1f1fVXf9ev2r+6eDfD4fRMhkMpeBaXKdCalg5NYFPMpms0sDy62OWKINhtGPn8ABoC+dTud1BKmE+onAUeAOSBt8CKKtExgESafrKagb1fcB+3FKv1x68K8hYA/Qj0aafAiijUZnACRdUUVoYfQbuA8MAy+BF8BzG4LPwARgCtCLcx9wGYVXwHLgqvjd6zKMGWAZWqRunhF1a3HeC2wITtHYw/gT/UD5AMWQOG6v0Q/iNrTcI4jJvZtA+sZ1GK8AX4V773J1ZTqNLyjOi16ccD4Fp+lcmwRavYM+Zlw10XljghIQ1NFQafa3k6xr5kkH+8H48AOWtDEgGBUGuQSVYoLl5b8r6wfofqu43QcuMZJsfARYAiEZdOqBZHxINrYNMBKNjQQmYy2BjXEiga1xLIGLcVy0HhkfhPGQ7Y1FPYd2W+NCWKr4tuvcKHouhIaVCktaOQlw4etRvE95GpPHngUafVR5xFyxVST1oP+y5iPlJXVlW00cUsK7uirVRO3Vtlmx+IhL6UbBdLW1BD5qLKvyLJSnfYwjTXwHNMD4A0taBQkw7ItQbAXmWhMIo/UCLaK6L3RoeAP5ilJ30TVOpOcoPeLnMHynJeWoxrOlh1PXrZc8irhQDw4D1zhO5DiR48SaeZ5oiJvqqfQV1chjt1cmTtRNNBdZj52lJkUyx0y+EWr5I1XbmIk1kTWRCZig/ASqeyet4HTvWNKRkSDLOt0bbad56Pjkgv2ACZiACewjFJunV6MIrLRPF2AoPejgCIUJmIAJakMTVfEJZSPaCWRMrcrHO2tibA9cNVE+nv2ACaqDgPPSqjqtzHbtXPTStzRPsopZO7MncoIjE5SDALMvJ8SjMfpbEpTYurgZmHOpCzVakLOpS+xBXKtOPVBbjLsGVTSMscPjShAZCbL+omQdZOucCWLHmKdzrROY3vpp8xMtjEfnJ9omtankYdJ6UDbWkVvfXIk8akAmD6VueT1TC5OywZVzTiQPA807VhP53w3q2paguq3ADaBdt98rP1EeSufwVu2ZU4ykzT8wvWvX5h+Y3nhrc/dN+YmmiWWTn6h9F8+ayJrImlikJkbgnG3O2WZNLLUmOhrH5ycmGetmaWg7hZMEN6UTzKIfxtlqYuLOymui7VBqPZHzEz2f6vLb/zHOjCs+sc3mFanoUaYspzBOXlxn2JXZlVnSKkSAEZmB4gKwG6PxWt5ne2vbCdxWjbUxUsztblJ5XNn34qGHZDvZ650r6ueh2AfcSgqyiPgccAkXLqvUbwZWAcew72HSKGwEcorx/KDwr4nTgW1kHDsKOHAOijVAt/hNn/vaAqwUrQ7oojSasseBezjwJn43B4UPbD2h9QHqvpv8YHVQ+DbaXRhTD1YEhe/Gxa0b6LtZzfLSd6a4cPQtrE3AY9HqD7F/KorFAMWS9F+mRDAcLX1HxYrAW6BNGC0EiOgZ8JRKEH8bcQpKpugO4KMwoI+tnVS/FSc/Q4nz8W7T9/LU1bt3sitrYhD8EWAAdoU1AmCjen8AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI0MkEyMUI4MTIwMTFFNDgxNjhGRjc0RjJGMjMwQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI0MkEyMUE4MTIwMTFFNDgxNjhGRjc0RjJGMjMwQkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjZDNzdDQUY4NjU3RTExRTRBRTAyQTlGRjI0NjJBMEE4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjZDNzdDQUY5NjU3RTExRTRBRTAyQTlGRjI0NjJBMEE4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+s3AxtQAABPZJREFUeNrsXE1oHkUYnvkYq0IFC5ImubRI1WolSUEoFIqWHnIr6KqHStWLtaceJFhyUryG4ElKf8RaKELNYkFETyYXPYhNW3+CHtqL+NX+XdoKxQrTZ3bny7ffdv43+Wziu/BssrP7Pjs7M++z7+683zIpJVvEDDsBPNJT5kGL9S57gTMs58+xwKVlKHsC+A4kEwBPIVDLGmAK+Bok61MIOss4cA4k46kEahnUNZkCHkghUItqiwnge5BsSiHoLKp35kGyt1MgAoz+Bb4FFoDfgd+AX0MIbgDqmh8GJlkm52Ma8QKwHfhMb0/G9MIssA1nVNU8rMtewnU/FUJwqOj7TF4vtjL5A9bn9XHvGrtHOYRzyfl+TfwPsAmkf8R240nglh7e79R3+rsxkzdRi481wUfxl5DojauGIOez//s2WBEEHLcyV1eNFbJu95Od7nsfyGPvjdSN/804IElrTCCiLXIum9cgk7xA/8dBzkf07T6hDUrjD4CtqH5XZIKC6hk2ApwGxur7Ghn7CTzGboIAYztBoLGZIML4XoKu8WjoI4+oj+3iZpLJ88HjA2eTlRrImAeuJbmxCJOLkqgutyZ29WEA68utRGMlLkeAYRY7cOq+IlKkvEfWAs9qHe596IWywazDXSRJeY87N9REEdzaVkEJbO1lFpSA1vYpUqe14wRVi+pgrJTXe+ESsB5nvkKa2E9NzPkzWL8JbBSRRq9obNGl0zE1eBV4r1b2SWycqN7m7NdbCxg7W1qRUj5UeTn1eXgjdn3l/UIfcv4X/j8VpsoUJ1KcSHHi/U5QxomsWZyY86HGcWIj4zgCi5f6ojR/zJQaofYhUg2MmURyhGptA9JE0kQioGjdJ6j6Jey9Q9k+x/LColFJNhf77Bzk5rH3BfJGIiACInBoYqD2uUW1qn0BKQNuVVaT0RShEAEREMHK0MTa8WmaWDk+XhONNYjVxMrxpIlEsBIIKD+xPwR2PQjUypZX+zwiu8yTdSFaSRmSlOBIBMvhjTlvax0YXvy/qw3mMoMHtmPKXK8D2yFlwiNpw9ZtTeZTpLazDe4LXxDGxqlfe9A46BgpspzPNJP1TL4cT2Dqd1KkFU+gpgxzfhoYs+wfULf/ltW4mndi3l/kJwpHMLHVYdwhvyRsz4M9xg7y8EasBlwV8mpeWtI7NeGdoPWRO+dYg3JxUo31/l53TunK6JmdWs3ifMEwQsPzE23DO2jG25m778tP9OZkqcaaYQOOgNs5F0+qTJpImthUE43ORDnblLNNmpisicmRifl3LLYzO7xUBLuwRXBbLsFs/jIuwEtFYFjj+B1LQ02knG1G+YmMMuOW5O2+CE4bsRzXeIJiFYwDEZt7syrbgIYySVrfCHK+DvgCeDy1BgeAr9CVF9OHMmMP+h+6ljzd2N0uyvahtDnXnKtPoh0EvhQO9uPAp2i4uVr568Au4EPs+9HWC3uAds34SVb+NPFR4C1lbO6FnG/A+kVgn95Wn/t6A3hen3XePg7KT7xNFNXP5FVsb9ZnXQu8bfpeWL0Gu1n5bbRvYKxqsAOYtjx0qM9ebe7qQc4fw/ooK7+F9RpwtngqyeRtvV/V4llAxc/qV6aKYKEkMMWKjP0JjGqjpwFF9Avwc/E3k393Fal8iKhmyR8DrmmDn5j6yFom79hE1TTG98EgSOvMlxCR7EqiythdAQYAbEvqZUahHBUAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABC0lEQVQ4T7WTYVEDMRSEv1VAJYCDOmgdgAPAASigKGhx0CoACcUBEsDBVcFj9ibpvF6TDn/IzM0kL9l9t5usImIFvHA6niVtcikinoB1qg3AmyIiSnEslPle0n5CsAT8eZjsChgqwaEUtpIeJ39zsoyILXAPjJhK8Apcl40uSQLvgG9LPxJIWqUDZyQZLOmhemcC6/mqmlskU7A1RYT9mKultwDuLEvSEBE2+MOdp+ebBKXDzOBLhnrvfwiKhFvgJkl4b13xJRN3VXPH2Dmw6F3jEVw9mJLka/RTzg/pDNwiAX7yQ7LbM6ALbpCMGEvwZAwGUBP42QnTIoXJDQ8mcJxrumqjv8TZYdr8Ai/uwaXkPGIcAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI1Q0Q4QzI4MTIxMTFFNEFGNzk4NUQxNjVEMjU2RTYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI1Q0Q4QzE4MTIxMTFFNEFGNzk4NUQxNjVEMjU2RTYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwNTdERDc2N0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwNTdERDc3N0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+R+XfywAABNVJREFUeNrsXEloFEEU7QztBgoKkmgueogajSQRBFEMJnjITVDUgxL1YogXDypK9OBylSAI4r6CCOpBEdGDOAEhB9GYuIR40Is4QdGLG6LC+H6mWsua7lq6Z8aZ8Bsela7u/7q669ebX10/7WWzWS/A0uWtl4Apcp0JKe/frQN4vKylbbFnuVURS7DBMNj5AewDevoepLM6glRE/XjgMHAHpDVxCIKtHRgASbvrLagb1fcAe3FLP11a8OdCwC6gDxepi0MQbNQ7/SDpCCp8C6NfwH1gCHgJDAMvbAg+AeOASUA37r3fpRde0TMFroj9bpduTANLcEVq5klRtwb3Pc+G4Dj1PYw/0g7KhygGxXm7jX4QtuHKXYKY3LsOpG9cu/Ey8EW49w5XV6bb+IzirGjFMedbcBrOlUmg1TvoY9pVE503JigAQRV1leZ4M8m6Zpy0sR+MDT9gSUtO4Lsa5IVBLkGlGGBZ+e/S+gGa3yh+7t2fgTA+BCyCkAw4tUAyPiAb2wYYkcZGApOxlsDGOJLA1jiUwMU4LFoPjPfDeND2h0W9h2Zb49FN9W3XsZF4LPiGmQprYjE0UXK6ahTvUjGNyWNPAbV+TONgrIzYKpJ60l9ZiyPlBXVlW00cVMK7qjLVRO3TtpmxxBGXwvWC6WlrCeKosazKM1CeiGMcDOcRoAbG71kTS6iJ6PYFKLYAs61bIIzWCTSI6h6XFqwnX1HqzrvGifQepUvsDsF3GlKOajxTejl1zXrKo4gLteAgcJXjRI4TOU6smPeJhripmspYLZA8dltp4kTdQHOR9dBRalIkc8wUN0ItfqRqGzOxJrImMgETFJ9Ade+oGZxujaU1MBJkvU6/jbbD3Hd8c8F+wARMwAT2EYrN26s8Aivts32HMroYzREKEzABE1SEJqri48tGdBBIm64qn++siaEtcNVE+Xz2AyYoDwLOSyvrtDLbuXPiqW9h3mQlmTuzJ3KCIxMUgwCjLyPEozb4WxKU0LqwEZhxqfM1WpCxqYtsQdhVnVqgXjHsGZRRN4Z2j6sqB0ZEBlxPJOsgW+tMENrHPJwrhEA3nLWrftr8RAvj/PxE26Q2dd3Zj5oPysY6cusfVyIPLiCT+1KzYr1T86OywZV7jiT3Pc0aq4l8dIO6NkWobiNwA2jWHY+Vnyh3pXN4q7bMKUbS5h+Y1tq1+QemFW9t7r4pP9E0sGzyE7Vr8ayJrImsiQk1MQDnbHPONmtioTXR0Tg8PzHKWDdKfdshHCW4KZ1gJn4ZZ6uJkQdLr4m2Xal1Zc5PjDmcefX/P2fGJU9ss1kiFS1KF+UWxsjCdZpdmV2ZJa1EBOiRaSjOATvRG6/lY7Y/bduB26qxKVJVmzahOK4c9+GhhWQ7MdaaK+rnoNgD3PI17BeAi3hwvUr9JmAlcATHHkX1wgYgoxjP9XL/mjgV2ErGob2AE2ehWA10in363NdmYIW4ar8uSqMhexS4hxNvYr/ey31g6ynND1D3zeQHq7zct9Huwpha0OLlvhsXNm+g72bVy1Pf6ShOe7lvYW0EnoirfhfHJ6NYCFAsSf9lSgRDwdQ3L1YE3gJNwmg+QETPgWdUgvirPHdWM0XPAB+EAd3/sPqtOPkdSpiPd5q+l6fO3mMnu7Imet5vAQYAtaODAARZxFkAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY5QjlCQTA4MTIyMTFFNEIwQUVBMkM3NjgwODE3OTYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY5QjlCOUY4MTIyMTFFNEIwQUVBMkM3NjgwODE3OTYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwNTdERDdBN0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwNTdERDdCN0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+2tcnMAAABOxJREFUeNrsXDtoFUEU3SzjDwwoiNE0WsS/aAQ/IIiKRTpBUQvBT+MPxEKDEhs1hU0IVvEHahREUAtBRCu10UI0RtSghTbiE39NoiAqPM9NZnWzmZm9My/vaeIdOGx2svfs7Myds3d37tuoWCxGCbqbFl0AqtN1eYij/mUT8Kjn4OKFEbPEhrppwD2QNAJVIQRURgItwE2Q1IQQJKUB6ARJQygBlUm6JS3AiBACKtQXjcB9kNSFECSFRqcDJJuSCsUw+gncBrqAl8AL4DmHoBugax4DNFUffdDh04mvgKXAJb3f5DMKd4AlOCM185SuW4vrnsEhOEFjD+PPtIPtA2ye6OP2G4eHJoSr4Mw7NfF3oA6kb3yH8SLwRbv3Xm9Hwhl7sDmjW9HmfQmhs3G4EGAI7/zvfTA0CKpwK3MNVT3JumOerHTe94jc994ow/hX/EAkrXQC5WsAnSyW3ALMwipC5f0AzZ+nb/f+faCNm4EFaH6nVx+kjA+njVkELmPOrc1p7CTgGFsJuMZGAh/jAcOYMj4E4yfcG0vWk+q5xn0BMQhSN5KizwPXoNxYlGmKiqiWWRNTTjcRm/dxoDF57GmgNg40TubKO8U0yo71H1njuKvL3cs/Cvqare6uQqR8UDVRsXvbVri9XV5B4fR2niIlHeYnqFqV6SXLSR8pz7bgHVAD4w+iiRXURAz7bGy2AlOVp9F6jTm6utWnBRvIVzJ153zjRHqPslPvdsF35sQexuTuk1Mvp66ExonUgiPAZe6LKIkTJU6UOPGfJtBxYlgnpjx2V8lxYlyCcadXH9hmaV6Ulh8zhUao5Y9UuTGTCo1QRRNFE4VACHwUqZ+LJi9hTdPZtsayIjHSZHdzn1xDnmJ97wsyG4VACISAH6HYtM8pqmnt46QMOFW5dzFaIhQhEAIh+CtxIjcetAVeQZqYPt5bE40t8NXE9PGiiUIwBAgkP7FScaJND7haGedpX57IlnexjqWVkiEpCY5CUIbZiNlX0DpQm/yd0gZjnWkGFnzqXK8DC5w6lSNptbb9hCxPkQquPvg35oIydU722ll+kBgRGXC1JFkH2TpvAlMPiyINSUHJTCTnqp8zP5Fh/Ds/UTmCiQUOY3N+Yvp5MG3sImd3YjrgGrDuHJrUljw7OxdoOfmJ1jVWzuqvYhi7hrK533QOGUrvlR3UzwOuAfXecaLpstj5ic78g7z8RFeH5uYn5o0GJz/RuRYvqiyaKJqoC2bjfI7y2BCkidZnZ8nZlpzt/1gT40BjsybajF2zVHGnsE1wY5dglvwyjquJnLCmQprIHUqnK0t+YvgLCFn9L5MmVubtvuKmjdiOK3mBYhj4gfLNvRmOfSCuLJIWVeq3fRiR8dicBfZhNF6HtGAPcCNr7OXKKKNyH7oGPd04p1/IdnTQmivq6ZNoB4DrysHeDpxHx93N1G8GVgHH8L+HtlHYCBQyxtOjvp8mjgO2kbFxFHDgFGzWANv1Pn3uawuwXJ+1w+oH+hNv9Fmzdhz4Efsz9VnHAjtM3wvLtmB11PdttFswphYsA1otzw303ayZ6UffCVHfT0/b9IPoY32t3/T/qRVzAYol6VemRNDVKyiG4aKPCr0F5mujWQARPQOe0hbEX/tdQiZLfjfwSRvQx9aO4/8/bKJq8vHtMGBpnfESfJJdRVSj6JcAAwDMequ4kXXO2QAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABKElEQVQ4T7VTwU0DMRCcrYArwby9j3QQOoAOgA5CBYQKCB0kFUAJoQMe9v/o4JD8X7SWfVo5vhMfLJ1krT3jm9kdYuY9gGeYJSJPMcaDrXnvd0T0amoTgDdiZinFXCj7cwjhbAmY+QaAfrp2AK4ATJXgRwsicowxPlpgu/feH4noHkDGVIIXEXF6sEZSwSJyIqJRpc8EIYS9uXDxJxYcY3yo3lEx56tq7pG0YJWlnojIhnp6C+AupeTGcZyYeRKRD325vd8l0EvOuUHBa4bq2f8QFAm3KaVrI+G91+I1E09V84KxGyLaLrVxBlcPWpK5jWWU7SBdgHskRPRtB0ndHnTCeq1qQlVHOWNUgm5yMADUBH4uhGlrwjRoHpRA41zTlc//GGcN0+EXyGXo9iBlz1cAAAAASUVORK5CYII="},function(t,e,n){var r={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t){if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),a=null,s=0,u=[],c=n(119);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return l(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}if(t){l(h(t,e),e)}for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete r[s.id]}}}};function l(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(g(i.parts[a],e))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(g(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:s}}}}function h(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function d(t,e){var n=o(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function p(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function f(t){var e=document.createElement("style");return t.attrs.type="text/css",_(e,t.attrs),d(t,e),e}function _(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var u=s++;n=a||(a=f(e)),r=m.bind(null,n,u,!1),i=m.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",_(e,t.attrs),d(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=c(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=f(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){p(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}var v=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function m(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=v(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var o;return o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},function(t,e){t.exports='<div class="trade_container dark hide">\n    <div class="m_cent">\n        <div class="m_guadan">\n            <div class="symbol-title">\n                <a class="dark"></a>\n            </div>\n            <div id="orderbook">\n                <div id="asks">\n                    <div class="table"></div>\n                </div>\n                <div id="gasks">\n                    <div class="table"></div>\n                </div>\n                <div id="price" class="green"></div>\n                <div id="bids">\n                    <div class="table"></div>\n                </div>\n                <div id="gbids">\n                    <div class="table"></div>\n                </div>\n            </div>\n            <div id="trades" class="trades">\n                <div class="trades_list"></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="chart_container dark">\n    <div id="chart_dom_elem_cache"></div>\n    \x3c!-- ToolBar --\x3e\n    <div id="chart_toolbar">\n        <div class="chart_toolbar_minisep"></div>\n        \x3c!-- Periods --\x3e\n        <div class="chart_dropdown" id="chart_toolbar_periods_vert">\n            <div class="chart_dropdown_t"><a class="chart_str_period"></a></div>\n            <div class="chart_dropdown_data" style="margin-left: -58px;">\n                <table>\n                    <tbody>\n                    <tr>\n                        <td>\n                            <ul>\n                                <li id="chart_period_1w_v" style="display:none;" name="1w">\n                                    <a class="chart_str_period_1w"></a>\n                                </li>\n                                <li id="chart_period_3d_v" style="display:none;" name="3d">\n                                    <a class="chart_str_period_3d">3</a>\n                                </li>\n                                <li id="chart_period_1d_v" style="display:none;" name="1d">\n                                    <a class="chart_str_period_1d"></a>\n                                </li>\n                                <li id="chart_period_12h_v" style="display:none;" name="12h">\n                                    <a class="chart_str_period_12h">12</a>\n                                </li>\n                                <li id="chart_period_6h_v" style="display:none;" name="6h">\n                                    <a class="chart_str_period_6h">6</a>\n                                </li>\n                                <li id="chart_period_4h_v" style="display:none;" name="4h">\n                                    <a class="chart_str_period_4h">4</a>\n                                </li>\n                                <li id="chart_period_2h_v" style="display:none;" name="2h">\n                                    <a class="chart_str_period_2h">2</a>\n                                </li>\n                                <li id="chart_period_1h_v" style="display:none;" name="1h">\n                                    <a class="chart_str_period_1h">1</a>\n                                </li>\n                            </ul>\n                        </td>\n\n                    </tr>\n\n                    <tr>\n                        <td>\n                            <ul>\n                                <li id="chart_period_30m_v" style="display:none;" name="30m">\n                                    <a class="chart_str_period_30m">30</a>\n                                </li>\n                                <li id="chart_period_15m_v" style="display:none;" name="15m">\n                                    <a class="chart_str_period_15m">15</a>\n                                </li>\n                                <li id="chart_period_5m_v" style="display:none;" name="5m">\n                                    <a class="chart_str_period_5m">5</a>\n                                </li>\n                                <li id="chart_period_3m_v" style="display:none;" name="3m">\n                                    <a class="chart_str_period_3m">3</a>\n                                </li>\n                                <li id="chart_period_1m_v" style="display:none;" name="1m">\n                                    <a class="chart_str_period_1m selected">1</a>\n                                </li>\n                                <li id="chart_period_line_v" style="display:none;" name="line">\n                                    <a class="chart_str_period_line"></a>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div id="chart_toolbar_periods_horz">\n            <ul class="chart_toolbar_tabgroup" style="padding-left:5px; padding-right:11px;">\n                <li id="chart_period_1w_h" name="1w" style="display: none;">\n                    <a class="chart_str_period_1w"></a>\n                </li>\n                <li id="chart_period_3d_h" name="3d" style="display: none;">\n                    <a class="chart_str_period_3d">3</a>\n                </li>\n                <li id="chart_period_1d_h" name="1d" style="display: none;">\n                    <a class="chart_str_period_1d"></a>\n                </li>\n                <li id="chart_period_12h_h" name="12h" style="display: none;">\n                    <a class="chart_str_period_12h">12</a>\n                </li>\n                <li id="chart_period_6h_h" name="6h" style="display: none;">\n                    <a class="chart_str_period_6h">6</a>\n                </li>\n                <li id="chart_period_4h_h" name="4h" style="display: none;">\n                    <a class="chart_str_period_4h">4</a>\n                </li>\n                <li id="chart_period_2h_h" name="2h" style="display: none;">\n                    <a class="chart_str_period_2h">2</a>\n                </li>\n                <li id="chart_period_1h_h" name="1h" style="display: none;">\n                    <a class="chart_str_period_1h">1</a>\n                </li>\n                <li id="chart_period_30m_h" name="30m" style="display: none;">\n                    <a class="chart_str_period_30m">30</a>\n                </li>\n                <li id="chart_period_15m_h" name="15m" style="display: none;">\n                    <a class="chart_str_period_15m">15</a>\n                </li>\n                <li id="chart_period_5m_h" name="5m" style="display: none;">\n                    <a class="chart_str_period_5m">5</a>\n                </li>\n                <li id="chart_period_3m_h" name="3m" style="display: none;">\n                    <a class="chart_str_period_3m">3</a>\n                </li>\n                <li id="chart_period_1m_h" name="1m" style="display: none;">\n                    <a class="chart_str_period_1m selected">1</a>\n                </li>\n                <li id="chart_period_line_h" name="line" style="display: none;">\n                    <a class="chart_str_period_line"></a>\n                </li>\n            </ul>\n        </div>\n        <div id="chart_show_indicator" class="chart_toolbar_button chart_str_indicator_cap selected"></div>\n        <div id="chart_show_tools" class="chart_toolbar_button chart_str_tools_cap"></div>\n        <div id="chart_toolbar_theme">\n            <div class="chart_toolbar_label chart_str_theme_cap">\n                \n            </div>\n            <a name="dark" class="chart_icon chart_icon_theme_dark selected"></a>\n            <a name="light" class="chart_icon chart_icon_theme_light"></a>\n        </div>\n        <div class="chart_dropdown" id="chart_dropdown_settings">\n            <div class="chart_dropdown_t"><a class="chart_str_settings"></a></div>\n\n            <div class="chart_dropdown_data" style="margin-left: -142px;">\n                <table>\n                    <tbody>\n                    <tr id="chart_select_main_indicator">\n                        <td class="chart_str_main_indicator"></td>\n                        <td>\n                            <ul>\n                                <li><a name="MA" class="selected">MA</a></li>\n                                <li><a name="EMA" class="">EMA</a></li>\n                                <li><a name="BOLL" class="">BOLL</a></li>\n                                <li><a name="SAR" class="">SAR</a></li>\n                                <li><a name="NONE" class="">None</a></li>\n                            </ul>\n                        </td>\n                    </tr>\n\n                    <tr id="chart_select_chart_style">\n                        <td class="chart_str_chart_style"></td>\n                        <td>\n                            <ul>\n                                <li><a class="selected">CandleStick</a></li>\n                                <li><a>CandleStickHLC</a></li>\n                                <li><a class="">OHLC</a></li>\n                            </ul>\n                        </td>\n                    </tr>\n\n                    <tr id="chart_select_theme" style="display: none;">\n                        <td class="chart_str_theme"></td>\n                        <td>\n                            <ul>\n                                <li>\n                                    <a name="dark" class="chart_icon chart_icon_theme_dark selected"></a>\n                                </li>\n\n                                <li>\n                                    <a name="light" class="chart_icon chart_icon_theme_light"></a>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                    <tr id="chart_enable_tools" style="display: none;">\n                        <td class="chart_str_tools"></td>\n                        <td>\n                            <ul>\n                                <li><a name="on" class="chart_str_on"></a></li>\n                                <li><a name="off" class="chart_str_off selected"></a></li>\n\n                            </ul>\n\n                        </td>\n                    </tr>\n                    <tr id="chart_enable_indicator" style="display: none;">\n                        <td class="chart_str_indicator"></td>\n                        <td>\n                            <ul>\n                                <li><a name="on" class="chart_str_on selected"></a></li>\n                                <li><a name="off" class="chart_str_off"></a></li>\n                            </ul>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td></td>\n                        <td>\n                            <ul>\n                                <li>\n                                    <a id="chart_btn_parameter_settings" class="chart_str_indicator_parameters"></a>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n\n        <div class="chart_dropdown" id="chart_language_setting_div" style="padding-left: 5px;">\n            <div class="chart_dropdown_t">\n                <a class="chart_language_setting">(LANG)</a>\n            </div>\n            <div class="chart_dropdown_data" style="padding-top: 15px; margin-left: -12px;">\n                <ul>\n                    <li style="height: 25px;">\n                        <a name="zh-cn" class="selected">(zh-CN)</a>\n                    </li>\n                    <li style="height: 25px;">\n                        <a name="en-us">English(en-US)</a>\n                    </li>\n                    <li style="height: 25px;">\n                        <a name="zh-tw">(zh-HK)</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <div id="chart_updated_time">\n            <div id="sizeIcon" class="chart_BoxSize"></div>\n\n        </div>\n    </div>\n               \x3c!-- ToolPanel --\x3e\n    <div id="chart_toolpanel">\n        <div class="chart_toolpanel_separator"></div>\n\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_Cursor" name="Cursor"></div>\n            <div class="chart_toolpanel_tip chart_str_cursor">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_CrossCursor" name="CrossCursor"></div>\n            <div class="chart_toolpanel_tip chart_str_cross_cursor">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_SegLine" name="SegLine"></div>\n            <div class="chart_toolpanel_tip chart_str_seg_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_StraightLine" name="StraightLine"></div>\n            <div class="chart_toolpanel_tip chart_str_straight_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_RayLine" name="RayLine"></div>\n            <div class="chart_toolpanel_tip chart_str_ray_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_ArrowLine" name="ArrowLine"></div>\n            <div class="chart_toolpanel_tip chart_str_arrow_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_HoriSegLine" name="HoriSegLine"></div>\n            <div class="chart_toolpanel_tip chart_str_horz_seg_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_HoriStraightLine" name="HoriStraightLine"></div>\n            <div class="chart_toolpanel_tip chart_str_horz_straight_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_HoriRayLine" name="HoriRayLine"></div>\n            <div class="chart_toolpanel_tip chart_str_horz_ray_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_VertiStraightLine" name="VertiStraightLine"></div>\n            <div class="chart_toolpanel_tip chart_str_vert_straight_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_PriceLine" name="PriceLine"></div>\n            <div class="chart_toolpanel_tip chart_str_price_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_TriParallelLine" name="TriParallelLine"></div>\n            <div class="chart_toolpanel_tip chart_str_tri_parallel_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_BiParallelLine" name="BiParallelLine"></div>\n            <div class="chart_toolpanel_tip chart_str_bi_parallel_line">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_BiParallelRayLine" name="BiParallelRayLine"></div>\n            <div class="chart_toolpanel_tip chart_str_bi_parallel_ray">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_DrawFibRetrace" name="DrawFibRetrace"></div>\n            <div class="chart_toolpanel_tip chart_str_fib_retrace">\n                \n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_DrawFibFans" name="DrawFibFans"></div>\n            <div class="chart_toolpanel_tip chart_str_fib_fans">\n                \n            </div>\n        </div>\n        <div style="padding-left: 3px;padding-top: 10px;">\n            <button style="color: red;" id="clearCanvas" title="Clear All">X</button>\n        </div>\n    </div>\n    <div id="chart_canvasGroup" class="temp">\n        <canvas class="chart_canvas" id="chart_mainCanvas" style="cursor: default;"></canvas>\n        <canvas class="chart_canvas" id="chart_overlayCanvas" style="cursor: default;"></canvas>\n    </div>\n    <div id="chart_tabbar">\n        <ul>\n            <li><a name="MACD" class="">MACD</a></li>\n\n            <li><a name="KDJ" class="">KDJ</a></li>\n\n            <li><a name="StochRSI" class="">StochRSI</a></li>\n\n            <li><a name="RSI" class="">RSI</a></li>\n\n            <li><a name="DMI" class="">DMI</a></li>\n\n            <li><a name="OBV" class="">OBV</a></li>\n\n            <li><a name="BOLL" class="">BOLL</a></li>\n\n            <li><a name="SAR" class="">SAR</a></li>\n\n            <li><a name="DMA" class="">DMA</a></li>\n\n            <li><a name="TRIX" class="">TRIX</a></li>\n\n            <li><a name="BRAR" class="">BRAR</a></li>\n\n            <li><a name="VR" class="">VR</a></li>\n\n            <li><a name="EMV" class="">EMV</a></li>\n\n            <li><a name="WR" class="">WR</a></li>\n\n            <li><a name="ROC" class="">ROC</a></li>\n\n            <li><a name="MTM" class="">MTM</a></li>\n\n            <li><a name="PSY">PSY</a></li>\n\n        </ul>\n\n    </div>\n\n    <div id="chart_parameter_settings">\n        <h2 class="chart_str_indicator_parameters"></h2>\n        <table>\n            <tbody>\n            <tr>\n                <th>MA</th>\n                <td><input name="MA"><input name="MA"><input name="MA"><input name="MA"><br><input\n                        name="MA"><input\n                        name="MA">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n\n                <th>DMA</th>\n                <td><input name="DMA"><input name="DMA"><input name="DMA"></td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>EMA</th>\n                <td>\n                    <input name="EMA"><input name="EMA"><input name="EMA"><input name="EMA"><br>\n                    <input name="EMA"><input name="EMA">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n\n                <th>TRIX</th>\n                <td><input name="TRIX"><input name="TRIX"></td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>VOLUME</th>\n                <td><input name="VOLUME"><input name="VOLUME"></td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n\n                <th>BRAR</th>\n                <td><input name="BRAR"></td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>MACD</th>\n                <td>\n                    <input name="MACD"><input name="MACD"><input name="MACD">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n\n                <th>VR</th>\n                <td><input name="VR"><input name="VR"></td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>KDJ</th>\n                <td>\n                    <input name="KDJ"><input name="KDJ"><input name="KDJ">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n\n                <th>EMV</th>\n                <td>\n                    <input name="EMV"><input name="EMV">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>StochRSI</th>\n                <td>\n                    <input name="StochRSI"><input name="StochRSI"><input name="StochRSI"><input name="StochRSI">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n\n                <th>WR</th>\n                <td>\n                    <input name="WR"><input name="WR">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>RSI</th>\n                <td>\n                    <input name="RSI"><input name="RSI"><input name="RSI">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n\n                <th>ROC</th>\n                <td>\n                    <input name="ROC"><input name="ROC">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>DMI</th>\n                <td>\n                    <input name="DMI"><input name="DMI">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n\n                <th>MTM</th>\n                <td>\n                    <input name="MTM"><input name="MTM">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>OBV</th>\n                <td>\n                    <input name="OBV">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n\n                <th>PSY</th>\n                <td>\n                    <input name="PSY"><input name="PSY">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>BOLL</th>\n                <td>\n                    <input name="BOLL">\n                </td>\n                <td>\n                    <button class="chart_str_default"></button>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n\n        <div id="close_settings"><a class="chart_str_close"></a></div>\n\n    </div>\n\n    \x3c!-- Loading --\x3e\n    <div id="chart_loading" class="chart_str_loading">...</div>\n</div>\n\n<div style="display: none" id="chart_language_switch_tmp">\n    <span name="chart_str_period" zh_tw="" zh_cn="" en_us="TIME"></span>\n    <span name="chart_str_period_line" zh_tw="" zh_cn="" en_us="Line"></span>\n    <span name="chart_str_period_1m" zh_tw="1" zh_cn="1" en_us="1m"></span>\n    <span name="chart_str_period_3m" zh_tw="3" zh_cn="3" en_us="3m"></span>\n    <span name="chart_str_period_5m" zh_tw="5" zh_cn="5" en_us="5m"></span>\n    <span name="chart_str_period_15m" zh_tw="15" zh_cn="15" en_us="15m"></span>\n    <span name="chart_str_period_30m" zh_tw="30" zh_cn="30" en_us="30m"></span>\n    <span name="chart_str_period_1h" zh_tw="1" zh_cn="1" en_us="1h"></span>\n    <span name="chart_str_period_2h" zh_tw="2" zh_cn="2" en_us="2h"></span>\n    <span name="chart_str_period_4h" zh_tw="4" zh_cn="4" en_us="4h"></span>\n    <span name="chart_str_period_6h" zh_tw="6" zh_cn="6" en_us="6h"></span>\n    <span name="chart_str_period_12h" zh_tw="12" zh_cn="12" en_us="12h"></span>\n    <span name="chart_str_period_1d" zh_tw="" zh_cn="" en_us="1d"></span>\n    <span name="chart_str_period_3d" zh_tw="3" zh_cn="3" en_us="3d"></span>\n    <span name="chart_str_period_1w" zh_tw="" zh_cn="" en_us="1w"></span>\n    <span name="chart_str_settings" zh_tw="" zh_cn="" en_us="MORE"></span>\n    <span name="chart_setting_main_indicator" zh_tw="" zh_cn="" en_us="Main Indicator"></span>\n    <span name="chart_setting_main_indicator_none" zh_tw="" zh_cn="" en_us="None"></span>\n    <span name="chart_setting_indicator_parameters" zh_tw="" zh_cn="" en_us="Indicator Parameters"></span>\n    <span name="chart_str_chart_style" zh_tw="" zh_cn="" en_us="Chart Style"></span>\n    <span name="chart_str_main_indicator" zh_tw="" zh_cn="" en_us="Main Indicator"></span>\n    <span name="chart_str_indicator" zh_tw="" zh_cn="" en_us="Indicator"></span>\n    <span name="chart_str_indicator_cap" zh_tw="" zh_cn="" en_us="INDICATOR"></span>\n    <span name="chart_str_tools" zh_tw="" zh_cn="" en_us="Tools"></span>\n    <span name="chart_str_tools_cap" zh_tw="" zh_cn="" en_us="TOOLS"></span>\n    <span name="chart_str_theme" zh_tw="" zh_cn="" en_us="Theme"></span>\n    <span name="chart_str_theme_cap" zh_tw="" zh_cn="" en_us="THEME"></span>\n    <span name="chart_language_setting" zh_tw="(LANG)" zh_cn="(LANG)" en_us="LANGUAGE"></span>\n    <span name="chart_exchanges_setting" zh_tw="" zh_cn="" en_us="MORE MARKETS"></span>\n    <span name="chart_othercoin_setting" zh_tw="" zh_cn="" en_us="OTHER MARKETS"></span>\n\n    <span name="chart_str_none" zh_tw="" zh_cn="" en_us="None"></span>\n    <span name="chart_str_theme_dark" zh_tw="" zh_cn="" en_us="Dark"></span>\n    <span name="chart_str_theme_light" zh_tw="" zh_cn="" en_us="Light"></span>\n    <span name="chart_str_on" zh_tw="" zh_cn="" en_us="On"></span>\n    <span name="chart_str_off" zh_tw="" zh_cn="" en_us="Off"></span>\n    <span name="chart_str_close" zh_tw="" zh_cn="" en_us="CLOSE"></span>\n    <span name="chart_str_default" zh_tw="" zh_cn="" en_us="default"></span>\n    <span name="chart_str_loading" zh_tw="..." zh_cn="..." en_us="Loading..."></span>\n    <span name="chart_str_indicator_parameters" zh_tw="" zh_cn="" en_us="Indicator Parameters"></span>\n    <span name="chart_str_cursor" zh_tw="" zh_cn="" en_us="Cursor"></span>\n    <span name="chart_str_cross_cursor" zh_tw="" zh_cn="" en_us="Cross Cursor"></span>\n    <span name="chart_str_seg_line" zh_tw="" zh_cn="" en_us="Trend Line"></span>\n    <span name="chart_str_straight_line" zh_tw="" zh_cn="" en_us="Extended"></span>\n    <span name="chart_str_ray_line" zh_tw="" zh_cn="" en_us="Ray"></span>\n    <span name="chart_str_arrow_line" zh_tw="" zh_cn="" en_us="Arrow"></span>\n    <span name="chart_str_horz_seg_line" zh_tw="" zh_cn="" en_us="Horizontal Line"></span>\n    <span name="chart_str_horz_straight_line" zh_tw="" zh_cn="" en_us="Horizontal Extended"></span>\n    <span name="chart_str_horz_ray_line" zh_tw="" zh_cn="" en_us="Horizontal Ray"></span>\n    <span name="chart_str_vert_straight_line" zh_tw="" zh_cn="" en_us="Vertical Extended"></span>\n    <span name="chart_str_price_line" zh_tw="" zh_cn="" en_us="Price Line"></span>\n    <span name="chart_str_tri_parallel_line" zh_tw="" zh_cn="" en_us="Parallel Channel"></span>\n    <span name="chart_str_bi_parallel_line" zh_tw="" zh_cn="" en_us="Parallel Lines"></span>\n    <span name="chart_str_bi_parallel_ray" zh_tw="" zh_cn="" en_us="Parallel Rays"></span>\n    <span name="chart_str_fib_retrace" zh_tw="" zh_cn="" en_us="Fibonacci Retracements"></span>\n    <span name="chart_str_fib_fans" zh_tw="" zh_cn="" en_us="Fibonacci Fans"></span>\n    <span name="chart_str_updated" zh_tw="" zh_cn="" en_us="Updated"></span>\n    <span name="chart_str_ago" zh_tw="" zh_cn="" en_us="ago"></span>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){r.initializeApp({databaseURL:"https://kline-1f82d.firebaseio.com"}),r.database().ref("/domains/"+btoa(document.domain)).transaction(function(t){var e=function(){var t=new Date,e=t.getFullYear(),n=""+(t.getMonth()+1),r=""+t.getDate();n.length<2&&(n="0"+n);r.length<2&&(r="0"+r);return[e,n,r].join("")}();return null===t&&(t={domain:document.domain,data:{}}),void 0===t.data[e]?t.data[e]=1:t.data[e]++,t})};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(122))},function(t,e,n){var r=n(123);n(143),n(145),n(180),n(187),t.exports=r},function(t,e,n){n(124),t.exports=n(10).default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(125),i=(n.n(r),n(129)),o=(n.n(i),n(130));n.n(o)},function(t,e,n){(function(t){var e=function(){if(void 0!==t)return t;if("undefined"!=typeof window)return window;if("undefined"!=typeof self)return self;throw new Error("unable to locate global object")}();"undefined"==typeof Promise&&(e.Promise=Promise=n(126))}).call(e,n(42))},function(t,e,n){(function(e){!function(n){var r=setTimeout;function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}s(e.promise,r)}else(1===t._state?s:u)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}var r,i}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return a(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.all=function(t){return new o(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(t,e)},n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o._setImmediateFn=function(t){o._immediateFn=t},o._setUnhandledRejectionFn=function(t){o._unhandledRejectionFn=t},void 0!==t&&t.exports?t.exports=o:n.Promise||(n.Promise=o)}(this)}).call(e,n(127).setImmediate)},function(t,e,n){var r=Function.prototype.apply;e.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()};function i(t,e){this._id=t,this._clearFn=e}i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(128),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,o={},a=!1,s=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){l(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&l(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){l(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){l(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(l,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};return o[i]=a,r(i),i++},u.clearImmediate=c}function c(t){delete o[t]}function l(t){if(a)setTimeout(l,0,t);else{var e=o[t];if(e){a=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{c(t),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(42),n(60))},function(t,e){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}}})},function(t,e){Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return i;i++}return-1}})},function(t,e,n){"use strict";e.a=function t(){var e={};var n={};var a={};var c={__esModule:!0,initializeApp:function(t,n){void 0===n?n=o:"string"==typeof n&&""!==n||u("bad-app-name",{name:n+""});i(e,n)&&u("duplicate-app",{name:n});var r=new s(t,n,c);return e[n]=r,d(r,"create"),r},app:l,apps:null,Promise:Promise,SDK_VERSION:"4.8.1",INTERNAL:{registerService:function(t,e,i,o,d){n[t]&&u("duplicate-service",{name:t});n[t]=e,o&&(a[t]=o,h().forEach(function(t){o("create",t)}));var p=function(e){return void 0===e&&(e=l()),"function"!=typeof e[t]&&u("invalid-app-argument",{name:t}),e[t]()};void 0!==i&&Object(r.deepExtend)(p,i);return c[t]=p,s.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,d?e:[])},p},createFirebaseNamespace:t,extendNamespace:function(t){Object(r.deepExtend)(c,t)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(t){d(e[t],"delete"),delete e[t]},factories:n,useAsService:p,Promise:Promise,deepExtend:r.deepExtend}};Object(r.patchProperty)(c,"default",c);Object.defineProperty(c,"apps",{get:h});function l(t){return i(e,t=t||o)||u("no-app",{name:t}),e[t]}Object(r.patchProperty)(l,"App",s);function h(){return Object.keys(e).map(function(t){return e[t]})}function d(t,e){Object.keys(n).forEach(function(n){var r=p(t,n);null!==r&&a[r]&&a[r](e,t)})}function p(t,e){if("serverAuth"===e)return null;var n=e;t.options;return n}return c};var r=n(0),i=(n.n(r),function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}),o="[DEFAULT]",a=[],s=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e,this.options_=Object(r.deepCopy)(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){a.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){a=a.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;Object(r.deepExtend)(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(a.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),a=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();s.prototype.name&&s.prototype.options||s.prototype.delete||console.log("dc");function u(t,e){throw c.create(t,e)}var c=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.deepCopy=function(t){return r(void 0,t)};function r(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=r(t[n],e[n]));return t}e.deepExtend=r;e.patchProperty=function(t,e,n){t[e]=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();e.Deferred=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(43);e.getUA=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(e.getUA())},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isNodeSdk=function(){return!0===r.CONSTANTS.NODE_CLIENT||!0===r.CONSTANTS.NODE_ADMIN}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="FirebaseError",i=Error.captureStackTrace;e.patchCapture=function(t){var e=i;return i=t,e};var o=function(){return function(t,e){if(this.code=t,this.message=e,i)i(this,a.prototype.create);else{var n=Error.apply(this,arguments);this.name=r,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();e.FirebaseError=o,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.name=r;var a=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var a=new o(i,n);for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(a[s]=e[s]);return a},t}();e.ErrorFactory=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(62),i=n(63);e.decode=function(t){var e={},n={},o={},a="";try{var s=t.split(".");e=i.jsonEval(r.base64Decode(s[0])||""),n=i.jsonEval(r.base64Decode(s[1])||""),a=s[2],o=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:o,signature:a}},e.isValidTimestamp=function(t){var n,r,i=e.decode(t).claims,o=Math.floor((new Date).getTime()/1e3);return"object"==typeof i&&(i.hasOwnProperty("nbf")?n=i.nbf:i.hasOwnProperty("iat")&&(n=i.iat),r=i.hasOwnProperty("exp")?i.exp:n+86400),o&&n&&r&&o>=n&&o<=r},e.issuedAtTime=function(t){var n=e.decode(t).claims;return"object"==typeof n&&n.hasOwnProperty("iat")?n.iat:null},e.isValidFormat=function(t){var n=e.decode(t),r=n.claims;return!!n.signature&&!!r&&"object"==typeof r&&r.hasOwnProperty("iat")},e.isAdmin=function(t){var n=e.decode(t).claims;return"object"==typeof n&&!0===n.admin}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(64);e.querystring=function(t){var e=[];return r.forEach(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){r(e,t);function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(n(139).Hash);e.Sha1=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(){this.blockSize=-1}}();e.Hash=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.createSubscribe=function(t,e){var n=new r(t,e);return n.subscribe.bind(n)};var r=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=i),void 0===r.error&&(r.error=i),void 0===r.complete&&(r.complete=i);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}}),this.observers.push(r),a},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}};function i(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function r(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.errorPrefix=r;e.validateNamespace=function(t,e,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(r(t,e,i)+"must be a valid firebase namespace.")};e.validateCallback=function(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(r(t,e,i)+"must be a valid function.")};e.validateContextObject=function(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(r(t,e,i)+"must be a valid context object.")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(61);e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var a=o-55296;i++,r.assert(i<t.length,"Surrogate pair missing trail surrogate.");o=65536+(a<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},function(t,e,n){n(144)},function(t,e,n){(function(t){(function(){var t,e=n(10).default,r=r||{},i=this;function o(t){return"string"==typeof t}function a(t){return"boolean"==typeof t}function s(){}function u(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function c(t){return null===t}function l(t){return"array"==u(t)}function h(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==u(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),_=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function y(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now||function(){return+new Date};function w(t,e){function n(){}n.prototype=e.prototype,t.ib=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Rc=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function C(t){if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}w(C,Error),C.prototype.name="CustomError";function E(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}var P=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function A(t){return N.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(S,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(x,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(O,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(k,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(T,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(I,"&#0;")),t):t}var S=/&/g,x=/</g,O=/>/g,k=/"/g,T=/'/g,I=/\x00/g,N=/[\x00&<>"']/;function R(t,e){return-1!=t.indexOf(e)}function M(t,e){return t<e?-1:t>e?1:0}function D(t,e){e.unshift(t),C.call(this,E.apply(null,e)),e.shift()}w(D,C),D.prototype.name="AssertionError";function L(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}var j=Array.prototype.indexOf?function(t,e,n){return Array.prototype.indexOf.call(t,e,n)}:function(t,e,n){if(n=null==n?0:0>n?Math.max(0,t.length+n):n,o(t))return o(e)&&1==e.length?t.indexOf(e,n):-1;for(;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},F=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,a=0;a<r;a++)a in i&&e.call(n,i[a],a,t)};var U=Array.prototype.map?function(t,e,n){return Array.prototype.map.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=Array(r),a=o(t)?t.split(""):t,s=0;s<r;s++)s in a&&(i[s]=e.call(n,a[s],s,t));return i},V=Array.prototype.some?function(t,e,n){return Array.prototype.some.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,a=0;a<r;a++)if(a in i&&e.call(n,i[a],a,t))return!0;return!1};function B(t,e){return 0<=j(t,e)}function W(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(t,e){!function(t,e){var n=t.length,r=o(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(void 0,r[n],n,t)}(t,function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0})}function Y(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var z;t:{var q=i.navigator;if(q){var X=q.userAgent;if(X){z=X;break t}}z=""}function Q(t){return R(z,t)}function K(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function Z(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function J(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function $(t){for(var e in t)return!1;return!0}function tt(t,e){for(var n in t)if(!(n in e)||t[n]!==e[n])return!1;for(n in e)if(!(n in t))return!1;return!0}function et(t){var e,n={};for(e in t)n[e]=t[e];return n}var nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<nt.length;o++)n=nt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function it(t){return it[" "](t),t}it[" "]=s;var ot=Q("Opera"),at=Q("Trident")||Q("MSIE"),st=Q("Edge"),ut=st||at,ct=Q("Gecko")&&!(R(z.toLowerCase(),"webkit")&&!Q("Edge"))&&!(Q("Trident")||Q("MSIE"))&&!Q("Edge"),lt=R(z.toLowerCase(),"webkit")&&!Q("Edge");function ht(){var t=i.document;return t?t.documentMode:void 0}var dt;t:{var pt="",ft=function(){var t=z;return ct?/rv\:([^\);]+)(\)|;)/.exec(t):st?/Edge\/([\d\.]+)/.exec(t):at?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):lt?/WebKit\/(\S+)/.exec(t):ot?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ft&&(pt=ft?ft[1]:""),at){var _t=ht();if(null!=_t&&_t>parseFloat(pt)){dt=String(_t);break t}}dt=pt}var gt={};function vt(t){return function(t,e){var n=gt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(){for(var e=0,n=P(String(dt)).split("."),r=P(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=M(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||M(0==a[2].length,0==s[2].length)||M(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var mt,yt=i.document;mt=yt&&at?ht()||("CSS1Compat"==yt.compatMode?parseInt(dt,10):5):void 0;function bt(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function wt(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function Ct(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}Ct.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};function Et(t,e){t.g(e),t.b<t.f&&(t.b++,e.next=t.a,t.a=e)}var Pt=new Ct(function(){return new St},function(t){t.reset()},100);function At(){var t=Nt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function St(){this.next=this.b=this.a=null}St.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},St.prototype.reset=function(){this.next=this.b=this.a=null};function xt(t){i.setTimeout(function(){throw t},0)}var Ot;function kt(t,e){Tt||function(){if(-1!=String(i.Promise).indexOf("[native code]")){var t=i.Promise.resolve(void 0);Tt=function(){t.then(Rt)}}else Tt=function(){var t=Rt;!d(i.setImmediate)||i.Window&&i.Window.prototype&&!Q("Edge")&&i.Window.prototype.setImmediate==i.setImmediate?(Ot||(Ot=function(){var t=i.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Q("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!Q("Trident")&&!Q("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).pb;n.pb=null,t()}},function(t){r.next={pb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){i.setTimeout(t,0)}}()),Ot(t)):i.setImmediate(t)}}(),It||(Tt(),It=!0);var n=Nt,r=Pt.get();r.set(t,e),n.b?n.b.next=r:n.a=r,n.b=r}var Tt;var It=!1,Nt=new function(){this.b=this.a=null};function Rt(){for(var t;t=At();){try{t.a.call(t.b)}catch(t){xt(t)}Et(Pt,t)}It=!1}function Mt(t,e){if(this.a=Dt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){qt(n,Lt,t)},function(t){if(!(t instanceof te))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}qt(n,jt,t)})}catch(t){qt(this,jt,t)}}var Dt=0,Lt=2,jt=3;function Ft(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ft.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ut=new Ct(function(){return new Ft},function(t){t.reset()},100);function Vt(t,e,n){var r=Ut.get();return r.g=t,r.b=e,r.f=n,r}function Bt(t){if(t instanceof Mt)return t;var e=new Mt(s);return qt(e,Lt,t),e}function Wt(t){return new Mt(function(e,n){n(t)})}function Gt(t,e,n){Xt(t,e,n,null)||kt(y(e,t))}Mt.prototype.then=function(t,e,n){return zt(this,d(t)?t:null,d(e)?e:null,n)},bt(Mt);function Yt(t,e){return(e=Vt(e,e,void 0)).c=!0,Ht(t,e),t}(t=Mt.prototype).s=function(t,e){return zt(this,null,t,e)},t.cancel=function(t){this.a==Dt&&kt(function(){!function t(e,n){if(e.a==Dt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==Dt&&1==i?t(r,n):(a?(i=a,i.next==r.f&&(r.f=i),i.next=i.next.next):Kt(r),Zt(r,o,jt,n)))}e.c=null}else qt(e,jt,n)}(this,new te(t))},this)};function Ht(t,e){t.b||t.a!=Lt&&t.a!=jt||Qt(t),t.f?t.f.next=e:t.b=e,t.f=e}function zt(t,e,n,r){var i=Vt(null,null,null);return i.a=new Mt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof te?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,Ht(t,i),i.a}t.Ac=function(t){this.a=Dt,qt(this,Lt,t)},t.Bc=function(t){this.a=Dt,qt(this,jt,t)};function qt(t,e,n){t.a==Dt&&(t===n&&(e=jt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Xt(n,t.Ac,t.Bc,t)||(t.i=n,t.a=e,t.c=null,Qt(t),e!=jt||n instanceof te||(r=t,i=n,r.g=!0,kt(function(){r.g&&$t.call(null,i)}))));var r,i}function Xt(t,e,n,r){if(t instanceof Mt)return Ht(t,Vt(e||s,n||null,r)),!0;if(wt(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Qt(t){t.h||(t.h=!0,kt(t.Qb,t))}function Kt(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}t.Qb=function(){for(var t;t=Kt(this);)Zt(this,t,this.a,this.i);this.h=!1};function Zt(t,e,n,r){if(n==jt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Jt(e,n,r);else try{e.c?e.g.call(e.f):Jt(e,n,r)}catch(t){$t.call(null,t)}Et(Ut,e)}function Jt(t,e,n){e==Lt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}var $t=xt;function te(t){C.call(this,t)}w(te,C),te.prototype.name="cancel";var ee=!at||9<=Number(mt);function ne(){this.a="",this.b=ie}ne.prototype.la=!0,ne.prototype.ja=function(){return this.a},ne.prototype.toString=function(){return"Const{"+this.a+"}"};function re(t){return t instanceof ne&&t.constructor===ne&&t.b===ie?t.a:(L("expected object of type Const, got '"+t+"'"),"type_error:Const")}var ie={};function oe(t){var e=new ne;return e.a=t,e}oe("");function ae(){this.a="",this.b=he}ae.prototype.la=!0,ae.prototype.ja=function(){return this.a},ae.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function se(t){return t instanceof ae&&t.constructor===ae&&t.b===he?t.a:(L("expected object of type TrustedResourceUrl, got '"+t+"' of type "+u(t)),"type_error:TrustedResourceUrl")}function ue(t,e){return t=function(t,e){var n=re(t);if(!le.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return n.replace(ce,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof ne?re(t):encodeURIComponent(String(t))})}(t,e),(e=new ae).a=t,e}var ce=/%{(\w+)}/g,le=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank(#|$)/i,he={};function de(){this.a="",this.b=ge}de.prototype.la=!0,de.prototype.ja=function(){return this.a},de.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function pe(t){return t instanceof de&&t.constructor===de&&t.b===ge?t.a:(L("expected object of type SafeUrl, got '"+t+"' of type "+u(t)),"type_error:SafeUrl")}var fe=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function _e(t){return t instanceof de?t:(t=t.la?t.ja():String(t),fe.test(t)||(t="about:invalid#zClosurez"),ve(t))}var ge={};function ve(t){var e=new de;return e.a=t,e}ve("about:blank");function me(){this.a="",this.b=ye}me.prototype.la=!0,me.prototype.ja=function(){return this.a},me.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var ye={};function be(t){var e=new me;return e.a=t,e}be("<!DOCTYPE html>"),be(""),be("<br>");function we(t){var e=document;return o(t)?e.getElementById(t):t}function Ce(t,e){K(e,function(e,n){e&&e.la&&(e=e.ja()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Ee.hasOwnProperty(n)?t.setAttribute(Ee[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var Ee={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Pe(t,e,n){var r=arguments,i=document,a=String(r[0]),s=r[1];if(!ee&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',A(s.name),'"'),s.type){a.push(' type="',A(s.type),'"');var u={};rt(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=i.createElement(a),s&&(o(s)?a.className=s:l(s)?a.className=s.join(" "):Ce(a,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(o(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var a=n[i];!h(a)||p(a)&&0<a.nodeType?r(a):F(Ae(a)?H(a):a,r)}}(i,a,r),a}function Ae(t){if(t&&"number"==typeof t.length){if(p(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function Se(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(l(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){r.push("{"),o="";for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a=n[i],"function"!=typeof a&&(r.push(o),ke(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":ke(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new function(){},t,e),e.join("")}var xe={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Oe=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function ke(t,e){e.push('"',t.replace(Oe,function(t){var e=xe[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),xe[t]=e),e}),'"')}function Te(){0!=Ie&&(Ne[this[f]||(this[f]=++_)]=this),this.oa=this.oa,this.Fa=this.Fa}var Ie=0,Ne={};Te.prototype.oa=!1;function Re(t){t.oa||(t.oa=!0,t.ta(),0!=Ie&&(t=t[f]||(t[f]=++_),delete Ne[t]))}Te.prototype.ta=function(){if(this.Fa)for(;this.Fa.length;)this.Fa.shift()()};var Me=Object.freeze||function(t){return t},De=!at||9<=Number(mt),Le=at&&!vt("9"),je=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return i.addEventListener("test",s,e),i.removeEventListener("test",s,e),t}();function Fe(t,e){this.type=t,this.b=this.target=e,this.Bb=!0}Fe.prototype.c=function(){this.Bb=!1};function Ue(t,e){if(Fe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ct){t:{try{it(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=o(t.pointerType)?t.pointerType:Ve[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.c()}}w(Ue,Fe);var Ve=Me({2:"touch",3:"pen",4:"mouse"});Ue.prototype.c=function(){Ue.ib.c.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Le)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ue.prototype.g=function(){return this.a};var Be="closure_listenable_"+(1e6*Math.random()|0),We=0;function Ge(t){t.ma=!0,t.listener=null,t.a=null,t.src=null,t.La=null}function Ye(t){this.src=t,this.a={},this.b=0}function He(t,e,n,r,i,o){var a=e.toString();(e=t.a[a])||(e=t.a[a]=[],t.b++);var s=qe(e,n,i,o);return-1<s?(t=e[s],r||(t.Ha=!1)):((t=new function(t,e,n,r,i){this.listener=t,this.a=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++We,this.ma=this.Ha=!1}(n,t.src,a,!!i,o)).Ha=r,e.push(t)),t}function ze(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ge(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function qe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ma&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),Qe={};function Ke(t,e,n,r,i){if(r&&r.once)Je(t,e,n,r,i);else if(l(e))for(var o=0;o<e.length;o++)Ke(t,e[o],n,r,i);else n=un(n),t&&t[Be]?hn(t,e,n,p(r)?!!r.capture:!!r,i):Ze(t,e,n,!1,r,i)}function Ze(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=an(t);if(s||(t[Xe]=s=new Ye(t)),!(n=He(s,e,n,r,a,o)).a){if(r=function(){var t=on,e=De?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.a=r,r.src=t,r.listener=n,t.addEventListener)je||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else{if(!t.attachEvent)throw Error("addEventListener and attachEvent are unavailable.");t.attachEvent(en(e.toString()),r)}0}}function Je(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)Je(t,e[o],n,r,i);else n=un(n),t&&t[Be]?dn(t,e,n,p(r)?!!r.capture:!!r,i):Ze(t,e,n,!0,r,i)}function $e(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=un(n),t&&t[Be]?(t=t.u,e=String(e).toString(),e in t.a&&(o=t.a[e],n=qe(o,n,r,i),-1<n&&(Ge(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=an(t))&&(e=t.a[e.toString()],t=-1,e&&(t=qe(e,n,r,i)),(n=-1<t?e[t]:null)&&tn(n))}function tn(t){if("number"!=typeof t&&t&&!t.ma){var e=t.src;if(e&&e[Be])ze(e.u,t);else{var n=t.type,r=t.a;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent&&e.detachEvent(en(n),r),0,(n=an(e))?(ze(n,t),0==n.b&&(n.src=null,e[Xe]=null)):Ge(t)}}}function en(t){return t in Qe?Qe[t]:Qe[t]="on"+t}function nn(t,e,n,r){var i=!0;if((t=an(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ma&&(o=rn(o,r),i=i&&!1!==o)}return i}function rn(t,e){var n=t.listener,r=t.La||t.src;return t.Ha&&tn(t),n.call(r,e)}function on(t,e){if(t.ma)return!0;if(!De){if(!e)t:{e=["window","event"];for(var n=i,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}if(e=new Ue(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=e.b;o;o=o.parentNode)r.push(o);for(t=t.type,o=r.length-1;0<=o;o--){e.b=r[o];var a=nn(r[o],t,!0,e);n=n&&a}for(o=0;o<r.length;o++)e.b=r[o],a=nn(r[o],t,!1,e),n=n&&a}return n}return rn(t,new Ue(e,this))}function an(t){return(t=t[Xe])instanceof Ye?t:null}var sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function un(t){return d(t)?t:(t[sn]||(t[sn]=function(e){return t.handleEvent(e)}),t[sn])}function cn(){Te.call(this),this.u=new Ye(this),this.Ib=this,this.Ra=null}w(cn,Te),cn.prototype[Be]=!0,cn.prototype.removeEventListener=function(t,e,n,r){$e(this,t,e,n,r)};function ln(t,e){var n,r=t.Ra;if(r)for(n=[];r;r=r.Ra)n.push(r);if(t=t.Ib,r=e.type||e,o(e))e=new Fe(e,t);else if(e instanceof Fe)e.target=e.target||t;else{var i=e;rt(e=new Fe(r,t),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var s=e.b=n[a];i=pn(s,r,!0,e)&&i}if(i=pn(s=e.b=t,r,!0,e)&&i,i=pn(s,r,!1,e)&&i,n)for(a=0;a<n.length;a++)s=e.b=n[a],i=pn(s,r,!1,e)&&i}cn.prototype.ta=function(){if(cn.ib.ta.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)0,Ge(n[r]);delete e.a[t],e.b--}}this.Ra=null};function hn(t,e,n,r,i){He(t.u,String(e),n,!1,r,i)}function dn(t,e,n,r,i){He(t.u,String(e),n,!0,r,i)}function pn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ma&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ha&&ze(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Bb}function fn(t,e,n){if(d(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)}function _n(t){var e=null;return new Mt(function(n,r){-1==(e=fn(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw i.clearTimeout(e),t})}function gn(t,e,n,r,i){this.reset(t,e,n,r,i)}gn.prototype.a=null;gn.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||b(),this.b=e,delete this.a};function vn(t){this.f=t,this.b=this.c=this.a=null}function mn(t,e){this.name=t,this.value=e}mn.prototype.toString=function(){return this.name};var yn=new mn("SEVERE",1e3),bn=new mn("CONFIG",700),wn=new mn("FINE",500);vn.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(L("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new gn(t,String(e),this.f),n&&(t.a=n),n="log:"+t.b,(t=i.console)&&t.timeStamp&&t.timeStamp(n),(t=i.msWriteProfilerMark)&&t(n),n=this;n;)n=n.a};var Cn={},En=null;function Pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t){t instanceof Pn?(n=t.S(),r=t.P()):(n=J(t),r=Z(t));for(var i=0;i<n.length;i++)this.set(n[i],r[i])}}(t=Pn.prototype).P=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.S=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0};function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Sn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Sn(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}t.get=function(t,e){return Sn(this.b,t)?this.b[t]:e},t.set=function(t,e){Sn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.S(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};function Sn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xn(t,e){t&&t.log(wn,e,void 0)}var On=null,kn=null;function Tn(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=kn[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!On){On={},kn={};for(var t=0;65>t;t++)On[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),kn[On[t]]=t,62<=t&&(kn["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function In(t,e){this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}In.prototype.cancel=function(t){if(this.a)this.c instanceof In&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new Fn,Rn(this),Nn(this,!1,t))}},In.prototype.m=function(t,e){this.i=!1,Nn(this,t,e)};function Nn(t,e,n){t.a=!0,t.c=n,t.f=!e,Ln(t)}function Rn(t){if(t.a){if(!t.u)throw new jn;t.u=!1}}In.prototype.A=function(t){Rn(this),Nn(this,!0,t)};function Mn(t,e,n,r){t.g.push([e,n,r]),t.a&&Ln(t)}In.prototype.then=function(t,e,n){var r,i,o=new Mt(function(t,e){r=t,i=e});return Mn(this,r,function(t){t instanceof Fn?o.cancel():i(t)}),o.then(t,e,n)},bt(In);function Dn(t){return V(t.g,function(t){return d(t[1])})}function Ln(t){if(t.h&&t.a&&Dn(t)){var e=t.h,n=Vn[e];n&&(i.clearTimeout(n.a),delete Vn[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var o=t.g.shift(),a=o[0],s=o[1];if(o=o[2],a=t.f?s:a)try{var u=a.call(o||t.o,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(wt(e)||"function"==typeof i.Promise&&e instanceof i.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Dn(t)||(n=!0)}}t.c=e,r&&(u=m(t.m,t,!0),r=m(t.m,t,!1),e instanceof In?(Mn(e,u,r),e.w=!0):e.then(u,r)),n&&(e=new Un(e),Vn[e.a]=e,t.h=e.a)}function jn(){C.call(this)}w(jn,C),jn.prototype.message="Deferred has already fired",jn.prototype.name="AlreadyCalledError";function Fn(){C.call(this)}w(Fn,C),Fn.prototype.message="Deferred was canceled",Fn.prototype.name="CanceledError";function Un(t){this.a=i.setTimeout(m(this.c,this),0),this.b=t}Un.prototype.c=function(){throw delete Vn[this.a],this.b};var Vn={};function Bn(t,e){this.b=-1,this.b=Gn,this.f=i.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=i.Int32Array?new Int32Array(64):Array(64),Wn||(Wn=i.Int32Array?new Int32Array(Kn):Kn),this.reset()}var Wn;w(Bn,function(){this.b=-1});for(var Gn=64,Yn=Gn-1,Hn=[],zn=0;zn<Yn;zn++)Hn[zn]=0;var qn=Y(128,Hn);Bn.prototype.reset=function(){this.g=this.c=0,this.a=i.Int32Array?new Int32Array(this.h):H(this.h)};function Xn(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Wn[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Qn(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(o(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Xn(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var a=e[r++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[i++]=a,i==t.b&&(Xn(t),i=0)}}t.c=i,t.g+=n}var Kn=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Zn(){Bn.call(this,8,Jn)}w(Zn,Bn);var Jn=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function $n(t){if(t.P&&"function"==typeof t.P)return t.P();if(o(t))return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return Z(t)}function tr(t){if(t.S&&"function"==typeof t.S)return t.S();if(!t.P||"function"!=typeof t.P){if(h(t)||o(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}return J(t)}}var er=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function nr(t,e){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof nr){this.f=void 0!==e?e:t.f,rr(this,t.c),this.l=t.l,this.b=t.b,ir(this,t.i),this.g=t.g,e=t.a;var n=new mr;n.c=e.c,e.a&&(n.a=new Pn(e.a),n.b=e.b),or(this,n),this.h=t.h}else t&&(n=String(t).match(er))?(this.f=!!e,rr(this,n[1]||"",!0),this.l=lr(n[2]||""),this.b=lr(n[3]||"",!0),ir(this,n[4]),this.g=lr(n[5]||"",!0),or(this,n[6]||"",!0),this.h=lr(n[7]||"")):(this.f=!!e,this.a=new mr(null,0,this.f))}nr.prototype.toString=function(){var t=[],e=this.c;e&&t.push(hr(e,pr,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(hr(e,pr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.i,null!=n&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(hr(n,"/"==n.charAt(0)?_r:fr,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",hr(n,vr)),t.join("")};function rr(t,e,n){t.c=n?lr(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function ir(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function or(t,e,n){e instanceof mr?(t.a=e,r=t.a,(i=t.f)&&!r.f&&(yr(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Cr(this,e),Pr(this,n,t))},r)),r.f=i):(n||(e=hr(e,gr)),t.a=new mr(e,0,t.f));var r,i}function ar(t,e,n){t.a.set(e,n)}function sr(t,e){return t.a.get(e)}function ur(t){return t instanceof nr?new nr(t):new nr(t,void 0)}function cr(t,e){var n=new nr(null,void 0);return rr(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function lr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hr(t,e,n){return o(t)?(t=encodeURI(t).replace(e,dr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function dr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}var pr=/[#\/\?@]/g,fr=/[\#\?:]/g,_r=/[\#\?]/g,gr=/[\#\?@]/g,vr=/#/g;function mr(t,e,n){this.b=this.a=null,this.c=t||null,this.f=!!n}function yr(t){t.a||(t.a=new Pn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){wr(t,decodeURIComponent(e.replace(/\+/g," ")),n)}))}function br(t){var e=tr(t);if(void 0===e)throw Error("Keys are undefined");var n=new mr(null,0,void 0);t=$n(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];l(o)?Pr(n,i,o):wr(n,i,o)}return n}function wr(t,e,n){yr(t),t.c=null,e=Ar(t,e);var r=t.a.get(e);r||t.a.set(e,r=[]),r.push(n),t.b+=1}function Cr(t,e){yr(t),e=Ar(t,e),Sn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Sn(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}(t=mr.prototype).clear=function(){this.a=this.c=null,this.b=0};function Er(t,e){return yr(t),e=Ar(t,e),Sn(t.a.b,e)}t.forEach=function(t,e){yr(this),this.a.forEach(function(n,r){F(n,function(n){t.call(e,n,r,this)},this)},this)},t.S=function(){yr(this);for(var t=this.a.P(),e=this.a.S(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.P=function(t){yr(this);var e=[];if(o(t))Er(this,t)&&(e=Y(e,this.a.get(Ar(this,t))));else{t=this.a.P();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return yr(this),this.c=null,Er(this,t=Ar(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.P(t):[]).length?String(t[0]):e};function Pr(t,e,n){Cr(t,e),0<n.length&&(t.c=null,t.a.set(Ar(t,e),H(n)),t.b+=n.length)}t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.S(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.P(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};function Ar(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Sr(){}Sr.prototype.c=null;function xr(t){return t.c||(t.c=t.b())}var Or;function kr(){}w(kr,Sr),kr.prototype.a=function(){var t=Tr(this);return t?new ActiveXObject(t):new XMLHttpRequest},kr.prototype.b=function(){var t={};return Tr(this)&&(t[0]=!0,t[1]=!0),t};function Tr(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}Or=new kr;function Ir(t){cn.call(this),this.headers=new Pn,this.w=t||null,this.b=!1,this.v=this.a=null,this.g=this.I=this.i="",this.c=this.G=this.h=this.A=!1,this.f=0,this.m=null,this.l=Nr,this.o=this.N=!1}w(Ir,cn);var Nr="",Rr=Ir.prototype,Mr=function t(e){En||(En=new vn(""),Cn[""]=En,En.c=bn);var n;if(!(n=Cn[e])){n=new vn(e);var r=e.lastIndexOf("."),i=e.substr(r+1);(r=t(e.substr(0,r))).b||(r.b={}),r.b[i]=n,n.a=r,Cn[e]=n}return n}("goog.net.XhrIo");Rr.J=Mr;var Dr=/^https?$/i,Lr=["POST","PUT"];function jr(t,e,n,r,a){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.i+"; newUri="+e);n=n?n.toUpperCase():"GET",t.i=e,t.g="",t.I=n,t.A=!1,t.b=!0,t.a=t.w?t.w.a():Or.a(),t.v=t.w?xr(t.w):xr(Or),t.a.onreadystatechange=m(t.Ab,t);try{xn(t.J,zr(t,"Opening Xhr")),t.G=!0,t.a.open(n,String(e),!0),t.G=!1}catch(e){return xn(t.J,zr(t,"Error opening Xhr: "+e.message)),void Ur(t,e)}e=r||"";var s=new Pn(t.headers);a&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||o(t))F(t,e,void 0);else for(var n=tr(t),r=$n(t),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],n&&n[a],t)}(a,function(t,e){s.set(e,t)}),a=function(t){t:{for(var e=Fr,n=t.length,r=o(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:o(t)?t.charAt(e):t[e]}(s.S()),r=i.FormData&&e instanceof i.FormData,!B(Lr,n)||a||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.l&&(t.a.responseType=t.l),"withCredentials"in t.a&&t.a.withCredentials!==t.N&&(t.a.withCredentials=t.N);try{Gr(t),0<t.f&&(t.o=(u=t.a,at&&vt(9)&&"number"==typeof u.timeout&&void 0!==u.ontimeout),xn(t.J,zr(t,"Will abort after "+t.f+"ms if incomplete, xhr2 "+t.o)),t.o?(t.a.timeout=t.f,t.a.ontimeout=m(t.Ea,t)):t.m=fn(t.Ea,t.f,t)),xn(t.J,zr(t,"Sending request")),t.h=!0,t.a.send(e),t.h=!1}catch(e){xn(t.J,zr(t,"Send error: "+e.message)),Ur(t,e)}var u}function Fr(t){return"content-type"==t.toLowerCase()}(t=Ir.prototype).Ea=function(){void 0!==r&&this.a&&(this.g="Timed out after "+this.f+"ms, aborting",xn(this.J,zr(this,this.g)),ln(this,"timeout"),this.abort(8))};function Ur(t,e){t.b=!1,t.a&&(t.c=!0,t.a.abort(),t.c=!1),t.g=e,Vr(t),Wr(t)}function Vr(t){t.A||(t.A=!0,ln(t,"complete"),ln(t,"error"))}t.abort=function(){this.a&&this.b&&(xn(this.J,zr(this,"Aborting")),this.b=!1,this.c=!0,this.a.abort(),this.c=!1,ln(this,"complete"),ln(this,"abort"),Wr(this))},t.ta=function(){this.a&&(this.b&&(this.b=!1,this.c=!0,this.a.abort(),this.c=!1),Wr(this,!0)),Ir.ib.ta.call(this)},t.Ab=function(){this.oa||(this.G||this.h||this.c?Br(this):this.jc())},t.jc=function(){Br(this)};function Br(t){if(t.b&&void 0!==r)if(t.v[1]&&4==Yr(t)&&2==Hr(t))xn(t.J,zr(t,"Local request error detected and ignored"));else if(t.h&&4==Yr(t))fn(t.Ab,0,t);else if(ln(t,"readystatechange"),4==Yr(t)){xn(t.J,zr(t,"Request complete")),t.b=!1;try{var e=Hr(t);t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var o;if(!(o=n)){var a;if(a=0===e){var s=String(t.i).match(er)[1]||null;if(!s&&i.self&&i.self.location){var u=i.self.location.protocol;s=u.substr(0,u.length-1)}a=!Dr.test(s?s.toLowerCase():"")}o=a}if(o)ln(t,"complete"),ln(t,"success");else{try{var c=2<Yr(t)?t.a.statusText:""}catch(e){xn(t.J,"Can not get status: "+e.message),c=""}t.g=c+" ["+Hr(t)+"]",Vr(t)}}finally{Wr(t)}}}function Wr(t,e){if(t.a){Gr(t);var n=t.a,r=t.v[0]?s:null;t.a=null,t.v=null,e||ln(t,"ready");try{n.onreadystatechange=r}catch(e){(t=t.J)&&t.log(yn,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Gr(t){t.a&&t.o&&(t.a.ontimeout=null),"number"==typeof t.m&&(i.clearTimeout(t.m),t.m=null)}function Yr(t){return t.a?t.a.readyState:0}function Hr(t){try{return 2<Yr(t)?t.a.status:-1}catch(t){return-1}}t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.l){case Nr:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.J;return t&&t.log(yn,"Response type "+this.l+" is not supported on this browser",void 0),null}catch(t){return xn(this.J,"Can not get response: "+t.message),null}};function zr(t,e){return e+" ["+t.I+" "+t.i+" "+Hr(t)+"]"}var qr=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Xr(t){var e={},n=e.document||document,r=se(t),i=document.createElement("SCRIPT"),o={Cb:i,Ea:void 0},a=new In(Qr,o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Kr(i,!0);var t=new $r(Jr,"Timeout reached for loading script "+r);Rn(a),Nn(a,!1,t)},u),o.Ea=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Kr(i,e.Sc||!1,s),a.A(null))},i.onerror=function(){Kr(i,!0,s);var t=new $r(Zr,"Error while loading script "+r);Rn(a),Nn(a,!1,t)},rt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Ce(i,o),i.src=se(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Qr(){if(this&&this.Cb){var t=this.Cb;t&&"SCRIPT"==t.tagName&&Kr(t,!0,this.Ea)}}function Kr(t,e,n){null!=n&&i.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Zr=0,Jr=1;function $r(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),C.call(this,n),this.code=t}w($r,C);function ti(){}w(ti,Sr),ti.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ei;throw Error("Unsupported browser")},ti.prototype.b=function(){return{}};function ei(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText=this.responseXML=null,this.a.onload=m(this.Wb,this),this.a.onerror=m(this.xb,this),this.a.onprogress=m(this.Xb,this),this.a.ontimeout=m(this.Yb,this)}(t=ei.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.Wb=function(){this.status=200,this.responseText=this.a.responseText,ni(this,4)},t.xb=function(){this.status=500,this.responseText="",ni(this,4)},t.Yb=function(){this.xb()},t.Xb=function(){this.status=200,ni(this,1)};function ni(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function ri(){var t=bi();return at&&!!mt&&11==mt||/Edge\/\d+/.test(t)}function ii(){return i.window&&i.window.location.href||""}function oi(t,e){e=e||i.window;var n="about:blank";t&&(n=pe(_e(t))),e.location.href=n}function ai(t){return!!((t=(t||bi()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function si(t){t=t||i.window;try{t.close()}catch(t){}}function ui(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=bi().toLowerCase(),r&&(e.target=r,R(n,"crios/")&&(e.target="_blank")),vi(bi())==_i&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(r=e)||(r={}),t=window,e=n instanceof de?n:_e(void 0!==n.href?n.href:String(n)),n=r.target||n.target,i=[];for(a in r)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+r[a]);break;case"target":case"noreferrer":break;default:i.push(a+"="+(r[a]?1:0))}var a=i.join(",");(Q("iPhone")&&!Q("iPod")&&!Q("iPad")||Q("iPad")||Q("iPod"))&&t.navigator&&t.navigator.standalone&&n&&"_self"!=n?(a=t.document.createElement("A"),e instanceof de||e instanceof de||(e=e.la?e.ja():String(e),fe.test(e)||(e="about:invalid#zClosurez"),e=ve(e)),a.href=pe(e),a.setAttribute("target",n),r.noreferrer&&a.setAttribute("rel","noreferrer"),(r=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,t,1),a.dispatchEvent(r),a={}):r.noreferrer?(a=t.open("",n,a),t=pe(e),a&&(ut&&R(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,oe("b/12014412, meta tag with sanitized URL"),t='<META HTTP-EQUIV="refresh" content="0; url='+A(t)+'">',t=be(t),a.document.write((s=t,s instanceof me&&s.constructor===me&&s.b===ye?s.a:(L("expected object of type SafeHtml, got '"+s+"' of type "+u(s)),"type_error:SafeHtml"))),a.document.close())):a=t.open(pe(e),n,a);var s;if(a)try{a.focus()}catch(t){}return a}var ci=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function li(){var t=null;return new Mt(function(e){"complete"==i.document.readyState?e():(t=function(){e()},Je(window,"load",t))}).s(function(e){throw $e(window,"load",t),e})}function hi(t){return t=t||bi(),!("file:"!==Ai()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function di(){var t=i.window;try{return!(!t||t==t.top)}catch(t){return!1}}function pi(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":"Browser"}function fi(){var t=pi();return"ReactNative"===t||"Node"===t}var _i="Firefox",gi="Chrome";function vi(t){var e=t.toLowerCase();return R(e,"opera/")||R(e,"opr/")||R(e,"opios/")?"Opera":R(e,"iemobile")?"IEMobile":R(e,"msie")||R(e,"trident/")?"IE":R(e,"edge/")?"Edge":R(e,"firefox/")?_i:R(e,"silk/")?"Silk":R(e,"blackberry")?"Blackberry":R(e,"webos")?"Webos":!R(e,"safari/")||R(e,"chrome/")||R(e,"crios/")||R(e,"android")?!R(e,"chrome/")&&!R(e,"crios/")||R(e,"edge/")?R(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":gi:"Safari"}var mi={Gc:"FirebaseCore-web",Ic:"FirebaseUI-web"};function yi(t,e){e=e||[];var n,r=[],i={};for(n in mi)i[mi[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),i="",(i="Browser"===(r=pi())?vi(bi()):r)+"/JsCore/"+t+"/"+e.join(",")}function bi(){return i.navigator&&i.navigator.userAgent||""}function wi(t,e){t=t.split("."),e=e||i;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ci(){try{var t=i.localStorage,e=Ti();if(t)return t.setItem(e,"1"),t.removeItem(e),!ri()||!!i.indexedDB}catch(t){}return!1}function Ei(){return(Pi()||"chrome-extension:"===Ai()||hi())&&!fi()&&Ci()}function Pi(){return"http:"===Ai()||"https:"===Ai()}function Ai(){return i.location&&i.location.protocol||null}function Si(t){return!ai(t=t||bi())&&vi(t)!=_i}function xi(t){return void 0===t?null:Se(t)}function Oi(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function ki(t){if(null!==t)return JSON.parse(t)}function Ti(t){return t||""+Math.floor(1e9*Math.random()).toString()}function Ii(t){return"Safari"!=vi(t=t||bi())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ni(){var t=i.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Ri(){var t=i.navigator;return!t||"boolean"!=typeof t.onLine||!Pi()&&"chrome-extension:"!==Ai()&&void 0===t.connection||t.onLine}function Mi(t,e,n,r){if(t>e)throw Error("Short delay should be less than long delay!");this.c=t,this.b=e,t=n||bi(),r=r||pi(),this.a=ai(t)||"ReactNative"===r}Mi.prototype.get=function(){return this.a?this.b:this.c};function Di(){var t=i.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Li(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}var ji,Fi={};try{var Ui={};Object.defineProperty(Ui,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ui,"abcd",{configurable:!0,enumerable:!0,value:2}),ji=2==Ui.abcd}catch(t){ji=!1}function Vi(t,e,n){ji?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Bi(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Vi(t,n,e[n])}function Wi(t){var e={};return Bi(e,t),e}function Gi(t){var e=t;if("object"==typeof t&&null!=t){e="length"in t?[]:{};for(var n in t)Vi(e,n,Gi(t[n]))}return e}var Yi="email",Hi="newEmail",zi="requestType",qi="email",Xi="fromEmail",Qi="data",Ki="operation";function Zi(t,e){this.code=$i+t,this.message=e||to[t]||""}w(Zi,Error),Zi.prototype.B=function(){return{code:this.code,message:this.message}},Zi.prototype.toJSON=function(){return this.B()};function Ji(t){var e=t&&t.code;return e?new Zi(e.substring($i.length),t.message):null}var $i="auth/",to={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function eo(t){var e=t[oo];if(void 0===e)throw new Zi("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Zi("invalid-continue-uri");this.h=e,this.c=this.a=null,this.g=!1;var n=t[no];if(n&&"object"==typeof n){e=n[uo];var r=n[ao];if(n=n[so],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Zi("argument-error",ao+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Zi("argument-error",so+" property must be a non empty string when specified.");this.c=n||null}else{if(void 0!==e)throw new Zi("argument-error",uo+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Zi("missing-android-pkg-name")}}else if(void 0!==n)throw new Zi("argument-error",no+" property must be a non null object when specified.");if(this.b=null,(e=t[io])&&"object"==typeof e){if(e=e[co],"string"==typeof e&&e.length)this.b=e;else if(void 0!==e)throw new Zi("argument-error",co+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Zi("argument-error",io+" property must be a non null object when specified.");if(void 0!==(t=t[ro])&&"boolean"!=typeof t)throw new Zi("argument-error",ro+" property must be a boolean when specified.");if((this.f=!!t)&&!this.b&&!this.a)throw new Zi("argument-error",ro+" property can't be true when no mobile application is provided.")}var no="android",ro="handleCodeInApp",io="iOS",oo="url",ao="installApp",so="minimumVersion",uo="packageName",co="bundleId";function lo(t){var e={};e.continueUrl=t.h,e.canHandleCodeInApp=t.f,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.c,e.androidInstallApp=t.g),e.iOSBundleId=t.b;for(var n in e)null===e[n]&&delete e[n];return e}function ho(t){if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=JSON.parse(Tn(t));if(r.sub&&r.iss&&r.aud&&r.exp)return new function(t){this.b=t.sub,b(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null}(r)}catch(t){}return null}var po="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),fo=["client_id","response_type","scope","redirect_uri","state"],_o={Hc:{Ma:"locale",za:500,ya:600,Na:"facebook.com",$a:fo},Jc:{Ma:null,za:500,ya:620,Na:"github.com",$a:fo},Kc:{Ma:"hl",za:515,ya:680,Na:"google.com",$a:fo},Qc:{Ma:"lang",za:485,ya:705,Na:"twitter.com",$a:po}};function go(t){for(var e in _o)if(_o[e].Na==t)return _o[e];return null}function vo(t){var e={};e["facebook.com"]=Co,e["google.com"]=Po,e["github.com"]=Eo,e["twitter.com"]=Ao;var n=t&&t[yo];try{if(n)return e[n]?new e[n](t):new wo(t);if(void 0!==t[mo])return new bo(t)}catch(t){}return null}var mo="idToken",yo="providerId";function bo(t){var e=t[yo];if(!e&&t[mo]){var n=ho(t[mo]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Vi(this,"providerId",e),Vi(this,"isNewUser",n)}function wo(t){bo.call(this,t),Vi(this,"profile",Gi((t=ki(t.rawUserInfo||"{}"))||{}))}w(wo,bo);function Co(t){if(wo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}w(Co,wo);function Eo(t){if(wo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Vi(this,"username",this.profile&&this.profile.login||null)}w(Eo,wo);function Po(t){if(wo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}w(Po,wo);function Ao(t){if(wo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Vi(this,"username",t.screenName||null)}w(Ao,wo);function So(t,e){return t.then(function(t){if(t[ea]){var n=ho(t[ea]);if(!n||e!=n.b)throw new Zi("user-mismatch");return t}throw new Zi("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==$i+"user-not-found"?new Zi("user-mismatch"):t})}function xo(t,e){if(e.idToken||e.accessToken)e.idToken&&Vi(this,"idToken",e.idToken),e.accessToken&&Vi(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Zi("internal-error","failed to construct a credential");Vi(this,"accessToken",e.oauthToken),Vi(this,"secret",e.oauthTokenSecret)}Vi(this,"providerId",t)}xo.prototype.wa=function(t){return ma(t,Oo(this))},xo.prototype.b=function(t,e){var n=Oo(this);return n.idToken=e,ya(t,n)},xo.prototype.c=function(t,e){return So(ba(t,Oo(this)),e)};function Oo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:br(e).toString(),requestUri:"http://localhost"}}xo.prototype.B=function(){var t={providerId:this.providerId};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t};function ko(t,e){this.rc=e||[],Bi(this,{providerId:t,isOAuthProvider:!0}),this.rb={},this.Wa=(go(t)||{}).Ma||null,this.Ua=null}ko.prototype.Ba=function(t){return this.rb=et(t),this};function To(t){ko.call(this,t,fo),this.a=[]}w(To,ko),To.prototype.sa=function(t){return B(this.a,t)||this.a.push(t),this},To.prototype.wb=function(){return H(this.a)},To.prototype.credential=function(t,e){if(!t&&!e)throw new Zi("argument-error","credential failed: must provide the ID token and/or the access token.");return new xo(this.providerId,{idToken:t||null,accessToken:e||null})};function Io(){To.call(this,"facebook.com")}w(Io,To),Vi(Io,"PROVIDER_ID","facebook.com");function No(t){if(!t)throw new Zi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new Io).credential(null,e)}function Ro(){To.call(this,"github.com")}w(Ro,To),Vi(Ro,"PROVIDER_ID","github.com");function Mo(t){if(!t)throw new Zi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new Ro).credential(null,e)}function Do(){To.call(this,"google.com"),this.sa("profile")}w(Do,To),Vi(Do,"PROVIDER_ID","google.com");function Lo(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new Do).credential(n,e)}function jo(){ko.call(this,"twitter.com",po)}w(jo,ko),Vi(jo,"PROVIDER_ID","twitter.com");function Fo(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Zi("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new xo("twitter.com",n)}function Uo(t,e){this.a=t,this.f=e,Vi(this,"providerId","password")}Uo.prototype.wa=function(t){return za(t,Wa,{email:this.a,password:this.f})},Uo.prototype.b=function(t,e){return za(t,La,{idToken:e,email:this.a,password:this.f})},Uo.prototype.c=function(t,e){return So(this.wa(t),e)},Uo.prototype.B=function(){return{email:this.a,password:this.f}};function Vo(){Bi(this,{providerId:"password",isOAuthProvider:!1})}Bi(Vo,{PROVIDER_ID:"password"});function Bo(t){if(!(t.Pa&&t.Oa||t.Da&&t.Y))throw new Zi("internal-error");this.a=t,Vi(this,"providerId","phone")}Bo.prototype.wa=function(t){return t.Qa(Wo(this))},Bo.prototype.b=function(t,e){var n=Wo(this);return n.idToken=e,za(t,Ya,n)},Bo.prototype.c=function(t,e){var n=Wo(this);return n.operation="REAUTH",So(t=za(t,Ha,n),e)},Bo.prototype.B=function(){var t={providerId:"phone"};return this.a.Pa&&(t.verificationId=this.a.Pa),this.a.Oa&&(t.verificationCode=this.a.Oa),this.a.Da&&(t.temporaryProof=this.a.Da),this.a.Y&&(t.phoneNumber=this.a.Y),t};function Wo(t){return t.a.Da&&t.a.Y?{temporaryProof:t.a.Da,phoneNumber:t.a.Y}:{sessionInfo:t.a.Pa,code:t.a.Oa}}function Go(t){try{this.a=t||e.auth()}catch(t){throw new Zi("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Bi(this,{providerId:"phone",isOAuthProvider:!1})}Go.prototype.Qa=function(t,e){var n=this.a.c;return Bt(e.verify()).then(function(r){if(!o(r))throw new Zi("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return(i=n,a={phoneNumber:t,recaptchaToken:r},za(i,Ma,a)).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Zi("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}var i,a})};function Yo(t,e){if(!t)throw new Zi("missing-verification-id");if(!e)throw new Zi("missing-verification-code");return new Bo({Pa:t,Oa:e})}Bi(Go,{PROVIDER_ID:"phone"});function Ho(t){if(t.temporaryProof&&t.phoneNumber)return new Bo({Da:t.temporaryProof,Y:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return Lo(t,n);case"facebook.com":return No(n);case"github.com":return Mo(n);case"twitter.com":return Fo(n,r);default:return new To(e).credential(t,n)}}catch(t){return null}}function zo(t){if(!t.isOAuthProvider)throw new Zi("invalid-oauth-provider")}function qo(t,e,n,r,i){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new Zi("invalid-auth-event");if(this.f&&this.a)throw new Zi("invalid-auth-event");if(this.f&&!this.g)throw new Zi("invalid-auth-event")}qo.prototype.B=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.B()}};function Xo(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Ji(t.error)):null}function Qo(t){var e="unauthorized-domain",n=void 0,r=ur(t);t=r.b,"chrome-extension"==(r=r.c)?n=E("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=E("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Zi.call(this,e,n)}w(Qo,Zi);function Ko(t,e,n){Zi.call(this,t,n),(t=e||{}).sb&&Vi(this,"email",t.sb),t.Y&&Vi(this,"phoneNumber",t.Y),t.credential&&Vi(this,"credential",t.credential)}w(Ko,Zi),Ko.prototype.B=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.B();return e&&rt(t,e),t},Ko.prototype.toJSON=function(){return this.B()};function Zo(t){if(t.code){var e=t.code||"";0==e.indexOf($i)&&(e=e.substring($i.length));var n={credential:Ho(t)};if(t.email)n.sb=t.email;else{if(!t.phoneNumber)return new Zi(e,t.message||void 0);n.Y=t.phoneNumber}return new Ko(e,n,t.message)}return null}function Jo(t){this.f=t}w(Jo,Sr),Jo.prototype.a=function(){return new this.f},Jo.prototype.b=function(){return{}};function $o(t,n,r){var o="Node"==pi();if(!(o=i.XMLHttpRequest||o&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest))throw new Zi("internal-error","The XMLHttpRequest compatibility library was not found.");this.b=t,t=n||{},this.i=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||na,this.c=et(t.secureTokenHeaders||ra),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||ia,this.a=et(t.firebaseHeaders||oa),r&&(this.a["X-Client-Version"]=r,this.c["X-Client-Version"]=r),this.f=new ti,this.o=new Jo(o)}var ta,ea="idToken",na=new Mi(3e4,6e4),ra={"Content-Type":"application/x-www-form-urlencoded"},ia=new Mi(3e4,6e4),oa={"Content-Type":"application/json"};function aa(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.c["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.c["X-Client-Version"])}function ua(t,e,n,r,o,a,s){Ri()?(function(){var t=bi();return!((t=vi(t)!=gi?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||at&&mt&&!(9<mt))}()?t=m(t.m,t):(ta||(ta=new Mt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{i[la]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=ue(ca,{onload:la});Mn(Xr(n),null,function(){e(Error("CORS_UNSUPPORTED"))},void 0)}}(t,e)})),t=m(t.u,t)),t(e,n,r,o,a,s)):n&&n(null)}$o.prototype.m=function(t,e,n,r,i,o){var a="Node"==pi(),s=fi()?a?new Ir(this.o):new Ir:new Ir(this.f);if(o){s.f=Math.max(0,o);var u=setTimeout(function(){ln(s,"timeout")},o)}hn(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return xn(t.J,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),dn(s,"ready",function(){u&&clearTimeout(u),Re(this)}),dn(s,"timeout",function(){u&&clearTimeout(u),Re(this),e&&e(null)}),jr(s,t,n,r,i)};var ca=oe("https://apis.google.com/js/client.js?onload=%{onload}"),la="__fcb"+Math.floor(1e6*Math.random()).toString();$o.prototype.u=function(t,e,n,r,i){var o=this;ta.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})};function ha(t){if(!qr.test(t.email))throw new Zi("invalid-email")}function da(t){"email"in t&&ha(t)}function pa(t){if(!t[ea])throw new Zi("internal-error")}function fa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Zi("internal-error")}else{if(!t.sessionInfo)throw new Zi("missing-verification-id");if(!t.code)throw new Zi("missing-verification-code")}}$o.prototype.gb=function(){return za(this,ja,{})},$o.prototype.kb=function(t,e){return za(this,Da,{idToken:t,email:e})},$o.prototype.lb=function(t,e){return za(this,La,{idToken:t,password:e})};var _a={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};(t=$o.prototype).mb=function(t,e){var n={idToken:t},r=[];return K(_a,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),za(this,Da,n)},t.cb=function(t,e){return rt(t={requestType:"PASSWORD_RESET",email:t},e),za(this,Ta,t)},t.bb=function(t,e){return rt(t={requestType:"VERIFY_EMAIL",idToken:t},e),za(this,ka,t)};t.Qa=function(t){return za(this,Ga,t)};function ga(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new Zi("internal-error")}function va(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Zo(t)):t.errorMessage&&(e=qa(t.errorMessage)),e)throw e;if(!t[ea])throw new Zi("internal-error")}function ma(t,e){return e.returnIdpCredential=!0,za(t,Fa,e)}function ya(t,e){return e.returnIdpCredential=!0,za(t,Va,e)}function ba(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,za(t,Ua,e)}function wa(t){if(!t.oobCode)throw new Zi("invalid-action-code")}t.Ta=function(t,e){return za(this,Ra,{oobCode:t,newPassword:e})},t.Ia=function(t){return za(this,Ea,{oobCode:t})},t.Sa=function(t){return za(this,Ca,{oobCode:t})};var Ca={endpoint:"setAccountInfo",D:wa,ga:"email"},Ea={endpoint:"resetPassword",D:wa,O:function(t){if(!t.email||!t.requestType)throw new Zi("internal-error")}},Pa={endpoint:"signupNewUser",D:function(t){if(ha(t),!t.password)throw new Zi("weak-password")},O:pa,T:!0},Aa={endpoint:"createAuthUri"},Sa={endpoint:"deleteAccount",ea:["idToken"]},xa={endpoint:"setAccountInfo",ea:["idToken","deleteProvider"],D:function(t){if(!l(t.deleteProvider))throw new Zi("internal-error")}},Oa={endpoint:"getAccountInfo"},ka={endpoint:"getOobConfirmationCode",ea:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Zi("internal-error")},ga:"email"},Ta={endpoint:"getOobConfirmationCode",ea:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Zi("internal-error");ha(t)},ga:"email"},Ia={nb:!0,endpoint:"getProjectConfig",zb:"GET"},Na={nb:!0,endpoint:"getRecaptchaParam",zb:"GET",O:function(t){if(!t.recaptchaSiteKey)throw new Zi("internal-error")}},Ra={endpoint:"resetPassword",D:wa,ga:"email"},Ma={endpoint:"sendVerificationCode",ea:["phoneNumber","recaptchaToken"],ga:"sessionInfo"},Da={endpoint:"setAccountInfo",ea:["idToken"],D:da,T:!0},La={endpoint:"setAccountInfo",ea:["idToken"],D:function(t){if(da(t),!t.password)throw new Zi("weak-password")},O:pa,T:!0},ja={endpoint:"signupNewUser",O:pa,T:!0},Fa={endpoint:"verifyAssertion",D:ga,O:va,T:!0},Ua={endpoint:"verifyAssertion",D:ga,O:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Zi("user-not-found");if(t.errorMessage)throw qa(t.errorMessage);if(!t[ea])throw new Zi("internal-error")},T:!0},Va={endpoint:"verifyAssertion",D:function(t){if(ga(t),!t.idToken)throw new Zi("internal-error")},O:va,T:!0},Ba={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Zi("invalid-custom-token")},O:pa,T:!0},Wa={endpoint:"verifyPassword",D:function(t){if(ha(t),!t.password)throw new Zi("wrong-password")},O:pa,T:!0},Ga={endpoint:"verifyPhoneNumber",D:fa,O:pa},Ya={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Zi("internal-error");fa(t)},O:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Zo(t);pa(t)}},Ha={Pb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:fa,O:pa};function za(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.ea))return Wt(new Zi("internal-error"));var r,i=e.zb||"POST";return Bt(n).then(e.D).then(function(){return e.T&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var a=ur(t.g+e);ar(a,"key",t.b),o&&ar(a,"cb",b().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&ar(a,u,r[u]);return new Mt(function(e,o){ua(t,a.toString(),function(t){t?t.error?o(Xa(t,i||{})):e(t):o(new Zi("network-request-failed"))},n,s?void 0:Se(Oi(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Pb,e.nb||!1)}).then(function(t){return r=t}).then(e.O).then(function(){if(!e.ga)return r;if(!(e.ga in r))throw new Zi("internal-error");return r[e.ga]})}function qa(t){return Xa({error:{errors:[{message:t}],code:400,message:t}})}function Xa(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Zi(r[n]):null)return n;n=t.error&&t.error.message||"",rt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0;for(var i in r)if(0===n.indexOf(i))return new Zi(r[i],e);return!e&&t&&(e=xi(t)),new Zi("internal-error",e)}var Qa={Mc:{Va:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://securetoken.googleapis.com/v1/token",id:"p"},Oc:{Va:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Pc:{Va:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ab:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ka(t){for(var e in Qa)if(Qa[e].id===t)return t=Qa[e],{firebaseEndpoint:t.Va,secureTokenEndpoint:t.ab};return null}var Za;Za=Ka("__EID__")?"__EID__":void 0;function Ja(t){this.b=t,this.a=null,this.Ya=(e=this,(ns||(ns=new Mt(function(t,e){if(Ri()){var n=function(){Ni(),wi("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ni(),e(Error("Network Error"))},timeout:ts.get()})};if(wi("gapi.iframes.Iframe"))t();else if(wi("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();i[r]=function(){wi("gapi.load")?n():e(Error("Network Error"))},Bt(Xr(r=ue($a,{onload:r}))).s(function(){e(Error("Network Error"))})}}else e(Error("Network Error"))}).s(function(t){throw ns=null,t}))).then(function(){return new Mt(function(t,n){wi("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:wi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},es.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})}));var e}var $a=oe("https://apis.google.com/js/api.js?onload=%{onload}"),ts=new Mi(3e4,6e4),es=new Mi(5e3,15e3),ns=null;function rs(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=cr(this.i,"/__/auth/iframe"),ar(this.a,"apiKey",this.g),ar(this.a,"appName",this.h),this.b=null,this.c=[]}rs.prototype.toString=function(){return this.f?ar(this.a,"v",this.f):Cr(this.a.a,"v"),this.b?ar(this.a,"eid",this.b):Cr(this.a.a,"eid"),this.c.length?ar(this.a,"fw",this.c.join(",")):Cr(this.a.a,"fw"),this.a.toString()};function is(t,e,n,r,i){this.m=t,this.u=e,this.c=n,this.l=r,this.i=this.g=this.h=null,this.a=i,this.f=null}is.prototype.toString=function(){var t=cr(this.m,"/__/auth/handler");if(ar(t,"apiKey",this.u),ar(t,"appName",this.c),ar(t,"authType",this.l),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().$()}catch(t){r=null}n.Ua=r,ar(t,"providerId",this.a.providerId),r=Oi((n=this.a).rb);for(var i in r)r[i]=r[i].toString();i=n.rc,r=et(r);for(var o=0;o<i.length;o++){var a=i[o];a in r&&delete r[a]}n.Wa&&n.Ua&&!r[n.Wa]&&(r[n.Wa]=n.Ua),$(r)||ar(t,"customParameters",xi(r))}if("function"==typeof this.a.wb&&(n=this.a.wb(),n.length&&ar(t,"scopes",n.join(","))),this.h?ar(t,"redirectUrl",this.h):Cr(t.a,"redirectUrl"),this.g?ar(t,"eventId",this.g):Cr(t.a,"eventId"),this.i?ar(t,"v",this.i):Cr(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!sr(t,s)&&ar(t,s,this.b[s]);return this.f?ar(t,"eid",this.f):Cr(t.a,"eid"),(s=os(this.c)).length&&ar(t,"fw",s.join(",")),t.toString()};function os(t){try{return e.app(t).auth().Ka()}catch(t){return[]}}function as(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function ss(t){var e=ii();return(n=t,za(n,Ia,{}).then(function(t){return t.authorizedDomains||[]})).then(function(t){t:{var n=ur(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=ur(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:ci.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Qo(ii())});var n}function us(t){return t.l?t.l:(t.l=li().then(function(){if(!t.o){var e=t.c,n=t.h,r=os(t.b),i=new rs(t.u,t.f,t.b);i.f=e,i.b=n,i.c=H(r||[]),t.o=i.toString()}t.i=new Ja(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");e=t.i,n=function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Xo(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Bt(n)}return n.status="ERROR",Bt(n)},e.Ya.then(function(){e.a.register("authEvent",n,wi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))});var e,n}(t)}),t.l)}(t=as.prototype).Ca=function(t,e,n){var r=new Zi("popup-closed-by-user"),i=new Zi("web-storage-unsupported"),o=this,a=!1;return this.ba().then(function(){(function(t){var e={type:"webStorageSupport"};return us(t).then(function(){return n=t.i,r=e,n.Ya.then(function(){return new Mt(function(t){n.a.send(r.type,r,t,wi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var n,r}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&si(t),e(i),a=!0)})}).s(function(){}).then(function(){if(!a)return e=t,new Mt(function(t){return function n(){_n(2e3).then(function(){if(e&&!e.closed)return n();t()})}()});var e}).then(function(){if(!a)return _n(n).then(function(){e(r)})})},t.Db=function(){var t=bi();return!Si(t)&&!Ii(t)},t.yb=function(){return!1},t.vb=function(t,e,n,r,i,o,a){if(!t)return Wt(new Zi("popup-blocked"));if(a&&!Si())return this.ba().s(function(e){si(t),i(e)}),r(),Bt();this.a||(this.a=ss(cs(this)));var s=this;return this.a.then(function(){var e=s.ba().s(function(e){throw si(t),i(e),e});return r(),e}).then(function(){if(zo(n),!a){oi(ls(s.u,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})};function cs(t){return t.m||(t.v=t.c?yi(t.c,os(t.b)):null,t.m=new $o(t.f,Ka(t.h),t.v)),t.m}t.Aa=function(t,e,n){this.a||(this.a=ss(cs(this)));var r=this;return this.a.then(function(){zo(e);oi(ls(r.u,r.f,r.b,t,e,ii(),n,r.c,void 0,r.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ba=function(){var t=this;return us(this).then(function(){return t.i.Ya}).s(function(){throw t.a=null,new Zi("network-request-failed")})},t.Hb=function(){return!0};function ls(t,e,n,r,i,o,a,s,u,c){return(t=new is(t,e,n,r,i)).h=o,t.g=a,t.i=s,t.b=et(u||null),t.f=c,t.toString()}t.ua=function(t){this.g.push(t)},t.Ja=function(t){G(this.g,function(e){return e==t})};function hs(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Zi("internal-error","The React Native compatibility library was not found.")}(t=hs.prototype).get=function(t){return Bt(this.a.getItem(t)).then(function(t){return t&&ki(t)})},t.set=function(t,e){return Bt(this.a.setItem(t,xi(e)))},t.X=function(t){return Bt(this.a.removeItem(t))},t.ia=function(){},t.da=function(){};function ds(){this.a={}}(t=ds.prototype).get=function(t){return Bt(this.a[t])},t.set=function(t,e){return this.a[t]=e,Bt()},t.X=function(t){return delete this.a[t],Bt()},t.ia=function(){},t.da=function(){};function ps(t,e,n,r,o,a){try{var s=!!i.indexedDB}catch(t){s=!1}if(!s)throw new Zi("web-storage-unsupported");this.u=t,this.h=e,this.g=n,this.l=r,this.m=o,this.f={},this.c=[],this.a=0,this.o=a||i.indexedDB}var fs;function _s(t){t.i||(t.i=(e=t,new Mt(function(t,n){var r=e.o.open(e.u,e.m);r.onerror=function(t){n(Error(t.target.errorCode))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore(e.h,{keyPath:e.g})}catch(t){n(t)}},r.onsuccess=function(e){t(e.target.result)}})));var e;return t.i}function gs(t,e){return e.objectStore(t.h)}function vs(t,e,n){return e.transaction([t.h],n?"readwrite":"readonly")}function ms(t){return new Mt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})}(t=ps.prototype).set=function(t,e){var n,r=!1,i=this;return Yt(_s(this).then(function(e){return ms((e=gs(i,vs(i,n=e,!0))).get(t))}).then(function(o){var a=gs(i,vs(i,n,!0));return o?(o.value=e,ms(a.put(o))):(i.a++,r=!0,(o={})[i.g]=t,o[i.l]=e,ms(a.add(o)))}).then(function(){i.f[t]=e}),function(){r&&i.a--})},t.get=function(t){var e=this;return _s(this).then(function(n){return ms(gs(e,vs(e,n,!1)).get(t))}).then(function(t){return t&&t.value})},t.X=function(t){var e=!1,n=this;return Yt(_s(this).then(function(r){return e=!0,n.a++,ms(gs(n,vs(n,r,!0)).delete(t))}).then(function(){delete n.f[t]}),function(){e&&n.a--})},t.zc=function(){var t=this;return _s(this).then(function(e){var n=gs(t,vs(t,e,!1));return n.getAll?ms(n.getAll()):new Mt(function(t,e){var r=[],i=n.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){e(Error(t.target.errorCode))}})}).then(function(e){var n={},r=[];if(0==t.a){for(r=0;r<e.length;r++)n[e[r][t.g]]=e[r][t.l];r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):l(e[r])?tt(e[r],n[r])||i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.f,n),t.f=n}return r})},t.ia=function(t){0==this.c.length&&function(t){t.b&&t.b.cancel("STOP_EVENT"),function e(){t.b=_n(800).then(m(t.zc,t)).then(function(e){0<e.length&&F(t.c,function(t){t(e)})}).then(e).s(function(t){"STOP_EVENT"!=t.message&&e()});return t.b}()}(this),this.c.push(t)},t.da=function(t){G(this.c,function(e){return e==t}),0==this.c.length&&this.b&&this.b.cancel("STOP_EVENT")};function ys(){if(!function(){var t="Node"==pi();if(!(t=bs()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==pi())throw new Zi("internal-error","The LocalStorage compatibility library was not found.");throw new Zi("web-storage-unsupported")}this.a=bs()||e.INTERNAL.node.localStorage}function bs(){try{var t=i.localStorage,e=Ti();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}(t=ys.prototype).get=function(t){var e=this;return Bt().then(function(){return ki(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Bt().then(function(){var r=xi(e);null===r?n.X(t):n.a.setItem(t,r)})},t.X=function(t){var e=this;return Bt().then(function(){e.a.removeItem(t)})},t.ia=function(t){i.window&&Ke(i.window,"storage",t)},t.da=function(t){i.window&&$e(i.window,"storage",t)};function ws(){}(t=ws.prototype).get=function(){return Bt(null)},t.set=function(){return Bt()},t.X=function(){return Bt()},t.ia=function(){},t.da=function(){};function Cs(){if(!function(){var t="Node"==pi();if(!(t=Es()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==pi())throw new Zi("internal-error","The SessionStorage compatibility library was not found.");throw new Zi("web-storage-unsupported")}this.a=Es()||e.INTERNAL.node.sessionStorage}function Es(){try{var t=i.sessionStorage,e=Ti();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}(t=Cs.prototype).get=function(t){var e=this;return Bt().then(function(){return ki(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Bt().then(function(){var r=xi(e);null===r?n.X(t):n.a.setItem(t,r)})},t.X=function(t){var e=this;return Bt().then(function(){e.a.removeItem(t)})},t.ia=function(){},t.da=function(){};var Ps,As={C:ys,jb:Cs},Ss={C:ys,jb:Cs},xs={C:hs,jb:ws},Os={Lc:"local",NONE:"none",Nc:"session"};function ks(t,e,n,r,i){this.i=t,this.g=e,this.A=n,this.u=r,this.v=i,this.a={},Ps||(Ps=new function(){var t={};t.Browser=As,t.Node=Ss,t.ReactNative=xs,this.a=t[pi()]}),t=Ps;try{if(ri()){fs||(fs=new ps("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1));var o=fs}else o=new t.a.C;this.l=o}catch(t){this.l=new ds,this.u=!0}try{this.o=new t.a.jb}catch(t){this.o=new ds}this.w=new ds,this.h=m(this.m,this),this.b={}}var Ts;function Is(){return Ts||(Ts=new ks("firebase",":",!(Ii(bi())||!di()),Si(),Ci())),Ts}function Ns(t,e){switch(e){case"session":return t.o;case"none":return t.w;default:return t.l}}function Rs(t,e,n){return t.i+t.g+e.name+(n?t.g+n:"")}ks.prototype.get=function(t,e){return Ns(this,t.C).get(Rs(this,t,e))};function Ms(t,e,n){return n=Rs(t,e,n),"local"==e.C&&(t.b[n]=null),Ns(t,e.C).X(n)}ks.prototype.set=function(t,e,n){var r=Rs(this,t,n),i=this,o=Ns(this,t.C);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.C&&(i.b[r]=e)})};function Ds(t,e,n,r){e=Rs(t,e,n),t.v&&(t.b[e]=i.localStorage.getItem(e)),$(t.a)&&(Ns(t,"local").ia(t.h),t.u||ri()||!t.v||(o=t,js(o),o.f=setInterval(function(){for(var t in o.a){var e=i.localStorage.getItem(t),n=o.b[t];e!=n&&(o.b[t]=e,e=new Ue({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),o.m(e))}},1e3)));var o;t.a[e]||(t.a[e]=[]),t.a[e].push(r)}function Ls(t,e,n){e=Rs(t,Zu("local"),e),t.a[e]&&(G(t.a[e],function(t){return t==n}),0==t.a[e].length&&delete t.a[e]),$(t.a)&&(r=t,Ns(r,"local").da(r.h),js(r));var r}function js(t){t.f&&(clearInterval(t.f),t.f=null)}ks.prototype.m=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var o=i.localStorage.getItem(n);o!==r&&(this.b[n]=o,this.c(n))}else if(0==e.indexOf(this.i+this.g)&&this.a[e]){if(void 0!==t.a.a?Ns(this,"local").da(this.h):js(this),this.A)if(n=i.localStorage.getItem(e),r=t.a.newValue,r!==n)null!==r?i.localStorage.setItem(e,r):i.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var a=this;n=function(){void 0===t.a.a&&a.b[e]===i.localStorage.getItem(e)||(a.b[e]=i.localStorage.getItem(e),a.c(e))},at&&mt&&10==mt&&i.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else F(t,m(this.c,this))},ks.prototype.c=function(t){this.a[t]&&F(this.a[t],function(t){t()})};var Fs={name:"authEvent",C:"local"};function Us(t,e,n,r,i,o,a){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=a||null,this.h=e+":"+n,this.A=new function(){this.a=Is()},this.g=new function(t){this.a=t,this.b=Is()}(this.h),this.f=null,this.b=[],this.v=i||500,this.w=o||2e3,this.a=this.c=null}function Vs(t){return new Zi("invalid-cordova-configuration",t)}(t=Us.prototype).ba=function(){return this.xa?this.xa:this.xa=(hi(void 0)?li().then(function(){return new Mt(function(t,e){var n=i.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Wt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof wi("universalLinks.subscribe",i))throw Vs("cordova-universal-links-plugin is not installed");if(void 0===wi("BuildInfo.packageName",i))throw Vs("cordova-plugin-buildinfo is not installed");if("function"!=typeof wi("cordova.plugins.browsertab.openUrl",i))throw Vs("cordova-plugin-browsertab is not installed");if("function"!=typeof wi("cordova.InAppBrowser.open",i))throw Vs("cordova-plugin-inappbrowser is not installed")},function(){throw new Zi("cordova-not-ready")})};function Bs(t){var e=new Zn;Qn(e,t),t=[];var n=8*e.g;56>e.c?Qn(e,qn,56-e.c):Qn(e,qn,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Xn(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return U(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}t.Ca=function(t,e){return e(new Zi("operation-not-supported-in-this-environment")),Bt()},t.vb=function(){return Wt(new Zi("operation-not-supported-in-this-environment"))},t.Hb=function(){return!1},t.Db=function(){return!0},t.yb=function(){return!0},t.Aa=function(t,e,n){if(this.c)return Wt(new Zi("redirect-operation-pending"));var r=this,o=i.document,a=null,s=null,u=null,c=null;return this.c=Yt(Bt().then(function(){return zo(e),Gs(r)}).then(function(){return function(t,e,n,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new qo(e,r,null,o,new Zi("no-auth-event")),s=wi("BuildInfo.packageName",i);if("string"!=typeof s)throw new Zi("invalid-cordova-configuration");var u=wi("BuildInfo.displayName",i),c={};if(bi().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!bi().toLowerCase().match(/android/))return Wt(new Zi("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=Bs(o),c.sessionId=o;var l=ls(t.u,t.i,t.l,e,n,null,r,t.m,c,t.o);return t.ba().then(function(){var e=t.h;return t.A.a.set(Fs,a.B(),e)}).then(function(){var e=wi("cordova.plugins.browsertab.isAvailable",i);if("function"!=typeof e)throw new Zi("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=wi("cordova.plugins.browsertab.openUrl",i)))throw new Zi("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=wi("cordova.InAppBrowser.open",i)))throw new Zi("invalid-cordova-configuration");e=!(!(e=bi()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=n(l,e?"_blank":"_system","location=yes")}})})}(r,t,e,n)}).then(function(){return new Mt(function(t,e){s=function(){var e=wi("cordova.plugins.browsertab.close",i);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.ua(s),u=function(){a||(a=_n(r.w).then(function(){e(new Zi("redirect-cancelled-by-user"))}))},c=function(){Di()&&u()},o.addEventListener("resume",u,!1),bi().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return Ys(r).then(function(){throw t})})}),function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&r.Ja(s),r.c=null})};function Ws(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Gs(t){return t.f||(t.f=t.ba().then(function(){return new Mt(function(e){t.ua(function n(r){return e(r),t.Ja(n),!1}),function(t){function e(e){o=!0,a&&a.cancel(),Ys(t).then(function(n){var i=r;if(n&&e&&e.url){i=null;var o=e.url,a=ur(o),s=sr(a,"link"),u=sr(ur(s),"link");a=sr(a,"deep_link_id"),-1!=(o=sr(ur(a),"link")||a||u||s||o).indexOf("/__/auth/callback")&&(i=ur(o),i=ki(sr(i,"firebaseError")||null),i=(i="object"==typeof i?Ji(i):null)?new qo(n.b,n.c,null,null,i):new qo(n.b,n.c,o,n.g)),i=i||r}Ws(t,i)})}var n=wi("universalLinks.subscribe",i);if("function"!=typeof n)throw new Zi("invalid-cordova-configuration");var r=new qo("unknown",null,null,null,new Zi("no-auth-event")),o=!1,a=_n(t.v).then(function(){return Ys(t).then(function(){o||Ws(t,r)})}),s=i.handleOpenURL;i.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(wi("BuildInfo.packageName",i).toLowerCase()+"://")&&e({url:t}),"function"==typeof s)try{s(t)}catch(t){console.error(t)}},n(null,e)}(t)})})),t.f}function Ys(t){var e=null;return(n=t.g,n.b.get(Fs,n.a).then(function(t){return Xo(t)})).then(function(n){return e=n,Ms((n=t.g).b,Fs,n.a)}).then(function(){return e});var n}t.ua=function(t){this.b.push(t),Gs(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new Zi("no-auth-event")),t(e))})},t.Ja=function(t){G(this.b,function(e){return e==t})};var Hs={name:"pendingRedirect",C:"session"};function zs(t){return Ms(t.b,Hs,t.a)}function qs(t,e,n){this.v=t,this.l=e,this.u=n,this.h=[],this.f=!1,this.i=m(this.m,this),this.c=new ru,this.o=new su,this.g=new function(t){this.a=t,this.b=Is()}(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.o,this.b.linkViaPopup=this.o,this.b.reauthViaPopup=this.o,this.a=Xs(this.v,this.l,this.u,Za)}function Xs(t,n,r,i){var o=e.SDK_VERSION||null;return hi()?new Us(t,n,r,o,void 0,void 0,i):new as(t,n,r,o,i)}qs.prototype.reset=function(){this.f=!1,this.a.Ja(this.i),this.a=Xs(this.v,this.l,this.u)};function Qs(t){t.f||(t.f=!0,t.a.ua(t.i));var e=t.a;return t.a.ba().s(function(n){throw t.a==e&&t.reset(),n})}function Ks(t){t.a.Db()&&Qs(t).s(function(e){var n=new qo("unknown",null,null,null,new Zi("operation-not-supported-in-this-environment"));tu(e)&&t.m(n)}),t.a.yb()||iu(t.c)}qs.prototype.subscribe=function(t){if(B(this.h,t)||this.h.push(t),!this.f){var e=this;(n=this.g,n.b.get(Hs,n.a).then(function(t){return"pending"==t})).then(function(t){t?zs(e.g).then(function(){Qs(e).s(function(t){var n=new qo("unknown",null,null,null,new Zi("operation-not-supported-in-this-environment"));tu(t)&&e.m(n)})}):Ks(e)}).s(function(){Ks(e)})}var n},qs.prototype.unsubscribe=function(t){G(this.h,function(e){return e==t})},qs.prototype.m=function(t){if(!t)throw new Zi("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.ob(t.b,t.c)){(e=this.b[t.b])&&e.h(t,r),e=!0;break}}return iu(this.c),e};var Zs=new Mi(2e3,1e4),Js=new Mi(3e4,6e4);qs.prototype.aa=function(){return this.c.aa()};function $s(t,e,n,r,i,o){return t.a.vb(e,n,r,function(){t.f||(t.f=!0,t.a.ua(t.i))},function(){t.reset()},i,o)}function tu(t){return!(!t||"auth/cordova-not-ready"!=t.code)}qs.prototype.Aa=function(t,e,n){var r,i=this;return(o=this.g,o.b.set(Hs,"pending",o.a)).then(function(){return i.a.Aa(t,e,n).s(function(t){if(tu(t))throw new Zi("operation-not-supported-in-this-environment");return r=t,zs(i.g).then(function(){throw r})}).then(function(){return i.a.Hb()?new Mt(function(){}):zs(i.g).then(function(){return i.aa()}).then(function(){}).s(function(){})})});var o},qs.prototype.Ca=function(t,e,n,r){return this.a.Ca(n,function(n){t.fa(e,null,n,r)},Zs.get())};var eu={};function nu(t,e,n){var r=e+":"+n;return eu[r]||(eu[r]=new qs(t,e,n)),eu[r]}function ru(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}ru.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ru.prototype.h=function(t,e){if(!t)return Wt(new Zi("invalid-auth-event"));this.reset(),this.g=!0;var n=t.b,r=t.c,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;return"unknown"!=n||i||o?t.a?(au(this,!0,null,t.a),t=Bt()):t=e.va(n,r)?function(t,e,n){n=n.va(e.b,e.c);var r=e.f,i=e.g,o=!!e.b.match(/Redirect$/);return n(r,i).then(function(e){au(t,o,e,null)}).s(function(e){au(t,o,null,e)})}(this,t,e):Wt(new Zi("invalid-auth-event")):(au(this,!1,null,null),t=Bt()),t};function iu(t){t.g||(t.g=!0,au(t,!1,null,null))}function ou(t,e){if(t.b=function(){return Bt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function au(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Wt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):ou(t,n):ou(t,{user:null}),t.f=[],t.c=[]}ru.prototype.aa=function(){var t=this;return new Mt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Zi("timeout");t.a&&t.a.cancel(),t.a=_n(Js.get()).then(function(){t.b||au(t,!0,null,e)})}(t))})};function su(){}su.prototype.h=function(t,e){if(!t)return Wt(new Zi("invalid-auth-event"));var n=t.b,r=t.c;return t.a?(e.fa(t.b,null,t.a,t.c),t=Bt()):t=e.va(n,r)?function(t,e){var n=t.c,r=t.b;return e.va(r,n)(t.f,t.g).then(function(t){e.fa(r,t,null,n)}).s(function(t){e.fa(r,null,t,n)})}(t,e):Wt(new Zi("invalid-auth-event")),t};function uu(t,e){this.a=e,Vi(this,"verificationId",t)}uu.prototype.confirm=function(t){return t=Yo(this.verificationId,t),this.a(t)};function cu(t,e,n,r){return new Go(t).Qa(e,n).then(function(t){return new uu(t,r)})}function lu(t,e,n,r,i,o){if(this.h=t,this.i=e,this.g=n,this.c=r,this.f=i,this.l=!!o,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}lu.prototype.start=function(){this.a=this.c,function t(e,n){hu(e);e.b=_n((r=e,o=n,o?(r.a=r.c,r.g()):(o=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),o))).then(function(){return e.l?Bt():function(){var t=i.document,e=null;return Di()||!t?Bt():new Mt(function(n){e=function(){Di()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)});var r,o}(this,!0)};function hu(t){t.b&&(t.b.cancel(),t.b=null)}function du(t){this.f=t,this.b=this.a=null,this.c=0}du.prototype.B=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}};function pu(t,e){var n=e[ea],r=e.refreshToken;e=fu(e.expiresIn),t.b=n,t.c=e,t.a=r}function fu(t){return b()+1e3*parseInt(t,10)}function _u(t,e){return(n=t.f,r=e,new Mt(function(t,e){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?ua(n,n.i+"?key="+encodeURIComponent(n.b),function(n){n?n.error?e(Xa(n)):n.access_token&&n.refresh_token?t(n):e(new Zi("internal-error")):e(new Zi("network-request-failed"))},"POST",br(r).toString(),n.c,n.l.get()):e(new Zi("internal-error"))})).then(function(e){return t.b=e.access_token,t.c=fu(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e});var n,r}du.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Wt(new Zi("user-token-expired")):t||!this.b||b()>this.c-3e4?this.a?_u(this,{grant_type:"refresh_token",refresh_token:this.a}):Bt(null):Bt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})};function gu(t,e){this.a=t||null,this.b=e||null,Bi(this,{lastSignInTime:Li(e||null),creationTime:Li(t||null)})}gu.prototype.B=function(){return{lastLoginAt:this.b,createdAt:this.a}};function vu(t,e){Fe.call(this,t);for(var n in e)this[n]=e[n]}w(vu,Fe);function mu(t,n,r){this.A=[],this.G=t.apiKey,this.o=t.appName,this.w=t.authDomain||null,t=e.SDK_VERSION?yi(e.SDK_VERSION):null,this.c=new $o(this.G,Ka(Za),t),this.h=new du(this.c),Au(this,n[ea]),pu(this.h,n),Vi(this,"refreshToken",this.h.a),Ou(this,r||{}),cn.call(this),this.I=!1,this.w&&Ei()&&(this.a=nu(this.w,this.G,this.o)),this.N=[],this.i=null,this.l=(i=this,new lu(function(){return i.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=i.h.c-b()-3e5;return 0<t?t:0},3e4,96e4,!1));var i;this.U=m(this.Ga,this);var o=this;this.ha=null,this.ra=function(t){o.na(t.h)},this.W=null,this.R=[],this.qa=function(t){bu(o,t.f)},this.V=null}w(mu,cn),mu.prototype.na=function(t){this.ha=t,aa(this.c,t)},mu.prototype.$=function(){return this.ha};function yu(t,e){t.W&&$e(t.W,"languageCodeChanged",t.ra),(t.W=e)&&Ke(e,"languageCodeChanged",t.ra)}function bu(t,n){t.R=n,sa(t.c,e.SDK_VERSION?yi(e.SDK_VERSION,t.R):null)}mu.prototype.Ka=function(){return H(this.R)};function wu(t,e){t.V&&$e(t.V,"frameworkChanged",t.qa),(t.V=e)&&Ke(e,"frameworkChanged",t.qa)}mu.prototype.Ga=function(){this.l.b&&(hu(this.l),this.l.start())};function Cu(t){try{return e.app(t.o).auth()}catch(e){throw new Zi("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function Eu(t){t.m||t.l.b||(t.l.start(),$e(t,"tokenChanged",t.U),Ke(t,"tokenChanged",t.U))}function Pu(t){$e(t,"tokenChanged",t.U),hu(t.l)}function Au(t,e){t.pa=e,Vi(t,"_lat",e)}function Su(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return(r=e,new Mt(function(t){var e=r.length,n=[];if(e)for(var i,o=function(r,i,o){e--,n[r]=i?{Ub:!0,value:o}:{Ub:!1,reason:o},0==e&&t(n)},a=0;a<r.length;a++)i=r[a],Gt(i,y(o,a,!0),y(o,a,!1));else t(n)})).then(function(){return t});var r}function xu(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function Ou(t,e){Bi(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new gu(e.createdAt,e.lastLoginAt),providerData:[]})}Vi(mu.prototype,"providerId","firebase");function ku(){}function Tu(t){return Bt().then(function(){if(t.m)throw new Zi("app-deleted")})}function Iu(t){return U(t.providerData,function(t){return t.providerId})}function Nu(t,e){e&&(Ru(t,e.providerId),t.providerData.push(e))}function Ru(t,e){G(t.providerData,function(t){return t.providerId==e})}function Mu(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Vi(t,e,n)}function Du(t,e){t!=e&&(Bi(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),e.metadata?Vi(t,"metadata",(n=e.metadata,new gu(n.a,n.b))):Vi(t,"metadata",new gu),F(e.providerData,function(e){Nu(t,e)}),t.h=e.h,Vi(t,"refreshToken",t.h.a));var n}(t=mu.prototype).reload=function(){var t=this;return Yu(this,Tu(this).then(function(){return Lu(t).then(function(){return Su(t)}).then(ku)}))};function Lu(t){return t.F().then(function(e){var n=t.isAnonymous;return(r=t,i=e,za(r.c,Oa,{idToken:i}).then(m(r.kc,r))).then(function(){return n||Mu(t,"isAnonymous",!1),e});var r,i})}t.F=function(t){var e=this;return Yu(this,Tu(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Zi("internal-error");return t.accessToken!=e.pa&&(Au(e,t.accessToken),ln(e,new vu("tokenChanged"))),Mu(e,"refreshToken",t.refreshToken),t.accessToken}))},t.getToken=function(t){return Fi["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(Fi["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.F(t)};function ju(t,e){e[ea]&&t.pa!=e[ea]&&(pu(t.h,e),ln(t,new vu("tokenChanged")),Au(t,e[ea]),Mu(t,"refreshToken",t.h.a))}t.kc=function(t){if(!(t=t.users)||!t.length)throw new Zi("internal-error");Ou(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=(r=t,(r=r.providerUserInfo)&&r.length?U(r,function(t){return new function(t,e,n,r,i,o){Bi(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]),n=0;n<e.length;n++)Nu(this,e[n]);var r;Mu(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))};t.Za=function(t){var e=this,n=null;return Yu(this,t.c(this.c,this.uid).then(function(t){return ju(e,t),n=Uu(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.mc=function(t){return this.Za(t).then(function(){})};function Fu(t,e){return Lu(t).then(function(){if(B(Iu(t),e))return Su(t).then(function(){throw new Zi("provider-already-linked")})})}t.Xa=function(t){var e=this,n=null;return Yu(this,Fu(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.b(e.c,n)}).then(function(t){return n=Uu(e,t,"link"),Vu(e,t)}).then(function(){return n}))},t.cc=function(t){return this.Xa(t).then(function(t){return t.user})},t.dc=function(t,e){var n=this;return Yu(this,Fu(this,"phone").then(function(){return cu(Cu(n),t,e,m(n.Xa,n))}))},t.nc=function(t,e){var n=this;return Yu(this,Bt().then(function(){return cu(Cu(n),t,e,m(n.Za,n))}),!0)};function Uu(t,e,n){return Wi({user:t,credential:Ho(e),additionalUserInfo:e=vo(e),operationType:n})}function Vu(t,e){return ju(t,e),t.reload().then(function(){return t})}t.kb=function(t){var e=this;return Yu(this,this.F().then(function(n){return e.c.kb(n,t)}).then(function(t){return ju(e,t),e.reload()}))},t.Dc=function(t){var e=this;return Yu(this,this.F().then(function(n){return t.b(e.c,n)}).then(function(t){return ju(e,t),e.reload()}))},t.lb=function(t){var e=this;return Yu(this,this.F().then(function(n){return e.c.lb(n,t)}).then(function(t){return ju(e,t),e.reload()}))},t.mb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Tu(this);var e=this;return Yu(this,this.F().then(function(n){return e.c.mb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return ju(e,t),Mu(e,"displayName",t.displayName||null),Mu(e,"photoURL",t.photoUrl||null),F(e.providerData,function(t){"password"===t.providerId&&(Vi(t,"displayName",e.displayName),Vi(t,"photoURL",e.photoURL))}),Su(e)}).then(ku))},t.Cc=function(t){var e=this;return Yu(this,Lu(this).then(function(n){return B(Iu(e),t)?(r=e.c,i=n,o=[t],za(r,xa,{idToken:i,deleteProvider:o})).then(function(t){var n={};return F(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),F(Iu(e),function(t){n[t]||Ru(e,t)}),n[Go.PROVIDER_ID]||Vi(e,"phoneNumber",null),Su(e)}):Su(e).then(function(){throw new Zi("no-such-provider")});var r,i,o}))},t.delete=function(){var t=this;return Yu(this,this.F().then(function(e){return za(t.c,Sa,{idToken:e})}).then(function(){ln(t,new vu("userDeleted"))})).then(function(){for(var e=0;e<t.A.length;e++)t.A[e].cancel("app-deleted");yu(t,null),wu(t,null),t.A=[],t.m=!0,Pu(t),Vi(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.ob=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.Z||null)==e||"reauthViaRedirect"==t&&(this.Z||null)==e)},t.fa=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.va=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.tb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.ub,this):"linkViaRedirect"==t&&(this.Z||null)==e?m(this.tb,this):"reauthViaRedirect"==t&&(this.Z||null)==e?m(this.ub,this):null},t.ec=function(t){var e=this;return Bu(this,"linkViaPopup",t,function(){return Fu(e,t.providerId).then(function(){return Su(e)})},!1)},t.oc=function(t){return Bu(this,"reauthViaPopup",t,function(){return Bt()},!0)};function Bu(t,n,r,i,o){if(!Ei())return Wt(new Zi("operation-not-supported-in-this-environment"));if(t.i&&!o)return Wt(t.i);var a=go(r.providerId),s=Ti(t.uid+":::"),u=null;(!Si()||di())&&t.w&&r.isOAuthProvider&&(u=ls(t.w,t.G,t.o,n,r,null,s,e.SDK_VERSION||null));var c=ui(u,a&&a.za,a&&a.ya);return i=i().then(function(){if(Gu(t),!o)return t.F().then(function(){})}).then(function(){return $s(t.a,c,n,r,s,!!u)}).then(function(){return new Mt(function(e,r){t.fa(n,null,new Zi("cancelled-popup-request"),t.g||null),t.f=e,t.v=r,t.g=s,t.b=t.a.Ca(t,n,c,s)})}).then(function(t){return c&&si(c),t?Wi(t):null}).s(function(t){throw c&&si(c),t}),Yu(t,i,o)}t.fc=function(t){var e=this;return Wu(this,"linkViaRedirect",t,function(){return Fu(e,t.providerId)},!1)},t.pc=function(t){return Wu(this,"reauthViaRedirect",t,function(){return Bt()},!0)};function Wu(t,e,n,r,i){if(!Ei())return Wt(new Zi("operation-not-supported-in-this-environment"));if(t.i&&!i)return Wt(t.i);var o=null,a=Ti(t.uid+":::");return r=r().then(function(){if(Gu(t),!i)return t.F().then(function(){})}).then(function(){return t.Z=a,Su(t)}).then(function(e){return t.ca&&(e=t.ca,e=e.b.set(zu,t.B(),e.a)),e}).then(function(){return t.a.Aa(e,n,a)}).s(function(e){if(o=e,t.ca)return qu(t.ca);throw o}).then(function(){if(o)throw o}),Yu(t,r,i)}function Gu(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Zi("internal-error");throw new Zi("auth-domain-config-required")}}t.tb=function(t,e){var n=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return Yu(this,this.F().then(function(r){return ya(n.c,{requestUri:t,sessionId:e,idToken:r})}).then(function(t){return r=Uu(n,t,"link"),Vu(n,t)}).then(function(){return r}))},t.ub=function(t,e){var n=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return Yu(this,Bt().then(function(){return So(ba(n.c,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return r=Uu(n,t,"reauthenticate"),ju(n,t),n.i=null,n.reload()}).then(function(){return r}),!0)},t.bb=function(t){var e=this,n=null;return Yu(this,this.F().then(function(e){return n=e,void 0===t||$(t)?{}:lo(new eo(t))}).then(function(t){return e.c.bb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))};function Yu(t,e,n){var r,i,o,a=(r=t,i=e,o=n,r.i&&!o?(i.cancel(),Wt(r.i)):i.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.i||ln(r,new vu("userInvalidated")),r.i=t),t}));return t.A.push(a),Yt(a,function(){W(t.A,a)}),a}t.toJSON=function(){return this.B()},t.B=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.o,authDomain:this.w,stsTokenManager:this.h.B(),redirectEventId:this.Z||null};return this.metadata&&rt(t,this.metadata.B()),F(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};function Hu(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[ea]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-b())/1e3;var r=new mu(e,n,t);return t.providerData&&F(t.providerData,function(t){t&&Nu(r,Wi(t))}),t.redirectEventId&&(r.Z=t.redirectEventId),r}var zu={name:"redirectUser",C:"session"};function qu(t){return Ms(t.b,zu,t.a)}function Xu(t,e){this.a=t,this.b=e||Is(),this.c=null,this.f=function(t){var e=Zu("local"),n=Zu("session"),r=Zu("none");return t.b.get(n,t.a).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Ku,t.a).then(function(t){return t?Zu(t):e})})})}).then(function(e){return t.c=e,Qu(t,e.C)}).s(function(){t.c||(t.c=e)})}(this),Ds(this.b,Zu("local"),this.a,m(this.g,this))}Xu.prototype.g=function(){var t=this,e=Zu("local");ec(this,function(){return Bt().then(function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null}).then(function(n){if(n)return Qu(t,"local").then(function(){t.c=e})})})};function Qu(t,e){var n,r=[];for(n in Os)Os[n]!==e&&r.push(Ms(t.b,Zu(Os[n]),t.a));return r.push(Ms(t.b,Ku,t.a)),i=r,new Mt(function(t,e){var n=i.length,r=[];if(n)for(var o,a=function(e,i){n--,r[e]=i,0==n&&t(r)},s=function(t){e(t)},u=0;u<i.length;u++)o=i[u],Gt(o,y(a,u),s);else t(r)});var i}var Ku={name:"persistence",C:"session"};function Zu(t){return{name:"authUser",C:t}}Xu.prototype.eb=function(t){var e=null,n=this;return function(t){var e=new Zi("invalid-persistence-type"),n=new Zi("unsupported-persistence-type");t:{for(r in Os)if(Os[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(pi()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!Ci()&&"none"!==t)throw n}}(t),ec(this,function(){return t!=n.c.C?n.b.get(n.c,n.a).then(function(r){return e=r,Qu(n,t)}).then(function(){if(n.c=Zu(t),e)return n.b.set(n.c,e,n.a)}):Bt()})};function Ju(t,e){return ec(t,function(){return t.b.set(t.c,e.B(),t.a)})}function $u(t){return ec(t,function(){return Ms(t.b,t.c,t.a)})}function tc(t,e){return ec(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Hu(t||{})})})}function ec(t,e){return t.f=t.f.then(e,e),t.f}function nc(t){if(this.l=!1,Vi(this,"app",t),!cc(this).options||!cc(this).options.apiKey)throw new Zi("invalid-api-key");t=e.SDK_VERSION?yi(e.SDK_VERSION):null,this.c=new $o(cc(this).options&&cc(this).options.apiKey,Ka(Za),t),this.N=[],this.m=[],this.I=[],this.Kb=e.INTERNAL.createSubscribe(m(this.ac,this)),this.R=void 0,this.Lb=e.INTERNAL.createSubscribe(m(this.bc,this)),sc(this,null),this.h=new Xu(cc(this).options.apiKey+":"+cc(this).name),this.G=new function(t){this.a=t,this.b=Is()}(cc(this).options.apiKey+":"+cc(this).name),this.U=pc(this,function(t){var e=cc(t).options.authDomain,n=function(t){var e=(n=t.G,r=cc(t).options.authDomain,n.b.get(zu,n.a).then(function(t){return t&&r&&(t.authDomain=r),Hu(t||{})})).then(function(e){return(t.w=e)&&(e.ca=t.G),qu(t.G)});var n,r;return pc(t,e)}(t).then(function(){return tc(t.h,e)}).then(function(e){return e?(e.ca=t.G,t.w&&(t.w.Z||null)==(e.Z||null)?e:e.reload().then(function(){return Ju(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:$u(t.h)})):null}).then(function(e){sc(t,e||null)});return pc(t,n)}(this)),this.i=pc(this,(n=this,n.U.then(function(){return n.aa()}).s(function(){}).then(function(){if(!n.l)return n.ha()}).s(function(){}).then(function(){if(!n.l){n.W=!0;var t=n.h;Ds(t.b,Zu("local"),t.a,n.ha)}})));var n;this.W=!1,this.ha=m(this.yc,this),this.Ga=m(this.ka,this),this.pa=m(this.Tb,this),this.qa=m(this.Zb,this),this.ra=m(this.$b,this),function(t){var e=cc(t).options.authDomain,n=cc(t).options.apiKey;e&&Ei()&&(t.Jb=t.U.then(function(){if(!t.l){if(t.a=nu(e,n,cc(t).name),t.a.subscribe(t),lc(t)&&xu(lc(t)),t.w){xu(t.w);var r=t.w;r.na(t.$()),yu(r,t),bu(r=t.w,t.A),wu(r,t),t.w=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.gc,this),this.o=0,cn.call(this),r=this,Object.defineProperty(r,"lc",{get:function(){return this.$()},set:function(t){this.na(t)},enumerable:!1}),r.V=null;var r;this.A=[]}w(nc,cn);function rc(t){Fe.call(this,"languageCodeChanged"),this.h=t}w(rc,Fe);function ic(t){Fe.call(this,"frameworkChanged"),this.f=t}w(ic,Fe),(t=nc.prototype).eb=function(t){return pc(this,t=this.h.eb(t))},t.na=function(t){this.V===t||this.l||(this.V=t,aa(this.c,this.V),ln(this,new rc(this.$())))},t.$=function(){return this.V},t.Ec=function(){var t=i.navigator;this.na(t?t.languages&&t.languages[0]||t.language||t.userLanguage||null:null)},t.gc=function(t){this.A.push(t),sa(this.c,e.SDK_VERSION?yi(e.SDK_VERSION,this.A):null),ln(this,new ic(this.A))},t.Ka=function(){return H(this.A)};t.toJSON=function(){return{apiKey:cc(this).options.apiKey,authDomain:cc(this).options.authDomain,appName:cc(this).name,currentUser:lc(this)&&lc(this).B()}};function oc(t){return t.Jb||Wt(new Zi("auth-domain-config-required"))}t.ob=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.fa=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.va=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.Sb,this):null},t.Sb=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.b&&(this.b.cancel(),this.b=null);var r=null,i=null,o=ma(n.c,t).then(function(t){return r=Ho(t),i=vo(t),t});return pc(this,t=n.U.then(function(){return o}).then(function(t){return ac(n,t)}).then(function(){return Wi({user:lc(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}))},t.wc=function(t){if(!Ei())return Wt(new Zi("operation-not-supported-in-this-environment"));var n=this,r=go(t.providerId),i=Ti(),o=null;(!Si()||di())&&cc(this).options.authDomain&&t.isOAuthProvider&&(o=ls(cc(this).options.authDomain,cc(this).options.apiKey,cc(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null));var a=ui(o,r&&r.za,r&&r.ya);return pc(this,r=oc(this).then(function(e){return $s(e,a,"signInViaPopup",t,i,!!o)}).then(function(){return new Mt(function(t,e){n.fa("signInViaPopup",null,new Zi("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.b=n.a.Ca(n,"signInViaPopup",a,i)})}).then(function(t){return a&&si(a),t?Wi(t):null}).s(function(t){throw a&&si(a),t}))},t.xc=function(t){if(!Ei())return Wt(new Zi("operation-not-supported-in-this-environment"));var e=this;return pc(this,oc(this).then(function(){return ec(t=e.h,function(){return t.b.set(Ku,t.c.C,t.a)});var t}).then(function(){return e.a.Aa("signInViaRedirect",t)}))},t.aa=function(){if(!Ei())return Wt(new Zi("operation-not-supported-in-this-environment"));var t=this;return pc(this,oc(this).then(function(){return t.a.aa()}).then(function(t){return t?Wi(t):null}))};function ac(t,e){var n={};return n.apiKey=cc(t).options.apiKey,n.authDomain=cc(t).options.authDomain,n.appName=cc(t).name,t.U.then(function(){return function(t,e,n,r){var i=new mu(t,e);return n&&(i.ca=n),r&&bu(i,r),i.reload().then(function(){return i})}(n,e,t.G,t.Ka())}).then(function(e){return lc(t)&&e.uid==lc(t).uid?(Du(lc(t),e),t.ka(e)):(sc(t,e),xu(e),t.ka(e))}).then(function(){dc(t)})}function sc(t,e){lc(t)&&(n=lc(t),r=t.Ga,G(n.N,function(t){return t==r}),$e(lc(t),"tokenChanged",t.pa),$e(lc(t),"userDeleted",t.qa),$e(lc(t),"userInvalidated",t.ra),Pu(lc(t)));var n,r;e&&(e.N.push(t.Ga),Ke(e,"tokenChanged",t.pa),Ke(e,"userDeleted",t.qa),Ke(e,"userInvalidated",t.ra),0<t.o&&Eu(e)),Vi(t,"currentUser",e),e&&(e.na(t.$()),yu(e,t),bu(e,t.A),wu(e,t))}t.hb=function(){var t=this;return pc(this,this.i.then(function(){return lc(t)?(sc(t,null),$u(t.h).then(function(){dc(t)})):Bt()}))};t.yc=function(){var t=this;return tc(this.h,cc(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=lc(t)&&e){n=lc(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Du(lc(t),e),lc(t).F();(lc(t)||e)&&(sc(t,e),e&&(xu(e),e.ca=t.G),t.a&&t.a.subscribe(t),dc(t))}})},t.ka=function(t){return Ju(this.h,t)},t.Tb=function(){dc(this),this.ka(lc(this))},t.Zb=function(){this.hb()},t.$b=function(){this.hb()};function uc(t,e){var n=null,r=null;return pc(t,e.then(function(e){return n=Ho(e),r=vo(e),ac(t,e)}).then(function(){return Wi({user:lc(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}t.ac=function(t){var e=this;this.addAuthTokenListener(function(){t.next(lc(e))})},t.bc=function(t){var e=this;r=function(){t.next(lc(e))},(n=this).I.push(r),pc(n,n.i.then(function(){!n.l&&B(n.I,r)&&n.R!==n.getUid()&&(n.R=n.getUid(),r(hc(n)))}));var n,r},t.ic=function(t,n,r){var i=this;return this.W&&e.Promise.resolve().then(function(){d(t)?t(lc(i)):d(t.next)&&t.next(lc(i))}),this.Kb(t,n,r)},t.hc=function(t,n,r){var i=this;return this.W&&e.Promise.resolve().then(function(){i.R=i.getUid(),d(t)?t(lc(i)):d(t.next)&&t.next(lc(i))}),this.Lb(t,n,r)},t.Vb=function(t){var e=this;return pc(this,this.i.then(function(){return lc(e)?lc(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.tc=function(t){return this.Eb(t).then(function(t){return t.user})},t.Eb=function(t){var e=this;return this.i.then(function(){return uc(e,za(e.c,Ba,{token:t}))}).then(function(t){var n=t.user;return Mu(n,"isAnonymous",!1),e.ka(n),t})},t.Fb=function(t,e){var n=this;return this.i.then(function(){return uc(n,za(n.c,Wa,{email:t,password:e}))})},t.uc=function(t,e){return this.Fb(t,e).then(function(t){return t.user})},t.Ob=function(t,e){return this.qb(t,e).then(function(t){return t.user})},t.qb=function(t,e){var n=this;return this.i.then(function(){return uc(n,za(n.c,Pa,{email:t,password:e}))})},t.sc=function(t){return this.fb(t).then(function(t){return t.user})},t.fb=function(t){var e=this;return this.i.then(function(){return uc(e,t.wa(e.c))})},t.gb=function(){return this.Gb().then(function(t){return t.user})},t.Gb=function(){var t=this;return this.i.then(function(){var e=lc(t);if(e&&e.isAnonymous){return Wi({user:e,credential:null,additionalUserInfo:Wi({providerId:null,isNewUser:!1}),operationType:"signIn"})}return uc(t,t.c.gb()).then(function(e){var n=e.user;return Mu(n,"isAnonymous",!0),t.ka(n),e})})};function cc(t){return t.app}function lc(t){return t.currentUser}t.getUid=function(){return lc(this)&&lc(this).uid||null};function hc(t){return lc(t)&&lc(t)._lat||null}function dc(t){if(t.W){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](hc(t));if(t.R!==t.getUid()&&t.I.length)for(t.R=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](hc(t))}}t.Mb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&lc(this)&&Eu(lc(this))},t.qc=function(t){var e=this;F(this.m,function(n){n==t&&e.o--}),0>this.o&&(this.o=0),0==this.o&&lc(this)&&Pu(lc(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),pc(this,this.i.then(function(){e.l||B(e.m,t)&&t(hc(e))}))},t.removeAuthTokenListener=function(t){G(this.m,function(e){return e==t})};t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h,Ls(t.b,t.a,this.ha)),this.a&&this.a.unsubscribe(this),e.Promise.resolve()};function pc(t,e){return t.N.push(e),Yt(e,function(){W(t.N,e)}),e}t.Rb=function(t){return pc(this,za(this.c,Aa,{identifier:t,continueUri:Pi()?ii():"http://localhost"}).then(function(t){return t.allProviders||[]}))},t.Fc=function(t){return this.Ia(t).then(function(t){return t.data.email})},t.Ta=function(t,e){return pc(this,this.c.Ta(t,e).then(function(){}))},t.Ia=function(t){return pc(this,this.c.Ia(t).then(function(t){return new function(t){var e={},n=t[Yi],r=t[Hi];if(t=t[zi],!n||!t)throw Error("Invalid provider user info!");e[Xi]=r||null,e[qi]=n,Vi(this,Ki,t),Vi(this,Qi,Gi(e))}(t)}))},t.Sa=function(t){return pc(this,this.c.Sa(t).then(function(){}))},t.cb=function(t,e){var n=this;return pc(this,Bt().then(function(){return void 0===e||$(e)?{}:lo(new eo(e))}).then(function(e){return n.c.cb(t,e)}).then(function(){}))},t.vc=function(t,e){return pc(this,cu(this,t,e,m(this.fb,this)))};function fc(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Zi("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=_c.length)throw new Zi("internal-error","Argument validator received an unsupported number of arguments.");n=_c[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Zi("argument-error",t+" failed: "+r)}var _c="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function gc(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:o}}function vc(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:a}}function mc(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function yc(t,e){return{name:t||"",K:"a function",optional:!!e,M:d}}function bc(t,e){return{name:t||"",K:"null",optional:!!e,M:c}}function wc(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.wa||!n)}}}function Cc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&o(t.type)&&d(t.verify))}}}function Ec(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Pc(t,e,n,r,o,a){if(Vi(this,"type","recaptcha"),this.b=this.c=null,this.m=!1,this.l=e,this.a=n||{theme:"light",type:"image"},this.g=[],this.a[xc])throw new Zi("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Oc],!we(e)||!this.h&&we(e).hasChildNodes())throw new Zi("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new $o(t,a||null,o||null),this.o=r||function(){return null};var s=this;this.i=[];var u=this.a[Ac];this.a[Ac]=function(t){if(kc(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=wi(u,i);"function"==typeof e&&e(t)}};var c=this.a[Sc];this.a[Sc]=function(){if(kc(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=wi(c,i);"function"==typeof t&&t()}}}var Ac="callback",Sc="expired-callback",xc="sitekey",Oc="size";function kc(t,e){for(var n=0;n<t.i.length;n++)try{t.i[n](e)}catch(t){}}function Tc(t,e){return t.g.push(e),Yt(e,function(){W(t.g,e)}),e}(t=Pc.prototype).xa=function(){var t=this;return this.c?this.c:this.c=Tc(this,Bt().then(function(){if(Pi())return li();throw new Zi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e=Mc(),n=t.o(),new Mt(function(t,r){if(Ri())if(!i.grecaptcha||n!==e.c&&!e.b){i[e.a]=function(){if(i.grecaptcha){e.c=n;var o=i.grecaptcha.render;i.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},t()}else r(new Zi("internal-error"));delete i[e.a]};var o=ue(Nc,{onload:e.a,hl:n||""});Bt(Xr(o)).s(function(){r(new Zi("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else t();else r(new Zi("network-request-failed"))});var e,n}).then(function(){return za(t.u,Na,{})}).then(function(e){t.a[xc]=e.recaptchaSiteKey}).s(function(e){throw t.c=null,e}))},t.render=function(){Ic(this);var t=this;return Tc(this,this.xa().then(function(){if(null===t.b){var e=t.l;if(!t.h){var n=we(e);e=Pe("DIV"),n.appendChild(e)}t.b=grecaptcha.render(e,t.a)}return t.b}))},t.verify=function(){Ic(this);var t=this;return Tc(this,this.render().then(function(e){return new Mt(function(n){var r=grecaptcha.getResponse(e);if(r)n(r);else{var i=function(e){e&&(r=t,o=i,G(r.i,function(t){return t==o}),n(e));var r,o};t.i.push(i),t.h&&grecaptcha.execute(t.b)}})}))},t.reset=function(){Ic(this),null!==this.b&&grecaptcha.reset(this.b)};function Ic(t){if(t.m)throw new Zi("internal-error","RecaptchaVerifier instance has been destroyed.")}t.clear=function(){Ic(this),this.m=!0,Mc().b--;for(var t=0;t<this.g.length;t++)this.g[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=we(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}};var Nc=oe("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}");var Rc=null;function Mc(){return Rc||(Rc=new function(){this.b=i.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}),Rc}function Dc(t,n,r){try{this.f=r||e.app()}catch(t){throw new Zi("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new Zi("invalid-api-key");r=this.f.options.apiKey;var i=this,o=null;try{o=this.f.auth().Ka()}catch(t){}o=e.SDK_VERSION?yi(e.SDK_VERSION,o):null,Pc.call(this,r,t,n,function(){try{var t=i.f.auth().$()}catch(e){t=null}return t},o,Ka(Za))}w(Dc,Pc);function Lc(t,e){for(var n in e){var r=e[n].name;t[r]=Fc(r,t[n],e[n].j)}}function jc(t,e,n,r){t[e]=Fc(e,n,r)}function Fc(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return fc(a,n,t),e.apply(this,t)}if(!n)return e;var i,o,a=(o=t,(o=o.split("."))[o.length-1]);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Lc(nc.prototype,{Sa:{name:"applyActionCode",j:[gc("code")]},Ia:{name:"checkActionCode",j:[gc("code")]},Ta:{name:"confirmPasswordReset",j:[gc("code"),gc("newPassword")]},Ob:{name:"createUserWithEmailAndPassword",j:[gc("email"),gc("password")]},qb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[gc("email"),gc("password")]},Rb:{name:"fetchProvidersForEmail",j:[gc("email")]},aa:{name:"getRedirectResult",j:[]},hc:{name:"onAuthStateChanged",j:[Ec(mc(),yc(),"nextOrObserver"),yc("opt_error",!0),yc("opt_completed",!0)]},ic:{name:"onIdTokenChanged",j:[Ec(mc(),yc(),"nextOrObserver"),yc("opt_error",!0),yc("opt_completed",!0)]},cb:{name:"sendPasswordResetEmail",j:[gc("email"),Ec(mc("opt_actionCodeSettings",!0),bc(null,!0),"opt_actionCodeSettings",!0)]},eb:{name:"setPersistence",j:[gc("persistence")]},fb:{name:"signInAndRetrieveDataWithCredential",j:[wc()]},gb:{name:"signInAnonymously",j:[]},Gb:{name:"signInAnonymouslyAndRetrieveData",j:[]},sc:{name:"signInWithCredential",j:[wc()]},tc:{name:"signInWithCustomToken",j:[gc("token")]},Eb:{name:"signInAndRetrieveDataWithCustomToken",j:[gc("token")]},uc:{name:"signInWithEmailAndPassword",j:[gc("email"),gc("password")]},Fb:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[gc("email"),gc("password")]},vc:{name:"signInWithPhoneNumber",j:[gc("phoneNumber"),Cc()]},wc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},xc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},hb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[gc(null,!0)]},Ec:{name:"useDeviceLanguage",j:[]},Fc:{name:"verifyPasswordResetCode",j:[gc("code")]}}),function(t,e){for(var n in e){var r=e[n].name;if(r!==n){var i=e[n].Nb;Object.defineProperty(t,r,{get:function(){return this[n]},set:function(t){fc(r,[i],[t],!0),this[n]=t},enumerable:!0})}}}(nc.prototype,{lc:{name:"languageCode",Nb:Ec(gc(),bc(),"languageCode")}}),nc.Persistence=Os,nc.Persistence.LOCAL="local",nc.Persistence.SESSION="session",nc.Persistence.NONE="none",Lc(mu.prototype,{delete:{name:"delete",j:[]},F:{name:"getIdToken",j:[vc()]},getToken:{name:"getToken",j:[vc()]},Xa:{name:"linkAndRetrieveDataWithCredential",j:[wc()]},cc:{name:"linkWithCredential",j:[wc()]},dc:{name:"linkWithPhoneNumber",j:[gc("phoneNumber"),Cc()]},ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Za:{name:"reauthenticateAndRetrieveDataWithCredential",j:[wc()]},mc:{name:"reauthenticateWithCredential",j:[wc()]},nc:{name:"reauthenticateWithPhoneNumber",j:[gc("phoneNumber"),Cc()]},oc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},pc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},bb:{name:"sendEmailVerification",j:[Ec(mc("opt_actionCodeSettings",!0),bc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[gc(null,!0)]},Cc:{name:"unlink",j:[gc("provider")]},kb:{name:"updateEmail",j:[gc("email")]},lb:{name:"updatePassword",j:[gc("password")]},Dc:{name:"updatePhoneNumber",j:[wc("phone")]},mb:{name:"updateProfile",j:[mc("profile")]}}),Lc(Mt.prototype,{s:{name:"catch"},then:{name:"then"}}),Lc(uu.prototype,{confirm:{name:"confirm",j:[gc("verificationCode")]}}),jc(Vo,"credential",function(t,e){return new Uo(t,e)},[gc("email"),gc("password")]),Lc(Io.prototype,{sa:{name:"addScope",j:[gc("scope")]},Ba:{name:"setCustomParameters",j:[mc("customOAuthParameters")]}}),jc(Io,"credential",No,[Ec(gc(),mc(),"token")]),Lc(Ro.prototype,{sa:{name:"addScope",j:[gc("scope")]},Ba:{name:"setCustomParameters",j:[mc("customOAuthParameters")]}}),jc(Ro,"credential",Mo,[Ec(gc(),mc(),"token")]),Lc(Do.prototype,{sa:{name:"addScope",j:[gc("scope")]},Ba:{name:"setCustomParameters",j:[mc("customOAuthParameters")]}}),jc(Do,"credential",Lo,[Ec(gc(),Ec(mc(),bc()),"idToken"),Ec(gc(),bc(),"accessToken",!0)]),Lc(jo.prototype,{Ba:{name:"setCustomParameters",j:[mc("customOAuthParameters")]}}),jc(jo,"credential",Fo,[Ec(gc(),mc(),"token"),gc("secret",!0)]),Lc(To.prototype,{sa:{name:"addScope",j:[gc("scope")]},credential:{name:"credential",j:[Ec(gc(),bc(),"idToken",!0),Ec(gc(),bc(),"accessToken",!0)]},Ba:{name:"setCustomParameters",j:[mc("customOAuthParameters")]}}),jc(Go,"credential",Yo,[gc("verificationId"),gc("verificationCode")]),Lc(Go.prototype,{Qa:{name:"verifyPhoneNumber",j:[gc("phoneNumber"),Cc()]}}),Lc(Zi.prototype,{toJSON:{name:"toJSON",j:[gc(null,!0)]}}),Lc(Ko.prototype,{toJSON:{name:"toJSON",j:[gc(null,!0)]}}),Lc(Qo.prototype,{toJSON:{name:"toJSON",j:[gc(null,!0)]}}),Lc(Dc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===e||!e.INTERNAL||!e.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:nc,Error:Zi};jc(t,"EmailAuthProvider",Vo,[]),jc(t,"FacebookAuthProvider",Io,[]),jc(t,"GithubAuthProvider",Ro,[]),jc(t,"GoogleAuthProvider",Do,[]),jc(t,"TwitterAuthProvider",jo,[]),jc(t,"OAuthProvider",To,[gc("providerId")]),jc(t,"PhoneAuthProvider",Go,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof nc)}}]),jc(t,"RecaptchaVerifier",Dc,[Ec(gc(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),mc("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e.app.App)}}]),e.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:m((t=new nc(t)).getUid,t),getToken:m(t.Vb,t),addAuthTokenListener:m(t.Mb,t),removeAuthTokenListener:m(t.qc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),e.INTERNAL.extendNamespace({User:mu})}()}).call(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(e,n(42))},function(t,e,n){t.exports=n(146)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(65);e.Database=i.Database;var o=n(69);e.Query=o.Query;var a=n(44);e.Reference=a.Reference;var s=n(1);e.enableLogging=s.enableLogging;var u=n(49),c=n(178),l=n(179),h=n(0),d=i.Database.ServerValue;e.ServerValue=d;function p(e){var n=e.INTERNAL.registerService("database",function(t,e,n){return u.RepoManager.getInstance().databaseFromApp(t,n)},{Reference:a.Reference,Query:o.Query,Database:i.Database,enableLogging:s.enableLogging,INTERNAL:c,ServerValue:d,TEST_ACCESS:l},null,!0);h.isNodeSdk()&&(t.exports=n)}e.registerDatabase=p,p(r.default);var f=n(45);e.DataSnapshot=f.DataSnapshot;var _=n(68);e.OnDisconnect=_.OnDisconnect},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),r.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:r.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}();e.DOMStorageWrapper=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return r.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}();e.MemoryStorage=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return r.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();e.TransactionResult=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);e.nextPushId=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(i){var o=i===e;e=i;var a,s=new Array(8);for(a=7;a>=0;a--)s[a]=t.charAt(i%64),i=Math.floor(i/64);r.assert(0===i,"Cannot push at time == 0");var u=s.join("");if(o){for(a=11;a>=0&&63===n[a];a--)n[a]=0;n[a]++}else for(a=0;a<12;a++)n[a]=Math.floor(64*Math.random());for(a=0;a<12;a++)u+=t.charAt(n[a]);return r.assert(20===u.length,"nextPushId: Length should be 20."),u}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(45),i=n(152),o=n(0),a=n(0),s=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new i.DataEvent("value",this,new r.DataSnapshot(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new i.CancelEvent(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}();e.ValueEventRegistration=s;var u=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,o.contains(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new i.CancelEvent(this,t,e):null},t.prototype.createEvent=function(t,e){a.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),o=e.getQueryParams().getIndex();return new i.DataEvent(t.type,this,new r.DataSnapshot(t.snapshotNode,n,o),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=o.getCount(e.callbacks_);if(n===o.getCount(this.callbacks_)){if(1===n){var r=o.getAnyKey(e.callbacks_),i=o.getAnyKey(this.callbacks_);return!(i!==r||e.callbacks_[r]&&this.callbacks_[i]&&e.callbacks_[r]!==this.callbacks_[i])}return o.every(this.callbacks_,function(t,n){return e.callbacks_[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();e.ChildEventRegistration=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+r.stringify(this.snapshot.exportVal())},t}();e.DataEvent=i;var o=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}();e.CancelEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(154),a=n(5),s=n(0),u=n(46),c=n(155),l=n(156),h=n(13),d=n(79),p=n(2),f=n(80),_=n(162),g=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=u.ImmutableTree.Empty,this.pendingWriteTree_=new _.WriteTree,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new d.Overwrite(h.OperationSource.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=u.ImmutableTree.fromObject(e);return this.applyOperationToSyncPoints_(new l.Merge(h.OperationSource.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=u.ImmutableTree.Empty;return null!=n.snap?r=r.set(p.Path.Empty,!0):s.forEach(n.children,function(t,e){r=r.set(new p.Path(t),e)}),this.applyOperationToSyncPoints_(new o.AckUserWrite(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new d.Overwrite(h.OperationSource.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=u.ImmutableTree.fromObject(e);return this.applyOperationToSyncPoints_(new l.Merge(h.OperationSource.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new c.ListenComplete(h.OperationSource.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=p.Path.relativePath(a,e),c=new d.Overwrite(h.OperationSource.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,c=p.Path.relativePath(a,e),d=u.ImmutableTree.fromObject(n),f=new l.Merge(h.OperationSource.forServerTaggedQuery(s),c,d);return this.applyTaggedOperation_(a,f)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=p.Path.relativePath(o,e),u=new c.ListenComplete(h.OperationSource.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var i=e.path,o=null,s=!1;this.syncPointTree_.foreachOnPath(i,function(t,e){var n=p.Path.relativePath(t,i);o=o||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var u=this.syncPointTree_.get(i);u?(s=s||u.hasCompleteView(),o=o||u.getCompleteServerCache(p.Path.Empty)):(u=new f.SyncPoint,this.syncPointTree_=this.syncPointTree_.set(i,u));var c;if(null!=o)c=!0;else{c=!1,o=a.ChildrenNode.EMPTY_NODE;this.syncPointTree_.subtree(i).foreachChild(function(t,e){var n=e.getCompleteServerCache(p.Path.Empty);n&&(o=o.updateImmediateChild(t,n))})}var l=u.viewExistsForQuery(e);if(!l&&!e.getQueryParams().loadsAllData()){var h=t.makeQueryKey_(e);r.assert(!(h in this.queryToTagMap_),"View does not exist, but we have a tag");var d=t.getNextQueryTag_();this.queryToTagMap_[h]=d,this.tagToQueryMap_["_"+d]=h}var _=this.pendingWriteTree_.childWrites(i),g=u.addEventRegistration(e,n,_,o,c);if(!l&&!s){var v=u.viewForQuery(e);g=g.concat(this.setupListener_(e,v))}return g},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(d),f=0;f<p.length;++f){var _=p[f],g=_.getQuery(),v=this.createListenerForView_(_);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),v.hashFn,v.onComplete)}}if(!h&&c.length>0&&!r)if(l){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach(function(e){var n=i.queryToTagMap_[t.makeQueryKey_(e)];i.listenProvider_.stopListening(t.queryForListening_(e),n)});this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=p.Path.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView()){return[e.getCompleteView()]}var r=[];return e&&(r=e.getQueryViews()),s.forEach(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var i=e.path,o=this.tagForQuery_(e),a=this.createListenerForView_(n),u=this.listenProvider_.startListening(t.queryForListening_(e),o,a.hashFn,a.onComplete),c=this.syncPointTree_.subtree(i);if(o)r.assert(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),s.forEach(n,function(t,e){r=r.concat(e)}),r}),h=0;h<l.length;++h){var d=l[h];this.listenProvider_.stopListening(t.queryForListening_(d),this.tagForQuery_(d))}return u},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||a.ChildrenNode.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var o=i.errorForServerCode(t,n);return e.removeEventRegistration(n,null,o)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return r.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new p.Path(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return s.safeGet(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);r.assert(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,i,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(p.Path.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(p.Path.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(p.Path.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(p.Path.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(p.Path.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}();e.SyncTree=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(13),a=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=o.OperationType.ACK_USER_WRITE,this.source=o.OperationSource.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return r.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new i.Path(e));return new t(i.Path.Empty,n,this.revert)}return r.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}();e.AckUserWrite=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(13),o=function(){function t(t,e){this.source=t,this.path=e,this.type=i.OperationType.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,r.Path.Empty):new t(this.source,this.path.popFront())},t}();e.ListenComplete=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=n(79),o=n(2),a=n(0),s=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=r.OperationType.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new o.Path(e));return n.isEmpty()?null:n.value?new i.Overwrite(this.source,o.Path.Empty,n.value):new t(this.source,o.Path.Empty,n)}return a.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}();e.Merge=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(47),i=n(158),o=n(5),a=n(32),s=n(81),u=n(161),c=n(0),l=n(13),h=n(16),d=n(4),p=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),c=new r.IndexedFilter(n.getIndex()),l=n.getNodeFilter();this.processor_=new i.ViewProcessor(l);var h=e.getServerCache(),d=e.getEventCache(),p=c.updateFullNode(o.ChildrenNode.EMPTY_NODE,h.getNode(),null),f=l.updateFullNode(o.ChildrenNode.EMPTY_NODE,d.getNode(),null),_=new a.CacheNode(p,h.isFullyInitialized(),c.filtersNodes()),g=new a.CacheNode(f,d.isFullyInitialized(),l.filtersNodes());this.viewCache_=new s.ViewCache(g,_),this.eventGenerator_=new u.EventGenerator(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){c.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===l.OperationType.MERGE&&null!==t.source.queryId&&(c.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),c.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),c.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];if(!e.getNode().isLeafNode()){e.getNode().forEachChild(d.PRIORITY_INDEX,function(t,e){n.push(h.Change.childAddedChange(t,e))})}return e.isFullyInitialized()&&n.push(h.Change.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}();e.View=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=n(0),o=n(159),a=n(16),s=n(5),u=n(21),c=n(46),l=n(2),h=n(160),d=function(){return function(t,e){this.viewCache=t,this.changes=e}}();e.ProcessorResult=d;var p=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){i.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),i.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,a,s){var u,c,l=new o.ChildChangeAccumulator;if(n.type===r.OperationType.OVERWRITE){var h=n;h.source.fromUser?u=this.applyUserOverwrite_(e,h.path,h.snap,a,s,l):(i.assert(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.getServerCache().isFiltered()&&!h.path.isEmpty(),u=this.applyServerOverwrite_(e,h.path,h.snap,a,s,c,l))}else if(n.type===r.OperationType.MERGE){var p=n;p.source.fromUser?u=this.applyUserMerge_(e,p.path,p.children,a,s,l):(i.assert(p.source.fromServer,"Unknown source."),c=p.source.tagged||e.getServerCache().isFiltered(),u=this.applyServerMerge_(e,p.path,p.children,a,s,c,l))}else if(n.type===r.OperationType.ACK_USER_WRITE){var f=n;u=f.revert?this.revertUserWrite_(e,f.path,a,s,l):this.ackUserWrite_(e,f.path,f.affectedTree,a,s,l)}else{if(n.type!==r.OperationType.LISTEN_COMPLETE)throw i.assertionError("Unknown operation type: "+n.type);u=this.listenComplete_(e,n.path,a,l)}var _=l.getChanges();return t.maybeAddValueEvent_(e,u,_),new d(u,_)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(a.Change.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,o){var a=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var u=void 0,c=void 0;if(e.isEmpty())if(i.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var l=t.getCompleteServerSnap(),h=l instanceof s.ChildrenNode?l:s.ChildrenNode.EMPTY_NODE,d=n.calcCompleteEventChildren(h);u=this.filter_.updateFullNode(t.getEventCache().getNode(),d,o)}else{var p=n.calcCompleteEventCache(t.getCompleteServerSnap());u=this.filter_.updateFullNode(t.getEventCache().getNode(),p,o)}else{var f=e.getFront();if(".priority"==f){i.assert(1==e.getLength(),"Can't have a priority with additional path components");var _=a.getNode();c=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,_,c);u=null!=g?this.filter_.updatePriority(_,g):a.getNode()}else{var v=e.popFront(),m=void 0;if(a.isCompleteForChild(f)){c=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,a.getNode(),c);m=null!=y?a.getNode().getImmediateChild(f).updateChild(v,y):a.getNode().getImmediateChild(f)}else m=n.calcCompleteChild(f,t.getServerCache());u=null!=m?this.filter_.updateChild(a.getNode(),f,m,v,r,o):a.getNode()}}return t.updateEventSnap(u,a.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var d=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var p=e.popFront(),f=u.getNode().getImmediateChild(d).updateChild(p,n);s=".priority"==d?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),d,f,p,h.NO_COMPLETE_CHILD_SOURCE,null)}var _=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new h.WriteTreeCompleteChildSource(r,_,i);return this.generateEventCacheAfterServerEvent_(_,e,r,g,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,u,c=t.getEventCache(),l=new h.WriteTreeCompleteChildSource(r,t,i);if(e.isEmpty())u=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(u,!0,this.filter_.filtersNodes());else{var d=e.getFront();if(".priority"===d)u=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(u,c.isFullyInitialized(),c.isFiltered());else{var p=e.popFront(),f=c.getNode().getImmediateChild(d),_=void 0;if(p.isEmpty())_=n;else{var g=l.getCompleteChild(d);_=null!=g?".priority"===p.getBack()&&g.getChild(p.parent()).isEmpty()?g:g.updateChild(p,n):s.ChildrenNode.EMPTY_NODE}if(f.equals(_))a=t;else{var v=this.filter_.updateChild(c.getNode(),d,_,p,l,o);a=t.updateEventSnap(v,c.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,h=t;u=e.isEmpty()?n:c.ImmutableTree.Empty.setTree(e,n);var d=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(d.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),c=s.applyMerge_(u,n);h=s.applyServerOverwrite_(h,new l.Path(e),c,r,i,o,a)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!d.hasChild(e)&&!u){var c=t.getServerCache().getNode().getImmediateChild(e),p=s.applyMerge_(c,n);h=s.applyServerOverwrite_(h,new l.Path(e),p,r,i,o,a)}}),h},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var h=c.ImmutableTree.Empty;return s.getNode().forEachChild(u.KEY_INDEX,function(t,e){h=h.set(new l.Path(t),e)}),this.applyServerMerge_(t,e,h,r,i,a,o)}return t}var d=c.ImmutableTree.Empty;return n.foreach(function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(d=d.set(t,s.getNode().getChild(r)))}),this.applyServerMerge_(t,e,d,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,h.NO_COMPLETE_CHILD_SOURCE,r)},t.prototype.revertUserWrite_=function(t,e,n,r,o){var a;if(null!=n.shadowingWrite(e))return t;var u=new h.WriteTreeCompleteChildSource(n,t,r),c=t.getEventCache().getNode(),d=void 0;if(e.isEmpty()||".priority"===e.getFront()){var p=void 0;if(t.getServerCache().isFullyInitialized())p=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var f=t.getServerCache().getNode();i.assert(f instanceof s.ChildrenNode,"serverChildren would be complete if leaf node"),p=n.calcCompleteEventChildren(f)}p=p,d=this.filter_.updateFullNode(c,p,o)}else{var _=e.getFront(),g=n.calcCompleteChild(_,t.getServerCache());null==g&&t.getServerCache().isCompleteForChild(_)&&(g=c.getImmediateChild(_)),(d=null!=g?this.filter_.updateChild(c,_,g,e.popFront(),u,o):t.getEventCache().getNode().hasChild(_)?this.filter_.updateChild(c,_,s.ChildrenNode.EMPTY_NODE,e.popFront(),u,o):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(a=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(d=this.filter_.updateFullNode(d,a,o))}return a=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(l.Path.Empty),t.updateEventSnap(d,a,this.filter_.filtersNodes())},t}();e.ViewProcessor=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(16),o=n(0),a=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;o.assert(e==i.Change.CHILD_ADDED||e==i.Change.CHILD_CHANGED||e==i.Change.CHILD_REMOVED,"Only child changes supported for tracking"),o.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var a=r.safeGet(this.changeMap_,n);if(a){var s=a.type;if(e==i.Change.CHILD_ADDED&&s==i.Change.CHILD_REMOVED)this.changeMap_[n]=i.Change.childChangedChange(n,t.snapshotNode,a.snapshotNode);else if(e==i.Change.CHILD_REMOVED&&s==i.Change.CHILD_ADDED)delete this.changeMap_[n];else if(e==i.Change.CHILD_REMOVED&&s==i.Change.CHILD_CHANGED)this.changeMap_[n]=i.Change.childRemovedChange(n,a.oldSnap);else if(e==i.Change.CHILD_CHANGED&&s==i.Change.CHILD_ADDED)this.changeMap_[n]=i.Change.childAddedChange(n,t.snapshotNode);else{if(e!=i.Change.CHILD_CHANGED||s!=i.Change.CHILD_CHANGED)throw o.assertionError("Illegal combination of changes: "+t+" occurred after "+a);this.changeMap_[n]=i.Change.childChangedChange(n,t.snapshotNode,a.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return r.getValues(this.changeMap_)},t}();e.ChildChangeAccumulator=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32),i=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}();e.NoCompleteChildSource_=i,e.NO_COMPLETE_CHILD_SOURCE=new i;var o=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new r.CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}();e.WriteTreeCompleteChildSource=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(16),o=n(0),a=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,o=[],a=[];return t.forEach(function(t){t.type===i.Change.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push(i.Change.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(o,i.Change.CHILD_REMOVED,t,n,e),this.generateEventsForType_(o,i.Change.CHILD_ADDED,t,n,e),this.generateEventsForType_(o,i.Change.CHILD_MOVED,a,n,e),this.generateEventsForType_(o,i.Change.CHILD_CHANGED,t,n,e),this.generateEventsForType_(o,i.Change.VALUE,t,n,e),o},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw o.assertionError("Should only compare child_ events.");var n=new r.NamedNode(t.childName,t.snapshotNode),i=new r.NamedNode(e.childName,e.snapshotNode);return this.index_.compare(n,i)},t}();e.EventGenerator=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(0),o=n(2),a=n(163),s=n(4),u=n(5),c=function(){function t(){this.visibleWrites_=a.CompoundWrite.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new l(t,this)},t.prototype.addOverwrite=function(t,e,n,r){i.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){i.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});i.assert(n>=0,"removeWrite called with nonexistent writeId.");var o=this.allWrites_[n];this.allWrites_.splice(n,1);for(var a=o.visible,s=!1,u=this.allWrites_.length-1;a&&u>=0;){var c=this.allWrites_[u];c.visible&&(u>=n&&this.recordContainsPath_(c,o.path)?a=!1:o.path.contains(c.path)&&(s=!0)),u--}if(a){if(s)return this.resetTree_(),!0;if(o.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(o.path);else{var l=o.children;r.forEach(l,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(o.path.child(t))})}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var a=this.visibleWrites_.childCompoundWrite(e);if(!i&&a.isEmpty())return n;if(i||null!=n||a.hasCompleteWrite(o.Path.Empty)){var s=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},c=t.layerTree_(this.allWrites_,s,e);d=n||u.ChildrenNode.EMPTY_NODE;return c.apply(d)}return null}var l=this.visibleWrites_.getCompleteNode(e);if(null!=l)return l;var h=this.visibleWrites_.childCompoundWrite(e);if(h.isEmpty())return n;if(null!=n||h.hasCompleteWrite(o.Path.Empty)){var d=n||u.ChildrenNode.EMPTY_NODE;return h.apply(d)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=u.ChildrenNode.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(s.PRIORITY_INDEX,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(s.PRIORITY_INDEX,function(t,e){var r=i.childCompoundWrite(new o.Path(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){i.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var o=t.child(e);if(this.visibleWrites_.hasCompleteWrite(o))return null;var a=this.visibleWrites_.childCompoundWrite(o);return a.isEmpty()?r.getChild(e):a.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);if(null!=i)return i;if(n.isCompleteForChild(e)){return this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e))}return null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,a){var s,u=this.visibleWrites_.childCompoundWrite(t),c=u.getCompleteNode(o.Path.Empty);if(null!=c)s=c;else{if(null==e)return[];s=u.apply(e)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),d=i?s.getReverseIteratorFrom(n,a):s.getIteratorFrom(n,a),p=d.getNext();p&&l.length<r;)0!==h(p,n)&&l.push(p),p=d.getNext();return l},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!r.findKey(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,o.Path.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var s=a.CompoundWrite.Empty,u=0;u<t.length;++u){var c=t[u];if(e(c)){var l=c.path,h=void 0;if(c.snap)n.contains(l)?(h=o.Path.relativePath(n,l),s=s.addWrite(h,c.snap)):l.contains(n)&&(h=o.Path.relativePath(l,n),s=s.addWrite(o.Path.Empty,c.snap.getChild(h)));else{if(!c.children)throw i.assertionError("WriteRecord should have .snap or .children");if(n.contains(l))h=o.Path.relativePath(n,l),s=s.addWrites(h,c.children);else if(l.contains(n))if((h=o.Path.relativePath(l,n)).isEmpty())s=s.addWrites(o.Path.Empty,c.children);else{var d=r.safeGet(c.children,h.getFront());if(d){var p=d.getChild(h.popFront());s=s.addWrite(o.Path.Empty,p)}}}}}return s},t}();e.WriteTree=c;var l=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}();e.WriteTreeRef=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(46),i=n(2),o=n(0),a=n(6),s=n(4),u=n(0),c=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new r.ImmutableTree(n));var o=this.writeTree_.findRootMostValueAndPath(e);if(null!=o){var a=o.path,s=o.value,u=i.Path.relativePath(a,e);return s=s.updateChild(u,n),new t(this.writeTree_.set(a,s))}var c=new r.ImmutableTree(n);return new t(this.writeTree_.setTree(e,c))},t.prototype.addWrites=function(t,e){var n=this;return o.forEach(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){if(e.isEmpty())return t.Empty;return new t(this.writeTree_.setTree(e,r.ImmutableTree.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(i.Path.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(s.PRIORITY_INDEX,function(e,n){t.push(new a.NamedNode(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new a.NamedNode(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new r.ImmutableTree(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(i.Path.Empty,this.writeTree_,e)},t.Empty=new t(new r.ImmutableTree(null)),t.applySubtreeWrite_=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(u.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t.applySubtreeWrite_(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},t}();e.CompoundWrite=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(){function t(){this.rootNode_=r.ChildrenNode.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();e.SnapshotHolder=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(r.log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',r.warn(t)},t}();e.AuthTokenProvider=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(0),o=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),i.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return r.deepCopy(this.counters_)},t}();e.StatsCollection=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(82),a=1e4,s=3e4,u=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new o.StatsListener(t);var n=a+(s-a)*Math.random();i.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},o=!1;r.forEach(e,function(e,i){i>0&&r.contains(t.statsToReport_,e)&&(n[e]=i,o=!0)}),o&&this.server_.reportStats(n),i.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();e.StatsReporter=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new o(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r){t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}}e&&(this.eventLists_=[]),this.recursionDepth_--},t}();e.EventQueue=i;var o=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();r.logger&&r.log("event: "+e.toString()),r.exceptionGuard(n)}}},t.prototype.getPath=function(){return this.path_},t}();e.EventList=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(84),o=n(0),a=function(t){r(e,t);function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return o.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(i.EventEmitter);e.VisibilityMonitor=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(84),a=n(0),s=function(t){r(e,t);function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||a.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return i.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(o.EventEmitter);e.OnlineMonitor=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(86),i=n(87),o=n(1),a=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[r.BrowserPollConnection,i.WebSocketConnection]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=i.WebSocketConnection&&i.WebSocketConnection.isAvailable(),r=n&&!i.WebSocketConnection.previouslyFailed();if(e.webSocketOnly&&(n||o.warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[i.WebSocketConnection];else{var a=this.transports_=[];o.each(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&a.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}();e.TransportManager=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=function(){var t=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var e=function(e){t[e]&&r.exceptionGuard(function(){n.onMessage_(t[e])})},i=0;i<t.length;++i)e(i);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++},o=this;this.pendingResponses[this.currentResponseNum];){if("break"===i())break}},t}();e.PacketReceiver=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),a=n(0),s=n(0),u=n(0),c=function(t){r(e,t);function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=o.logWrapper("p:rest:"),i.listens_={},i}return e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(i.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(t,e){var n=e;if(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),s.safeGet(o.listens_,u)===c){i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)}})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var c=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?"+u.querystring(e);r.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var t=null;if(l.status>=200&&l.status<300){try{t=a.jsonEval(l.responseText)}catch(t){o.warn("Failed to parse JSON response for "+c+": "+l.responseText)}n(null,t)}else 401!==l.status&&404!==l.status&&o.warn("Got unsuccessful REST response for "+c+" Status: "+l.status),n(l.status);n=null}},l.open("GET",c,!0),l.send()})},e}(n(88).ServerActions);e.ReadonlyRestClient=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(21),a=n(4),s=n(71),u=n(75),c=n(47),l=n(175),h=n(89),d=n(0),p=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=a.PRIORITY_INDEX}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:i.MIN_NAME},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:i.MAX_NAME},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return r.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==a.PRIORITY_INDEX&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==a.PRIORITY_INDEX},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new c.IndexedFilter(this.getIndex()):this.hasLimit()?new l.LimitedFilter(this):new h.RangedFilter(this)},t.prototype.toRestQueryStringParameters=function(){var e=t.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var i;return this.index_===a.PRIORITY_INDEX?i=e.PRIORITY_INDEX:this.index_===s.VALUE_INDEX?i=e.VALUE_INDEX:this.index_===o.KEY_INDEX?i=e.KEY_INDEX:(r.assert(this.index_ instanceof u.PathIndex,"Unrecognized index type!"),i=this.index_.toString()),n[e.ORDER_BY]=d.stringify(i),this.startSet_&&(n[e.START_AT]=d.stringify(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+d.stringify(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=d.stringify(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+d.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_),n},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}();e.QueryParams=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(89),i=n(5),o=n(6),a=n(0),s=n(16),u=function(){function t(t){this.rangedFilter_=new r.RangedFilter(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,a,s){return this.rangedFilter_.matches(new o.NamedNode(e,n))||(n=i.ChildrenNode.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,a,s):this.fullLimitUpdateChild_(t,e,n,a,s)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=i.ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=i.ChildrenNode.EMPTY_NODE.withIndex(this.index_);var o=void 0;o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;o.hasNext()&&a<this.limit_;){var s=o.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),a++}}else{r=(r=e.withIndex(this.index_)).updatePriority(i.ChildrenNode.EMPTY_NODE);var u=void 0,c=void 0,l=void 0;o=void 0;if(this.reverse_){o=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(t,e){return h(e,t)}}else o=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();a=0;for(var d=!1;o.hasNext();){s=o.getNext();!d&&l(u,s)<=0&&(d=!0);d&&a<this.limit_&&l(s,c)<=0?a++:r=r.updateImmediateChild(s.name,i.ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,u){var c;if(this.reverse_){var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else c=this.index_.getCompare();var h=t;a.assert(h.numChildren()==this.limit_,"");var d=new o.NamedNode(e,n),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),f=this.rangedFilter_.matches(d);if(h.hasChild(e)){for(var _=h.getImmediateChild(e),g=r.getChildAfterChild(this.index_,p,this.reverse_);null!=g&&(g.name==e||h.hasChild(g.name));)g=r.getChildAfterChild(this.index_,g,this.reverse_);var v=null==g?1:c(g,d);if(f&&!n.isEmpty()&&v>=0)return null!=u&&u.trackChildChange(s.Change.childChangedChange(e,n,_)),h.updateImmediateChild(e,n);null!=u&&u.trackChildChange(s.Change.childRemovedChange(e,_));var m=h.updateImmediateChild(e,i.ChildrenNode.EMPTY_NODE);return null!=g&&this.rangedFilter_.matches(g)?(null!=u&&u.trackChildChange(s.Change.childAddedChange(g.name,g.node)),m.updateImmediateChild(g.name,g.node)):m}return n.isEmpty()?t:f&&c(p,d)>=0?(null!=u&&(u.trackChildChange(s.Change.childRemovedChange(p.name,p.node)),u.trackChildChange(s.Change.childAddedChange(e,n))),h.updateImmediateChild(e,n).updateImmediateChild(p.name,i.ChildrenNode.EMPTY_NODE)):t},t}();e.LimitedFilter=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(44),a=n(45),s=n(2),u=n(177),c=n(4),l=n(1),h=n(76),d=n(12),p=n(0),f=n(22),_=n(5),g=n(31);(v=r=e.TransactionStatus||(e.TransactionStatus={}))[v.RUN=0]="RUN",v[v.SENT=1]="SENT",v[v.COMPLETED=2]="COMPLETED",v[v.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",v[v.NEEDS_ABORT=4]="NEEDS_ABORT";var v;g.Repo.MAX_TRANSACTION_RETRIES_=25,g.Repo.prototype.transactions_init_=function(){this.transactionQueueTree_=new u.Tree},g.Repo.prototype.startTransaction=function(t,e,n,s){this.log_("transaction on "+t);var u=function(){},g=new o.Reference(this,t);g.on("value",u);var v={path:t,update:e,onComplete:n,status:null,order:l.LUIDGenerator(),applyLocally:s,retryCount:0,unwatcher:function(){g.off("value",u)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=this.getLatestState_(t);v.currentInputSnapshot=m;var y=v.update(m.val());if(void 0===y){if(v.unwatcher(),v.currentOutputSnapshotRaw=null,v.currentOutputSnapshotResolved=null,v.onComplete){var b=new a.DataSnapshot(v.currentInputSnapshot,new o.Reference(this,v.path),c.PRIORITY_INDEX);v.onComplete(null,!1,b)}}else{d.validateFirebaseData("transaction failed: Data returned ",y,v.path),v.status=r.RUN;var w=this.transactionQueueTree_.subTree(t),C=w.getValue()||[];C.push(v),w.setValue(C);var E=void 0;if("object"==typeof y&&null!==y&&p.contains(y,".priority"))E=p.safeGet(y,".priority"),i.assert(d.isValidPriority(E),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{E=(this.serverSyncTree_.calcCompleteEventCache(t)||_.ChildrenNode.EMPTY_NODE).getPriority().val()}E=E;var P=this.generateServerValues(),A=f.nodeFromJSON(y,E),S=h.resolveDeferredValueSnapshot(A,P);v.currentOutputSnapshotRaw=A,v.currentOutputSnapshotResolved=S,v.currentWriteId=this.getNextWriteId_();var x=this.serverSyncTree_.applyUserOverwrite(t,S,v.currentWriteId,v.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,x),this.sendReadyTransactions_()}},g.Repo.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||_.ChildrenNode.EMPTY_NODE},g.Repo.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);i.assert(n.length>0,"Sending zero length transaction queue");n.every(function(t){return t.status===r.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},g.Repo.prototype.sendTransactionQueue_=function(t,e){for(var n=this,u=e.map(function(t){return t.currentWriteId}),h=this.getLatestState_(t,u),d=h,p=h.hash(),f=0;f<e.length;f++){var _=e[f];i.assert(_.status===r.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=r.SENT,_.retryCount++;var g=s.Path.relativePath(t,_.path);d=d.updateChild(g,_.currentOutputSnapshotRaw)}var v=d.val(!0),m=t;this.server_.put(m.toString(),v,function(i){n.log_("transaction put response",{path:m.toString(),status:i});var s=[];if("ok"===i){for(var u=[],h=0;h<e.length;h++){if(e[h].status=r.COMPLETED,s=s.concat(n.serverSyncTree_.ackUserWrite(e[h].currentWriteId)),e[h].onComplete){var d=e[h].currentOutputSnapshotResolved,p=new o.Reference(n,e[h].path),f=new a.DataSnapshot(d,p,c.PRIORITY_INDEX);u.push(e[h].onComplete.bind(null,null,!0,f))}e[h].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,s);for(h=0;h<u.length;h++)l.exceptionGuard(u[h])}else{if("datastale"===i)for(h=0;h<e.length;h++)e[h].status===r.SENT_NEEDS_ABORT?e[h].status=r.NEEDS_ABORT:e[h].status=r.RUN;else{l.warn("transaction at "+m.toString()+" failed: "+i);for(h=0;h<e.length;h++)e[h].status=r.NEEDS_ABORT,e[h].abortReason=i}n.rerunTransactions_(t)}},p)},g.Repo.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},g.Repo.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],u=[],_=t.filter(function(t){return t.status===r.RUN}).map(function(t){return t.currentWriteId}),v=0;v<t.length;v++){var m=t[v],y=s.Path.relativePath(e,m.path),b=!1,w=void 0;if(i.assert(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===r.NEEDS_ABORT)b=!0,w=m.abortReason,u=u.concat(this.serverSyncTree_.ackUserWrite(m.currentWriteId,!0));else if(m.status===r.RUN)if(m.retryCount>=g.Repo.MAX_TRANSACTION_RETRIES_)b=!0,w="maxretry",u=u.concat(this.serverSyncTree_.ackUserWrite(m.currentWriteId,!0));else{var C=this.getLatestState_(m.path,_);m.currentInputSnapshot=C;var E=t[v].update(C.val());if(void 0!==E){d.validateFirebaseData("transaction failed: Data returned ",E,m.path);var P=f.nodeFromJSON(E);"object"==typeof E&&null!=E&&p.contains(E,".priority")||(P=P.updatePriority(C.getPriority()));var A=m.currentWriteId,S=this.generateServerValues(),x=h.resolveDeferredValueSnapshot(P,S);m.currentOutputSnapshotRaw=P,m.currentOutputSnapshotResolved=x,m.currentWriteId=this.getNextWriteId_(),_.splice(_.indexOf(A),1),u=(u=u.concat(this.serverSyncTree_.applyUserOverwrite(m.path,x,m.currentWriteId,m.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(A,!0))}else b=!0,w="nodata",u=u.concat(this.serverSyncTree_.ackUserWrite(m.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,u),u=[],b&&(t[v].status=r.COMPLETED,I=t[v].unwatcher,setTimeout(I,Math.floor(0)),t[v].onComplete))if("nodata"===w){var O=new o.Reference(this,t[v].path),k=t[v].currentInputSnapshot,T=new a.DataSnapshot(k,O,c.PRIORITY_INDEX);n.push(t[v].onComplete.bind(null,null,!1,T))}else n.push(t[v].onComplete.bind(null,new Error(w),!1,null))}var I;this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(v=0;v<n.length;v++)l.exceptionGuard(n[v]);this.sendReadyTransactions_()}},g.Repo.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},g.Repo.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},g.Repo.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},g.Repo.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var i=0,o=0;o<n.length;o++)n[o].status!==r.COMPLETED&&(n[i]=n[o],i++);n.length=i,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},g.Repo.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},g.Repo.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],o=[],a=-1,s=0;s<e.length;s++)if(e[s].status===r.SENT_NEEDS_ABORT);else if(e[s].status===r.SENT)i.assert(a===s-1,"All SENT items should be at beginning of queue."),a=s,e[s].status=r.SENT_NEEDS_ABORT,e[s].abortReason="set";else if(i.assert(e[s].status===r.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),o=o.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete){n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))}-1===a?t.setValue(null):e.length=a+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),o);for(s=0;s<n.length;s++)l.exceptionGuard(n[s])}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(0),a=function(){return function(){this.children={},this.childCount=0,this.value=null}}();e.TreeNode=a;var s=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new a),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof i.Path?e:new i.Path(e),s=this;null!==(n=r.getFront());){s=new t(n,s,o.safeGet(s.node_.children,n)||new a),r=r.popFront()}return s},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){r.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;o.forEach(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new i.Path(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=o.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();e.Tree=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(87),i=n(86);e.forceLongPolling=function(){r.WebSocketConnection.forceDisallow(),i.BrowserPollConnection.forceAllow()},e.forceWebSockets=function(){i.BrowserPollConnection.forceDisallow()},e.isWebSocketsAvailable=function(){return r.WebSocketConnection.isAvailable()},e.setSecurityDebugCallback=function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},e.stats=function(t,e){t.repo.stats(e)},e.statsIncrementCounter=function(t,e){t.repo.statsIncrementCounter(e)},e.dataUpdateCount=function(t){return t.repo.dataUpdateCount},e.interceptServerData=function(t,e){return t.repo.interceptServerData_(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(67),i=n(83),o=n(49),a=n(85);e.DataConnection=i.PersistentConnection,i.PersistentConnection.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},i.PersistentConnection.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},e.RealTimeConnection=a.Connection,e.hijackHash=function(t){var e=i.PersistentConnection.prototype.put;return i.PersistentConnection.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){i.PersistentConnection.prototype.put=e}},e.ConnectionTarget=r.RepoInfo,e.queryIdentifier=function(t){return t.queryIdentifier()},e.listens=function(t){return t.repo.persistentConnection_.listens_},e.forceRestClient=function(t){o.RepoManager.getInstance().forceRestClient(t)}},function(t,e,n){n(181)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerMessaging=o;var r=n(182),i=n(186);function o(t){var e={Messaging:r.a};t.INTERNAL.registerService("messaging",function(t){return self&&"ServiceWorkerGlobalScope"in self?new i.a(t):new r.a(t)},e)}o(n(10).firebase)},function(t,e,n){"use strict";var r=n(90),i=n(33),o=n(93),a=n(185),s=n(92),u=n(0),c=(n.n(u),this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),l=function(t){c(e,t);function e(e){var n=t.call(this,e)||this;return n.messageObserver_=null,n.onMessage_=Object(u.createSubscribe)(function(t){n.messageObserver_=t}),n.tokenRefreshObserver_=null,n.onTokenRefresh_=Object(u.createSubscribe)(function(t){n.tokenRefreshObserver_=t}),n.setupSWMessageListener_(),n}return e.prototype.getToken=function(){var e=this;return this.isSupported_()?this.manifestCheck_().then(function(){return t.prototype.getToken.call(e)}):Promise.reject(this.errorFactory_.create(i.a.codes.UNSUPPORTED_BROWSER))},e.prototype.manifestCheck_=function(){var t=this;if(this.manifestCheckPromise_)return this.manifestCheckPromise_;var e=document.querySelector('link[rel="manifest"]');return this.manifestCheckPromise_=e?fetch(e.href).then(function(t){return t.json()}).catch(function(){return Promise.resolve()}).then(function(e){if(e&&e.gcm_sender_id&&"103953800507"!==e.gcm_sender_id)throw t.errorFactory_.create(i.a.codes.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.manifestCheckPromise_},e.prototype.requestPermission=function(){var t=this;return Notification.permission===s.a.granted?Promise.resolve():new Promise(function(e,n){var r=function(r){return r===s.a.granted?e():r===s.a.denied?n(t.errorFactory_.create(i.a.codes.PERMISSION_BLOCKED)):n(t.errorFactory_.create(i.a.codes.PERMISSION_DEFAULT))},o=Notification.requestPermission(function(t){o||r(t)});o&&o.then(r)})},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw this.errorFactory_.create(i.a.codes.SW_REGISTRATION_EXPECTED);if(void 0!==this.registrationToUse_)throw this.errorFactory_.create(i.a.codes.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse_=t},e.prototype.onMessage=function(t,e,n){return this.onMessage_(t,e,n)},e.prototype.onTokenRefresh=function(t,e,n){return this.onTokenRefresh_(t,e,n)},e.prototype.waitForRegistrationToActivate_=function(t){var e=this,n=t.installing||t.waiting||t.active;return new Promise(function(r,o){if(n)if("activated"!==n.state)if("redundant"!==n.state){var a=function(){if("activated"===n.state)r(t);else{if("redundant"!==n.state)return;o(e.errorFactory_.create(i.a.codes.SW_REG_REDUNDANT))}n.removeEventListener("statechange",a)};n.addEventListener("statechange",a)}else o(e.errorFactory_.create(i.a.codes.SW_REG_REDUNDANT));else r(t);else o(e.errorFactory_.create(i.a.codes.NO_SW_IN_REG))})},e.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse_?this.waitForRegistrationToActivate_(this.registrationToUse_):(this.registrationToUse_=null,navigator.serviceWorker.register(a.a.path,{scope:a.a.scope}).catch(function(e){throw t.errorFactory_.create(i.a.codes.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:e.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return t.registrationToUse_=e,e.update(),e})}))},e.prototype.setupSWMessageListener_=function(){var t=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[o.a.PARAMS.TYPE_OF_MSG]){var n=e.data;switch(n[o.a.PARAMS.TYPE_OF_MSG]){case o.a.TYPES_OF_MSG.PUSH_MSG_RECEIVED:case o.a.TYPES_OF_MSG.NOTIFICATION_CLICKED:var r=n[o.a.PARAMS.DATA];t.messageObserver_.next(r)}}},!1)},e.prototype.isSupported_=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},e}(r.a);e.a=l},function(t,e,n){"use strict";var r=n(0),i=(n.n(r),n(33)),o=n(184),a=n(91),s="fcm_token_object_Store",u=function(){function t(){this.errorFactory_=new r.ErrorFactory("messaging","Messaging",i.a.map),this.openDbPromise_=null}return t.prototype.openDatabase_=function(){return this.openDbPromise_?this.openDbPromise_:(this.openDbPromise_=new Promise(function(e,n){var r=indexedDB.open(t.DB_NAME,1);r.onerror=function(t){n(t.target.error)},r.onsuccess=function(t){e(t.target.result)},r.onupgradeneeded=function(t){var e=t.target.result.createObjectStore(s,{keyPath:"swScope"});e.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),e.createIndex("fcmToken","fcmToken",{unique:!0})}}),this.openDbPromise_)},t.prototype.closeDatabase=function(){var t=this;return this.openDbPromise_?this.openDbPromise_.then(function(e){e.close(),t.openDbPromise_=null}):Promise.resolve()},t.prototype.getTokenDetailsFromToken=function(t){return this.openDatabase_().then(function(e){return new Promise(function(n,r){var i=e.transaction([s]).objectStore(s).index("fcmToken").get(t);i.onerror=function(t){r(t.target.error)},i.onsuccess=function(t){n(t.target.result)}})})},t.prototype.getTokenDetailsFromSWScope_=function(t){return this.openDatabase_().then(function(e){return new Promise(function(n,r){var i=e.transaction([s]).objectStore(s).get(t);i.onerror=function(t){r(t.target.error)},i.onsuccess=function(t){n(t.target.result)}})})},t.prototype.getAllTokenDetailsForSenderId_=function(t){return this.openDatabase_().then(function(e){return new Promise(function(n,r){var i=[],o=e.transaction([s]).objectStore(s).openCursor();o.onerror=function(t){r(t.target.error)},o.onsuccess=function(e){var r=e.target.result;r?(r.value.fcmSenderId===t&&i.push(r.value),r.continue()):n(i)}})})},t.prototype.subscribeToFCM=function(t,e,n){var r=this,s=Object(o.a)(e.getKey("p256dh")),u=Object(o.a)(e.getKey("auth")),c="authorized_entity="+t+"&endpoint="+e.endpoint+"&encryption_key="+s+"&encryption_auth="+u;n&&(c+="&pushSet="+n);var l=new Headers;l.append("Content-Type","application/x-www-form-urlencoded");var h={method:"POST",headers:l,body:c};return fetch(a.a.ENDPOINT+"/fcm/connect/subscribe",h).then(function(t){return t.json()}).then(function(t){var e=t;if(e.error){var n=e.error.message;throw r.errorFactory_.create(i.a.codes.TOKEN_SUBSCRIBE_FAILED,{message:n})}if(!e.token)throw r.errorFactory_.create(i.a.codes.TOKEN_SUBSCRIBE_NO_TOKEN);if(!e.pushSet)throw r.errorFactory_.create(i.a.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);return{token:e.token,pushSet:e.pushSet}})},t.prototype.isSameSubscription_=function(t,e){return t.endpoint===e.endpoint&&Object(o.a)(t.getKey("auth"))===e.auth&&Object(o.a)(t.getKey("p256dh"))===e.p256dh},t.prototype.saveTokenDetails_=function(t,e,n,r,i){var a={swScope:e.scope,endpoint:n.endpoint,auth:Object(o.a)(n.getKey("auth")),p256dh:Object(o.a)(n.getKey("p256dh")),fcmToken:r,fcmPushSet:i,fcmSenderId:t};return this.openDatabase_().then(function(t){return new Promise(function(e,n){var r=t.transaction([s],"readwrite").objectStore(s).put(a);r.onerror=function(t){n(t.target.error)},r.onsuccess=function(t){e()}})})},t.prototype.getSavedToken=function(t,e){var n=this;return e instanceof ServiceWorkerRegistration?"string"!=typeof t||0===t.length?Promise.reject(this.errorFactory_.create(i.a.codes.BAD_SENDER_ID)):this.getAllTokenDetailsForSenderId_(t).then(function(n){if(0!==n.length){var r=n.findIndex(function(n){return e.scope===n.swScope&&t===n.fcmSenderId});if(-1!==r)return n[r]}}).then(function(t){if(t)return e.pushManager.getSubscription().catch(function(t){throw n.errorFactory_.create(i.a.codes.GET_SUBSCRIPTION_FAILED)}).then(function(e){if(e&&n.isSameSubscription_(e,t))return t.fcmToken})}):Promise.reject(this.errorFactory_.create(i.a.codes.SW_REGISTRATION_EXPECTED))},t.prototype.createToken=function(t,e){var n=this;if("string"!=typeof t||0===t.length)return Promise.reject(this.errorFactory_.create(i.a.codes.BAD_SENDER_ID));if(!(e instanceof ServiceWorkerRegistration))return Promise.reject(this.errorFactory_.create(i.a.codes.SW_REGISTRATION_EXPECTED));var r,o;return e.pushManager.getSubscription().then(function(t){return t||e.pushManager.subscribe(a.a.SUBSCRIPTION_OPTIONS)}).then(function(e){return r=e,n.subscribeToFCM(t,r)}).then(function(i){return o=i,n.saveTokenDetails_(t,e,r,o.token,o.pushSet)}).then(function(){return o.token})},t.prototype.deleteToken=function(t){var e=this;return"string"!=typeof t||0===t.length?Promise.reject(this.errorFactory_.create(i.a.codes.INVALID_DELETE_TOKEN)):this.getTokenDetailsFromToken(t).then(function(t){if(!t)throw e.errorFactory_.create(i.a.codes.DELETE_TOKEN_NOT_FOUND);return e.openDatabase_().then(function(n){return new Promise(function(r,o){var a=n.transaction([s],"readwrite").objectStore(s).delete(t.swScope);a.onerror=function(t){o(t.target.error)},a.onsuccess=function(n){0!==n.target.result?r(t):o(e.errorFactory_.create(i.a.codes.FAILED_TO_DELETE_TOKEN))}})})})},t}();e.a=u},function(t,e,n){"use strict";e.a=function(t){return function(t){var e=new Uint8Array(t);return window.btoa(String.fromCharCode.apply(null,e))}(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}},function(t,e,n){"use strict";e.a={path:"/firebase-messaging-sw.js",scope:"/firebase-cloud-messaging-push-scope"}},function(t,e,n){"use strict";var r=n(90),i=n(33),o=n(93),a=n(91),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(t){s(e,t);function e(e){var n=t.call(this,e)||this;return self.addEventListener("push",function(t){return n.onPush_(t)},!1),self.addEventListener("pushsubscriptionchange",function(t){return n.onSubChange_(t)},!1),self.addEventListener("notificationclick",function(t){return n.onNotificationClick_(t)},!1),n.bgMessageHandler_=null,n}return e.prototype.onPush_=function(t){var e,n=this;try{e=t.data.json()}catch(t){return}var r=this.hasVisibleClients_().then(function(t){if(t){if(e.notification||n.bgMessageHandler_)return n.sendMessageToWindowClients_(e)}else{var r=n.getNotificationData_(e);if(r){var i=r.title||"";return self.registration.showNotification(i,r)}if(n.bgMessageHandler_)return n.bgMessageHandler_(e)}});t.waitUntil(r)},e.prototype.onSubChange_=function(t){var e=this,n=this.getToken().then(function(t){if(!t)throw e.errorFactory_.create(i.a.codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE);var n=null,r=e.getTokenManager();return r.getTokenDetailsFromToken(t).then(function(t){if(!(n=t))throw e.errorFactory_.create(i.a.codes.INVALID_SAVED_TOKEN);return self.registration.pushManager.subscribe(a.a.SUBSCRIPTION_OPTIONS)}).then(function(t){return r.subscribeToFCM(n.fcmSenderId,t,n.fcmPushSet)}).catch(function(t){return r.deleteToken(n.fcmToken).then(function(){throw e.errorFactory_.create(i.a.codes.UNABLE_TO_RESUBSCRIBE,{message:t})})})});t.waitUntil(n)},e.prototype.onNotificationClick_=function(t){var e=this;if(t.notification&&t.notification.data&&t.notification.data.FCM_MSG){t.stopImmediatePropagation(),t.notification.close();var n=t.notification.data.FCM_MSG,r=n.notification.click_action;if(r){var i=this.getWindowClient_(r).then(function(t){return t||self.clients.openWindow(r)}).then(function(t){if(t){n.notification;delete n.notification;var r=o.a.createNewMsg(o.a.TYPES_OF_MSG.NOTIFICATION_CLICKED,n);return e.attemptToMessageClient_(t,r)}});t.waitUntil(i)}}},e.prototype.getNotificationData_=function(t){if(t&&"object"==typeof t.notification){var e=Object.assign({},t.notification);return e.data=(n={},n.FCM_MSG=t,n),e;var n}},e.prototype.setBackgroundMessageHandler=function(t){if(t&&"function"!=typeof t)throw this.errorFactory_.create(i.a.codes.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler_=t},e.prototype.getWindowClient_=function(t){var e=new URL(t).href;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){for(var n=null,r=0;r<t.length;r++){if(new URL(t[r].url).href===e){n=t[r];break}}if(n)return n.focus(),n})},e.prototype.attemptToMessageClient_=function(t,e){var n=this;return new Promise(function(r,o){if(!t)return o(n.errorFactory_.create(i.a.codes.NO_WINDOW_CLIENT_TO_MSG));t.postMessage(e),r()})},e.prototype.hasVisibleClients_=function(){return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){return t.some(function(t){return"visible"===t.visibilityState})})},e.prototype.sendMessageToWindowClients_=function(t){var e=this;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){var r=o.a.createNewMsg(o.a.TYPES_OF_MSG.PUSH_MSG_RECEIVED,t);return Promise.all(n.map(function(t){return e.attemptToMessageClient_(t,r)}))})},e.prototype.getSWRegistration_=function(){return Promise.resolve(self.registration)},e}(r.a);e.a=u},function(t,e,n){n(188)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerStorage=h;var r=n(10),i=n(23),o=n(24),a=n(189),s=n(95),u=n(198),c="storage";function l(t,e,n){return new u.a(t,new a.a,n)}function h(t){var e={TaskState:o.c,TaskEvent:o.b,StringFormat:i.a,Storage:u.a,Reference:s.a};t.INTERNAL.registerService(c,l,e,void 0,!0)}h(r.default)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(190),i=function(){function t(){}return t.prototype.createXhrIo=function(){return new r.a},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(9),i=n(17),o=n(14),a=n(7),s=n(94),u=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=s.a.NO_ERROR,this.sendPromise_=o.a(function(e,n){t.xhr_.addEventListener("abort",function(n){t.errorCode_=s.a.ABORT,e(t)}),t.xhr_.addEventListener("error",function(n){t.errorCode_=s.a.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(n){e(t)})})}return t.prototype.send=function(t,e,n,o){var s=this;if(this.sent_)throw r.e("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),a.a(o)){var u=o;i.b(u,function(t,e){s.xhr_.setRequestHeader(t,e.toString())})}return a.a(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw r.e("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw r.e("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw r.e("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){a.a(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){a.a(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}()},function(t,e,n){"use strict";e.a=function(t){var e;try{e=JSON.parse(t)}catch(t){return null}return r.f(e)?e:null};var r=n(7)},function(t,e,n){"use strict";e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var i=new n,o=0;o<t.length;o++)i.append(t[o]);return i.getBlob()}if(r.e())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")},e.b=function(t,e,n){if(t.webkitSlice)return t.webkitSlice(e,n);if(t.mozSlice)return t.mozSlice(e,n);if(t.slice)return t.slice(e,n);return null};var r=n(7)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}()},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(24),i=n(195),o=n(196),a=n(50),s=n(53),u=n(197),c=n(9),l=n(14),h=n(98),d=n(7),p=function(){function t(t,e,n,i,o,a){void 0===a&&(a=null);var s=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=o,this.metadata_=a,this.mappings_=i,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=r.a.RUNNING,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(c.a.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(r.a.ERROR))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(c.a.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(r.a.ERROR))},this.promise_=l.a(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n,r){t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===r.a.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case r.a.RUNNING:t(n);break;case r.a.CANCELING:e.transition_(r.a.CANCELED);break;case r.a.PAUSING:e.transition_(r.a.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=h.c(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=h.f(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=h.h*this.chunkMultiplier_,n=new h.a(this.transferred_,this.blob_.size()),i=this.uploadUrl_;this.resolveToken_(function(o){var a;try{a=h.b(t.location_,t.authWrapper_,i,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(r.a.ERROR)}var s=t.authWrapper_.makeRequest(a,o);t.request_=s,s.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(r.a.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){h.h*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=h.e(t.authWrapper_,t.location_,t.mappings_),i=t.authWrapper_.makeRequest(n,e);t.request_=i,i.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(r.a.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=h.g(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),i=t.authWrapper_.makeRequest(n,e);t.request_=i,i.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(r.a.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case r.a.CANCELING:case r.a.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case r.a.RUNNING:var e=this.state_===r.a.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case r.a.PAUSED:this.state_=t,this.notifyObservers_();break;case r.a.CANCELED:this.error_=c.c(),this.state_=t,this.notifyObservers_();break;case r.a.ERROR:case r.a.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case r.a.PAUSING:this.transition_(r.a.PAUSED);break;case r.a.CANCELING:this.transition_(r.a.CANCELED);break;case r.a.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=r.d(this.state_);return new o.a(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,o){void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===o&&(o=void 0);var s="Expected a function or an Object with one of `next`, `error`, `complete` properties.",u=a.d(!0).validator,c=a.a(null,!0).validator;function l(t){try{return void u(t)}catch(t){}try{c(t);if(!(d.c(t.next)||d.c(t.error)||d.c(t.complete)))throw"";return}catch(t){throw s}}var h=[a.e(function(e){if(t!==r.b.STATE_CHANGED)throw"Expected one of the event types: ["+r.b.STATE_CHANGED+"]."}),a.a(l,!0),a.d(!0),a.d(!0)];a.g("on",h,arguments);var p=this;function f(t){return function(e,n,r){null!==t&&a.g("on",t,arguments);var s=new i.a(e,n,o);return p.addObserver_(s),function(){p.removeObserver_(s)}}}var _=[a.a(function(t){if(null===t)throw s;l(t)}),a.d(!0),a.d(!0)];return!(d.c(e)||d.c(n)||d.c(o))?f(_):f(null)(e,n,o)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){s.c(this.observers_,t)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_();s.a(this.observers_).forEach(function(e){t.notifyObserver_(e)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(r.d(this.state_)){case r.c.SUCCESS:Object(u.a)(this.resolve_.bind(null,this.snapshot))();break;case r.c.CANCELED:case r.c.ERROR:var e=this.reject_;Object(u.a)(e.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(r.d(this.state_)){case r.c.RUNNING:case r.c.PAUSED:null!==t.next&&Object(u.a)(t.next.bind(t,this.snapshot))();break;case r.c.SUCCESS:null!==t.complete&&Object(u.a)(t.complete.bind(t))();break;case r.c.CANCELED:case r.c.ERROR:null!==t.error&&Object(u.a)(t.error.bind(t,this.error_))();break;default:null!==t.error&&Object(u.a)(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){a.g("resume",[],arguments);var t=this.state_===r.a.PAUSED||this.state_===r.a.PAUSING;return t&&this.transition_(r.a.RUNNING),t},t.prototype.pause=function(){a.g("pause",[],arguments);var t=this.state_===r.a.RUNNING;return t&&this.transition_(r.a.PAUSING),t},t.prototype.cancel=function(){a.g("cancel",[],arguments);var t=this.state_===r.a.RUNNING||this.state_===r.a.PAUSING;return t&&this.transition_(r.a.CANCELING),t},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(7),i=function(){return function(t,e,n){if(r.b(t)||r.a(e)||r.a(n))this.next=t,this.error=e||null,this.complete=n||null;else{var i=t;this.next=i.next||null,this.error=i.error||null,this.complete=i.complete||null}}}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}return Object.defineProperty(t.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var t=this.metadata.downloadURLs;return null!=t&&null!=t[0]?t[0]:null}return null},enumerable:!0,configurable:!0}),t}()},function(t,e,n){"use strict";e.a=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.c(!0).then(function(){t.apply(null,e)})}};var r=n(14)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(50),i=n(199),o=n(35),a=n(14),s=n(202),u=n(95),c=function(){function t(t,e,n){this.bucket_=null;if(this.authWrapper_=new i.a(t,function(t,e){return new u.a(t,e)},s.a,this,e),this.app_=t,null!=n)this.bucket_=o.a.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new o.a(r,""))}this.internals_=new l(this)}return t.prototype.ref=function(t){if(r.g("ref",[r.e(function(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new u.a(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){return r.g("refFromURL",[r.e(function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{o.a.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new u.a(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){r.g("setMaxUploadRetryTime",[r.c()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){r.g("setMaxOperationRetryTime",[r.c()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),l=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),a.c(void 0)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(34),i=n(9),o=n(200),a=n(35),s=n(14),u=n(201),c=n(7),l=function(){function t(e,n,i,o,a){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var s=this.app_.options;c.a(s)&&(this.bucket_=t.extractBucket_(s))}this.storageRefMaker_=n,this.requestMaker_=i,this.pool_=a,this.service_=o,this.maxOperationRetryTime_=r.d,this.maxUploadRetryTime_=r.e,this.requestMap_=new u.a}return t.extractBucket_=function(t){var e=t[r.c]||null;if(null==e)return null;return a.a.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&c.a(this.app_.INTERNAL)&&c.a(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):s.c(null)},t.prototype.bucket=function(){if(this.deleted_)throw i.b();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new o.a(i.b());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(14),i=function(){function t(t){this.promise_=r.b(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(17),i=n(34),o=function(){function t(){this.map_={},this.id_=i.h}return t.prototype.addRequest=function(t){var e=this.id_;this.id_++,this.map_[e]=t;var n=this;function r(){delete n.map_[e]}t.getPromise().then(r,r)},t.prototype.clear=function(){r.b(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}()},function(t,e,n){"use strict";e.a=function(t,e,n){var i=l.c(t.urlParams),o=t.url+i,a=s.a(t.headers);return u=a,c=e,null!==c&&c.length>0&&(u.Authorization="Firebase "+c),function(t){var e=void 0!==r.default?r.default.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(a),new d(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n);var u,c};var r=n(10),i=n(53),o=n(203),a=n(9),s=n(17),u=n(14),c=n(7),l=n(52),h=n(94),d=function(){function t(t,e,n,r,i,o,a,s,c,l,h){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=c,this.pool_=h;var d=this;this.promise_=u.a(function(t,e){d.resolve_=t,d.reject_=e,d.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){if(n)e(!1,new p(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(o),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(o),t.pendingXhr_=null;var r=(n=n).getErrorCode()===h.a.NO_ERROR,a=n.getStatus();if(r&&!t.isRetryStatusCode_(a)){var s=i.b(t.successCodes_,a);e(!0,new p(s,n))}else{var u=n.getErrorCode()===h.a.ABORT;e(!1,new p(!1,null,u))}})}function o(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}function n(e,n){var r=t.resolve_,i=t.reject_,o=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(o,o.getResponseText());c.c(s)?r(s):r()}catch(t){i(t)}else if(null!==o){(u=a.s()).setServerResponseProp(o.getResponseText()),t.errorCallback_?i(t.errorCallback_(o,u)):i(u)}else if(n.canceled){i(u=t.appDelete_?a.b():a.c())}else{var u;i(u=a.o())}}this.canceled_?n(0,new p(!1,null,!0)):this.backoffId_=o.a(e,n,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&o.b(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=i.b([408,429],t),r=i.b(this.additionalRetryCodes_,t);return e||n||r},t}(),p=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}()},function(t,e,n){"use strict";e.a=function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){u||(u=!0,e.apply(null,arguments))}function l(e){i=setTimeout(function(){i=null,t(h,s())},e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.apply(null,arguments);else{var i=s()||o;if(i)c.apply(null,arguments);else{r<64&&(r*=2);var h;1===a?(a=2,h=0):h=1e3*(r+Math.random()),l(h)}}}var d=!1;function p(t){d||(d=!0,u||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout(function(){o=!0,p(!0)},n),p},e.b=function(t){t(!1)}}])});